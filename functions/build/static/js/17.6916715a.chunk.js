(this.webpackJsonpcalcetto=this.webpackJsonpcalcetto||[]).push([[17],{1329:function(e,t,n){"use strict";n.r(t);var r=n(307),a=n(2),c=n(0),o=n(202),s=n(152),i=n(437),l=n(111),u=n(7),d=n(58),b=function(e){return e.alias?e.alias:"".concat(e.name," ").concat(e.surname)};function j(e){return{id:0,name:e||"",ownerId:0,date:new Date,progress:d.TournamentProgress.New,public:!0,autoOrder:!0,label:e||""}}var m=function(e){var t=e.innerProps;return Object(a.jsx)("span",Object(u.a)({style:h},t))},h={alignSelf:"stretch",backgroundColor:"green",marginBottom:8,marginTop:8,marginRight:10,width:1},O={width:"100%",margin:"auto",backgroundColor:"inherit",borderColor:"#ffc107",borderWidth:"3px",textAlign:"left"},g=n(8),p=n.n(g),f=n(76),w=n(382),x=n(129),v=n.n(x),y=n(24),T=n(40),N=n(23),I=n(34),S=n(304),D=function(){var e=Object(y.g)(),t=Object(T.d)(),n=Object(S.a)(["common","tournament"]).t,o=Object(c.useState)(""),i=Object(r.a)(o,2),u=i[0],d=i[1],b=Object(c.useState)(new Date),m=Object(r.a)(b,2),h=m[0],O=m[1],g=Object(c.useState)(!0),x=Object(r.a)(g,2),D=x[0],C=x[1],k=function(){var r=Object(f.a)(p.a.mark((function r(a){var c;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),u){r.next=4;break}return I.b.error(n("tournament:error.name")),r.abrupt("return");case 4:(c=j(u)).date=h,c.public=D,t(N.a.save.request({tournament:c,history:e}));case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(a.jsxs)(w.a,{onSubmit:k,children:[Object(a.jsxs)(w.a.Row,{children:[Object(a.jsx)(s.a,{md:6,children:Object(a.jsxs)(w.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(w.a.Label,{children:n("tournament:name")}),Object(a.jsx)(w.a.Control,{"data-cy":"new-name",type:"text",required:!0,placeholder:n("tournament:name"),maxLength:30,value:u,onChange:function(e){return d(e.currentTarget.value)}})]})}),Object(a.jsx)(s.a,{md:3,children:Object(a.jsxs)(w.a.Group,{children:[Object(a.jsx)(w.a.Label,{children:n("tournament:date")}),Object(a.jsx)(w.a.Control,{"data-cy":"new-date",as:function(){return Object(a.jsx)(v.a,{highlightDates:[new Date],locale:"it",selected:h,dateFormat:"dd/MM/yyyy",onChange:function(e){return O(e||new Date)}})}})]})}),Object(a.jsx)(s.a,{md:3,children:Object(a.jsxs)(w.a.Group,{controlId:"visible",children:[Object(a.jsxs)(w.a.Label,{children:[n("tournament:visibility")," "]}),Object(a.jsxs)(w.a.Control,{as:"select",onChange:function(){return C(!D)},"data-cy":"new-visibility",children:[Object(a.jsx)("option",{children:n("tournament:public")}),Object(a.jsx)("option",{children:n("tournament:private")})]})]})})]}),Object(a.jsx)(w.a.Row,{children:Object(a.jsx)(s.a,{children:Object(a.jsx)(l.a,{disabled:!u,type:"submit",size:"lg",variant:"outline-warning","data-cy":"new-submit",className:"float-right default-color-white",children:Object(a.jsx)("span",{style:{fontSize:"larger",fontWeight:"bolder"},children:n("common:continue")})})})})]})},C=n(381),k=n(324),P=n(65),Z=n(10),z=n(75),F=n(431),A=n(49),L={option:function(e){return Object(u.a)(Object(u.a)({},e),{},{backgroundColor:"white",color:"black","&:hover":{backgroundColor:"#64bd9c",color:"white"}})},control:function(e){return Object(u.a)(Object(u.a)({},e),{},{height:"3vmin",marginBottom:"40px"})},singleValue:function(e){return Object(u.a)({},e)},valueContainer:function(e){return Object(u.a)(Object(u.a)({},e),{},{height:"100%",fontSize:"larger",alignItems:"center",justifyContent:"flex-start","&:active":{height:"100%",fontSize:"larger",justifyContent:"flex-start",alignItems:"center"}})}},M=function(){var e=Object(T.d)(),t=Object(y.g)(),n=Object(S.a)(["common","tournament"]).t,r=Object(T.e)(z.a.isAdmin),c=Object(T.e)(z.f.getTournament),o=function(){var a=Object(f.a)(p.a.mark((function a(o){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o.preventDefault(),c?r?(e(Z.b.reset({})),e(Z.d.reset({})),e(Z.e.reset({})),e(Z.b.reset({})),t.push("/tournament")):(console.log("Fetching pairs for tournament : ",c.id),e(Z.b.fetch.request({tId:c.id,history:t}))):I.b.error(n("common:error.generic"));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(a.jsxs)(w.a,{onSubmit:o,children:[Object(a.jsx)("label",{htmlFor:"tournamentSelect",children:n(k.c)}),Object(a.jsx)(C.a,{id:"tournamentSelect","aria-label":n(k.c),components:{IndicatorSeparator:m},styles:L,value:c,options:F.b,placeholder:n("tournament:search"),isSearchable:!0,getOptionLabel:function(e){var t=e.name,r=e.date,a=e.progress;return"".concat(t," - ").concat(Object(P.b)(r)," @ ").concat(n("tournament:progress.".concat(a)))},isClearable:!0,onChange:function(t){return e(Z.g.setTournament(t))}}),Object(a.jsxs)(l.a,{"data-cy":"select-submit",type:"submit",size:"lg",variant:"outline-warning",className:"float-right default-color-white",disabled:!c,children:[Object(a.jsx)("span",{style:{fontSize:"larger",fontWeight:"bolder",padding:"1vw"},children:n("continue")}),Object(a.jsx)(A.p,{size:"lg"})]})]})},R=n(103),B=n(153),q=n(77),E=n(1327),G=n(128),U=function(){var e=Object(S.a)(["stats"]).t,t=Object(c.useState)(!1),n=Object(r.a)(t,2),i=n[0],l=n[1],u=Object(c.useState)(),d=Object(r.a)(u,2),j=d[0],m=d[1],h=Object(c.useState)(0),O=Object(r.a)(h,2),g=O[0],w=O[1];Object(c.useEffect)((function(){i||Object(f.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(G.e)({});case 3:t=e.sent,n=t.players,r=t.pairs,m({players:n,pairs:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error");case 12:return e.prev=12,l(!0),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))()}),[i]);var x=function(t,n,r){return t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(o.a,{children:[Object(a.jsx)(s.a,{md:{span:2,offset:2},style:{textAlign:"right"},children:e("stats:".concat(r))}),Object(a.jsxs)(s.a,{md:"4",style:{textAlign:"left"},children:[e("stats:win_percentage")," ( ",e("stats:".concat(n))," )"]})]}),t.filter((function(e,n){return t.length>=4?n<4:n>-1})).sort((function(e,t){return Object(P.g)(t.totwin/t.totMatch*100,1)-Object(P.g)(e.totwin/e.totMatch*100,1)})).map((function(e,t){return Object(a.jsxs)(o.a,{children:[Object(a.jsx)(s.a,{md:{span:2,offset:2},style:{textAlign:"right",float:"left",width:"15%",marginTop:"10px",fontSize:"large"},children:Object(a.jsx)("i",{children:Object(a.jsx)("strong",{children:"pairs"===r?"".concat(b(e.player1)," - ").concat(b(e.player2)):b(e.player)})})}),Object(a.jsx)(s.a,{md:"4",style:{marginTop:"10px",float:"left",width:"70%"},children:Object(a.jsx)("div",{style:{width:"100%",backgroundColor:"#f1f1f1",textAlign:"center",color:"white"},children:Object(a.jsx)("div",{style:{width:"".concat(Object(P.g)(e.totwin/e.totMatch*100,1),"%"),height:"18px",backgroundColor:"#ffc107"}})})}),Object(a.jsxs)(s.a,{md:{span:2},style:{textAlign:"left",float:"left",width:"15%",marginTop:"10px",fontSize:"large"},children:[Object(P.g)(e.totwin/e.totMatch*100,1),"%"]})]})}))]}):null};return j&&(j.pairs||j.players)?Object(a.jsx)(E.a,{touch:!0,activeIndex:g,onSelect:function(e,t){w(e)},className:"mt-3",prevIcon:Object(a.jsx)(A.i,{size:"3x",color:"#343a40"}),nextIcon:Object(a.jsx)(A.o,{size:"3x",color:"#343a40"}),children:Object.keys(j).map((function(e,t){var n=j[e];return Object.keys(n).map((function(r){var c=n[r];return c.length>0?Object(a.jsx)(E.a.Item,{style:{opacity:1},className:"mb-5",interval:5e3,children:x(c,r,e)},"".concat(r,"-").concat(18*t)):null}))}))}):null};t.default=function(){var e=Object(T.d)(),t=Object(S.a)(["common","tournament"]).t,n=Object(R.a)(q.a.isAdmin),u=Object(R.a)(B.a.getTournamentsList),d=Object(c.useState)(!1),b=Object(r.a)(d,2),j=b[0],m=b[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(o.a,{children:Object(a.jsx)(s.a,{md:{span:"6",offset:"3"},sm:"12",children:Object(a.jsxs)(i.a,{style:O,"data-cy":"tournament-form",children:[Object(a.jsx)(i.a.Header,{as:"h2",children:t("tournament:tournament")}),Object(a.jsx)(i.a.Body,{children:Object(a.jsx)(s.a,{children:u&&0!==u.length||n?n&&j?Object(a.jsx)(D,{}):Object(a.jsx)(M,{}):Object(a.jsx)("p",{className:"text-white text-justify font-italic lead",children:Object(a.jsxs)("strong",{children:[" ",t("tournament:error.none")]})})})}),Object(a.jsx)(i.a.Footer,{children:n?Object(a.jsx)(l.a,{type:"button","data-cy":j?"select-tournament":"new-tournament",size:"lg",variant:"outline-warning",className:"float-left default-color-white",onClick:function(){return t=!j,e(Z.g.setTournament(null)),void m(t);var t},children:t(j?k.c:"tournament:new")}):null})]})})}),Object(a.jsx)(o.a,{className:"mt-2",children:Object(a.jsx)(s.a,{children:Object(a.jsx)(U,{})})})]})}},324:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c}));var r="auth:password.password",a="common:loading",c="tournament:select"},431:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));n(7);var r=n(58),a=(n(50),[{id:12,name:"hFarm2",date:new Date("2020-09-05T08:53:36.000Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!0,label:"hFarm2 @ New",ownerId:1},{id:10,name:"10",date:new Date("2020-08-26T13:43:08.795Z"),progress:r.TournamentProgress.Stage2,public:!0,autoOrder:!0,label:"10 @ Stage2",ownerId:0},{id:9,name:"9",date:new Date("2020-08-26T13:43:08.789Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!1,label:"9 @ New",ownerId:0},{id:8,name:"8",date:new Date("2020-08-26T13:43:08.785Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!1,label:"8 @ New",ownerId:0},{id:7,name:"7",date:new Date("2020-08-26T13:43:08.780Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!1,label:"7 @ New",ownerId:0},{id:6,name:"6",date:new Date("2020-08-26T13:43:08.776Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!1,label:"6 @ New",ownerId:0},{id:5,name:"5",date:new Date("2020-08-26T13:43:08.770Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!1,label:"5 @ New",ownerId:0},{id:4,name:"4",date:new Date("2020-08-26T13:43:08.766Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!1,label:"4 @ New",ownerId:0},{id:3,name:"3",date:new Date("2020-08-26T13:43:08.759Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!1,label:"3 @ New",ownerId:0},{id:2,name:"2",date:new Date("2020-08-26T13:43:08.750Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!1,label:"2 @ New",ownerId:0},{id:1,name:"1",date:new Date("2020-08-26T13:43:08.703Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!1,label:"1 @ New",ownerId:0},{id:11,name:"hFarm",date:new Date("2020-08-20T08:49:50.000Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!0,label:"hFarm @ New",ownerId:1}]),c={id:12,name:"hFarm2",date:new Date("2020-09-05T08:53:36.000Z"),progress:r.TournamentProgress.New,public:!0,autoOrder:!0,label:"hFarm2 @ New",ownerId:1};new Date("2020-08-26T14:00:27.743Z"),r.UserRole.Admin,new Date("2020-08-26T14:00:27.743Z"),r.UserRole.User}}]);
//# sourceMappingURL=17.6916715a.chunk.js.map