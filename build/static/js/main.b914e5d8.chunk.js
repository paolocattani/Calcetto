(this.webpackJsonpcalcetto=this.webpackJsonpcalcetto||[]).push([[0],{146:function(e,t,a){e.exports=a.p+"static/media/header.7774471e.jpg"},166:function(e,t,a){e.exports=a(306)},171:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},305:function(e,t,a){},306:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),l=a.n(o),c=(a(171),a(172),a(173),a(9)),i=a.n(c),s=a(23),u=a(12),d=a(11),m=a(146),p=a.n(m),f=a(320),b=a(323),h=a(325),g=a(316),E=a(19),v=a(147),y=a(55),w=a(315),j=a(150),O=a(327),x=a(322),C=a(22);function S(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return"".concat(n,"-").concat(a,"-").concat(t)}new RegExp("^d{10}$");var k=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,16})"),T=new RegExp("^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$"),N={isAuthenticated:!1},I=Object(n.createContext)([N,function(){}]),R=function(){return Object(n.useContext)(I)},A=function(e){var t=e.children,a=Object(n.useState)(N),o=Object(d.a)(a,2),l=o[0],c=o[1],m=[l,c];return Object(n.useEffect)((function(){Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/auth/");case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent)&&t.ok?c(Object(s.a)({isAuthenticated:!0},a)):c(N),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("SessionContext.error :",e.t0),c(N);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]),console.log("sessionContext.session: ",l),r.a.createElement(I.Provider,{value:m},l?t:null)},F=function(e){return!!(e&&e.isAuthenticated&&e.role)&&(e.isAuthenticated&&"Admin"===e.role)},L=a(321),P=a(313),z=a(324),G=a(314),D=function(e){var t=e.message,a=e.show,n=e.onHide,o=void 0===n?function(){return a=!1}:n;return r.a.createElement(L.a,{show:a,onHide:o,size:"xl",centered:!0},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,"Caricamento....")),r.a.createElement(L.a.Body,null,t),r.a.createElement(L.a.Footer,null,r.a.createElement(P.a,{animation:"border",variant:"light"}),r.a.createElement(P.a,{animation:"border",variant:"primary"}),r.a.createElement(P.a,{animation:"border",variant:"secondary"}),r.a.createElement(P.a,{animation:"border",variant:"success"}),r.a.createElement(P.a,{animation:"border",variant:"danger"}),r.a.createElement(P.a,{animation:"border",variant:"warning"}),r.a.createElement(P.a,{animation:"border",variant:"info"}),r.a.createElement(P.a,{animation:"border",variant:"dark"})))},M=function(e){var t=e.message,a=e.type;return t&&""!==t?r.a.createElement(z.a,{className:"rounded mr-2 mx-auto",key:"".concat(a,"-message"),show:""!==t},r.a.createElement(z.a.Header,{closeButton:!1},r.a.createElement("strong",null,"Operazione completata !")),r.a.createElement(z.a.Body,null,r.a.createElement(G.a,{variant:a},t))):null};function J(e,t){return{id:null,name:e||"",ownerId:null,progress:t||"New",public:!0,label:e||""}}var H,q,B,U,V=function(e){var t=e.innerProps;return r.a.createElement("span",Object.assign({style:Z},t))},Z={alignSelf:"stretch",backgroundColor:"green",marginBottom:8,marginTop:8,marginRigth:10,width:1},W={width:"50%",margin:"auto",backgroundColor:"inherit",borderColor:"#ffc107",borderWidth:"3px"},_="PairsSelection",$="Stage1",K=a(62),X=a.n(K),Y=function(){var e=Object(n.useState)(new Date),t=Object(d.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(),c=Object(d.a)(l,2),i=c[0];c[1];return r.a.createElement(x.a,null,r.a.createElement(x.a.Row,null,r.a.createElement(j.a,{md:7},r.a.createElement(x.a.Group,{controlId:"formBasicEmail"},r.a.createElement(x.a.Label,null,"Nome"),r.a.createElement(x.a.Control,{type:"text",placeholder:"Nome Torneo"}))),r.a.createElement(j.a,{md:3},r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Label,null,"Data"),r.a.createElement(x.a.Control,{as:function(){return r.a.createElement(X.a,{highlightDates:[new Date],locale:"it",selected:a,dateFormat:"dd/MM/yyyy",onChange:function(e){return o(e||new Date)}})}}))),r.a.createElement(j.a,{md:2},r.a.createElement(x.a.Group,{controlId:"exampleForm.SelectCustom"},r.a.createElement(x.a.Label,null,"Visibilit\xe0 : ",i),r.a.createElement(x.a.Control,{as:"select",custom:!0,onChange:function(e){console.log(e)}},r.a.createElement("option",null,"Pubblico"),r.a.createElement("option",null,"Privato"))))))},Q=function(){var e=Object(n.useState)(S()),t=Object(d.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)([]),c=Object(d.a)(l,2),s=c[0],m=c[1],p={message:"",type:"success"},f=Object(n.useState)(p),b=Object(d.a)(f,2),h=b[0],k=b[1],T=Object(C.g)();Object(n.useEffect)((function(){return e=m,t=o,void Object(u.a)(i.a.mark((function a(){var n,r,o,l;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("/api/v1/tournament/list",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=a.sent,a.next=5,n.json();case 5:r=a.sent,o=r.find((function(e){return e.name===S()})),(l=o?[o].concat(Object(E.a)(r)):r).sort(),e(l),t&&t(l[0]);case 11:case"end":return a.stop()}}),a)})))();var e,t}),[]);var N=function(e){return o(e)},R=function(e){var t=J(e);o(t),m((function(e){return[].concat(Object(E.a)(e),[t])}))},A=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/v1/tournament",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J(a.name,_))});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,n.ok?T.push("/tournament/".concat(r.id)):(401===n.status?k({message:"Non sei autorizzato",type:"danger"}):r.message?k({message:r.message,type:"danger"}):k({message:"Errore interno. Riprovare piu tardi...",type:"danger"}),setTimeout((function(){return k(p)}),5e3));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(w.a,null,r.a.createElement(j.a,null,r.a.createElement(M,{message:h.message,type:h.type}),r.a.createElement(O.a,{style:W},r.a.createElement(O.a.Header,{as:"h2"},"Torneo"),r.a.createElement(O.a.Body,null,r.a.createElement(O.a.Title,null,"Scegli un torneo"),r.a.createElement(Y,null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{onSubmit:A},r.a.createElement(I.Consumer,null,(function(e){var t=Object(d.a)(e,1)[0];return F(t)?r.a.createElement(v.a,{components:{IndicatorSeparator:V},value:a,options:s,placeholder:"Crea/Cerca un torneo",isSearchable:!0,isClearable:!0,onChange:N,onCreateOption:R,createOptionPosition:"first"}):r.a.createElement(y.a,{components:{IndicatorSeparator:V},value:a,options:s,placeholder:"Cerca un torneo",isSearchable:!0,isClearable:!0,onChange:N})})),r.a.createElement("br",null),r.a.createElement(g.a,{type:"submit",size:"lg",variant:"outline-warning",disabled:!a},"Continua"))))))},ee=a(154),te=a(155),ae=a(76),ne=a(163),re=a(165),oe=a(328),le=a(75),ce=a.n(le),ie=a(69),se=a.n(ie),ue=a(29),de=a.n(ue),me=(a(297),{Portiere:"Portiere",Attaccante:"Attaccante",Master:"Master"});function pe(){H(""),q(""),B(""),U("")}var fe=function(e){return[{dataField:"id",text:"ID",editable:!1,headerStyle:function(e,t){return{width:"3%"}}},{dataField:"name",text:"Nome",headerClasses:"player-table-header-element",autoSelectText:!0,headerStyle:function(t,a){return{width:e?"16%":"25%"}},filter:Object(ie.textFilter)({placeholder:"Filtra...",getFilter:function(e){return H=e}})},{dataField:"surname",text:"Cognome",headerClasses:"player-table-header-element",autoSelectText:!0,headerStyle:function(t,a){return{width:e?"16%":"25%"}},filter:Object(ie.textFilter)({placeholder:"Filtra...",getFilter:function(e){return q=e}})},{dataField:"alias",text:"Alias",headerClasses:"player-table-header-element",headerStyle:function(t,a){return{width:e?"17%":"25%"}},autoSelectText:!0,filter:Object(ie.textFilter)({placeholder:"Filtra...",getFilter:function(e){return B=e}})},{dataField:"role",text:"Roulo",headerClasses:"player-table-header-element",headerStyle:function(t,a){return{width:"".concat(e?"11":"15","%")}},filter:Object(ie.selectFilter)({placeholder:"Filtra...",options:me,getFilter:function(e){return U=e}}),editor:{type:ue.Type.SELECT,getOptions:function(e){return[{value:"Portiere",label:"Portiere"},{value:"Attaccante",label:"Attaccante"},{value:"Master",label:"Master"}]}}},{dataField:"email",text:"Email",headerStyle:function(e,t){return{width:"20%"}},headerClasses:"player-table-header-element",autoSelectText:!0,hidden:!e},{dataField:"phone",headerStyle:function(e,t){return{width:"10%"}},text:"Telefono",headerClasses:"player-table-header-element",autoSelectText:!0,hidden:!e},{dataField:"match_played",text:"Partite Giocate",hidden:!0},{dataField:"match_won",text:"Vittorie",hidden:!0},{dataField:"total_score",text:"Punteggio",hidden:!0}]};function be(e){return e?e.alias?e.alias:e.surname?"".concat(e.name," - ").concat(e.surname):e.name:""}function he(e){return{id:null,name:"",surname:"",alias:"",label:e||"",role:"Portiere",email:"",phone:"",match_played:0,match_won:0,total_score:0,editable:!1}}var ge=function(e){return r.a.createElement("h3",null,r.a.createElement("b",null,"Gestione giocatori"))},Ee=function(e){Object(re.a)(a,e);var t=Object(ne.a)(a);function a(e){var n;return Object(ee.a)(this,a),(n=t.call(this,e)).handleOnSelect=function(e,t){return n.setState((function(a){var n=a.selectedRows,r=!!n.find((function(t){return t.id===e.id}));return t?r?{selectedRows:n}:{selectedRows:[e].concat(Object(E.a)(n))}:r?{selectedRows:n.filter((function(t){return t.id!==e.id}))}:{selectedRows:n}})),!0},n.cellEditProps=function(e){return de()({mode:e?"click":"none",blurToSave:!0,autoSelectText:!0,afterSaveCell:function(e,t,a,n){Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/player",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return t=e.sent,e.next=5,t.json();case 5:case"end":return e.stop()}}),e)})))()}})},n.state={rows:[],selectedRows:[],isLoading:!1},n.handleOnSelect=n.handleOnSelect.bind(Object(ae.a)(n)),n.deleteRow=n.deleteRow.bind(Object(ae.a)(n)),n.addRow=n.addRow.bind(Object(ae.a)(n)),n}return Object(te.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoading:!0},(function(){return Object(u.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/player/list",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t.setState({isLoading:!1,rows:n});case 7:case"end":return e.stop()}}),e)})))()}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addRow",value:function(){var e=this;this.setState({isLoading:!0},(function(){return Object(u.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/v1/player",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(he())});case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,e.setState((function(e){return{rows:[n].concat(Object(E.a)(e.rows)),isLoading:!1}}));case 7:case"end":return t.stop()}}),t)})))()}))}},{key:"deleteRow",value:function(){var e=this,t=this.state.selectedRows;t&&this.setState({isLoading:!0},(function(){return Object(u.a)(i.a.mark((function a(){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:fetch("/api/v1/player",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),e.setState((function(e){return{rows:e.rows.filter((function(e){return!t.find((function(t){return t.id===e.id}))})),selectedRows:[],isLoading:!1}}));case 2:case"end":return a.stop()}}),a)})))()}))}},{key:"render",value:function(){var e=this,t=this.state,a=this.deleteRow,n=this.addRow,o=t.rows,l=t.isLoading,c={mode:"checkbox",nonSelectable:o.filter((function(e){return!e.editable})).map((function(e){return e.id})),onSelect:this.handleOnSelect,onSelectAll:function(t,a){return a.forEach((function(a){return e.handleOnSelect(a,t)}))},style:{backgroundColor:"#c8e6c9"},selectColumnStyle:function(e){e.checked,e.disabled;var t=e.rowIndex;e.rowKey;return o[t].editable?{backgroundColor:"#28a745"}:{backgroundColor:"#dc3545"}}};return r.a.createElement(I.Consumer,null,(function(t){var i=Object(d.a)(t,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{show:l,message:"Caricamento"}),r.a.createElement(w.a,null,r.a.createElement(j.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,{horizontal:!0},F(i)?r.a.createElement(g.a,{variant:"success",onClick:n},"Aggiungi giocatore"):null,F(i)?r.a.createElement(g.a,{variant:"danger",onClick:a},"Calcella giocatore"):null,r.a.createElement(g.a,{variant:"dark",onClick:pe.bind(e)},"Pulisci Filtri")),r.a.createElement(ce.a,{wrapperClasses:"player-table",keyField:"id",data:o,columns:fe(F(i)),cellEdit:e.cellEditProps(F(i)),selectRow:c,caption:r.a.createElement(ge,null),filter:se()(),headerClasses:"player-table-header",noDataIndication:"Nessun dato reperito",striped:!0,hover:!0,bootstrap4:!0})))))}))}}]),a}(r.a.Component),ve=a(326),ye=a(317),we=a(318),je=a(149),Oe=a(164),xe=Object(Oe.a)(),Ce=r.a.forwardRef((function(e,t){var a=Object(n.useState)(),o=Object(d.a)(a,2),l=o[0],c=o[1],i=e.row,s=e.columnIndex,u=e.id,m=e.onUpdate,p=e.onSelect,f=e.options;return r.a.createElement(y.a,{components:xe,options:f,onChange:function(e){e.pairId=u,c(e);var t=be(e);m(t),p(e,i.id,s)},value:l,placeholder:"Cerca...",isSearchable:!0,isClearable:!0})})),Se=function(e,t){return[{dataField:"id",text:"ID",editable:!1,hidden:!0,align:function(){return"center"}},{dataField:"rowNumber",text:"ID",editable:!1,align:function(){return"center"}},{dataField:"player1.alias",text:"Giocatore 1",align:function(){return"center"},editorRenderer:function(a,n,o,l,c,i){return r.a.createElement(Ce,Object.assign({},a,{id:i,row:o,rowIndex:c,columnIndex:i,value:n,onSelect:e,options:t}))},headerStyle:function(e,t){return{width:"20%"}}},{dataField:"player2.alias",text:"Giocatore 2",align:function(){return"center"},editorRenderer:function(a,n,o,l,c,i){return r.a.createElement(Ce,Object.assign({},a,{id:i,row:o,rowIndex:c,columnIndex:i,value:n,onSelect:e,options:t}))},headerStyle:function(e,t){return{width:"20%"}}},{dataField:"pairAlias",text:"Alias Coppia",headerStyle:function(e,t){return{width:"25%"}}},{dataField:"stage1Name",text:"Nome girone",align:function(){return"center"},headerStyle:function(e,t){return{width:"10%"}},editor:{type:ue.Type.SELECT,options:"abcdefghijklmnopqrstuvwxyz".toUpperCase().split("").map((function(e){return{value:e,label:e}}))}},{dataField:"paid1",text:"Pagato 1",align:function(){return"center"},headerStyle:function(e,t){return{width:"7,5%"}},editor:{type:ue.Type.CHECKBOX,value:"Si:No"},style:function(e,t,a,n){if("Si"!==e)return{backgroundColor:"#ffbf47"}}},{dataField:"paid2",text:"Pagato 2",align:function(){return"center"},headerStyle:function(e,t){return{width:"7,5%"}},editor:{type:ue.Type.CHECKBOX,value:"Si:No"},style:function(e,t,a,n){if("Si"!==e)return{backgroundColor:"#ffbf47"}}}]};function ke(){return{id:null,rowNumber:null,tId:null,player1:he(),player2:he(),pairAlias:"",stage1Name:"",paid1:"No",paid2:"No"}}var Te=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/pair/list/?tId=".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.next=8,fetch(t?"/api/v1/player/list/".concat(t):"/api/v1/player/list",{method:"GET",headers:{"Content-Type":"application/json"}});case 8:return a=e.sent,e.next=11,a.json();case 11:return r=e.sent,o=[].concat(Object(E.a)(r),[he("Nessun Giocatore")]),e.next=15,fetch("/api/v1/tournament/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 15:return a=e.sent,e.next=18,a.json();case 18:return l=e.sent,e.abrupt("return",{rows:n,players:o,tournament:l});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(e,t){Object(u.a)(i.a.mark((function a(){var n,r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("/api/v1/pair/list/?tId=".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=a.sent,a.next=5,n.json();case 5:r=a.sent,e(r);case 7:case"end":return a.stop()}}),a)})))()};function Ie(e){return console.log("valueFormatter : ",e),e.pairAlias&&""!==e.pairAlias?"".concat(e.pairAlias," ( ").concat(e.id," )"):function(e){console.log("createAlias : ",e);var t="".concat(e.rowNumber," : "),a=e.player1,n=e.player2,r=e.id;return t+=a.alias?a.alias:a.name,t+=n.alias,t+=" ( ".concat(r," )")}(e)}var Re=function(e){var t=e.tournament;return t?r.a.createElement("h3",null,r.a.createElement("p",null,r.a.createElement("b",null,'Torneo "',r.a.createElement("strong",null,null===t||void 0===t?void 0:t.name.toUpperCase()),'" ( ',null===t||void 0===t?void 0:t.id," )",r.a.createElement("small",null," - ",null===t||void 0===t?void 0:t.progress)))):null},Ae=a(31),Fe=function(e){var t=e.addRow,a=e.optionsLength,n=a-1,o=n<8?8-n:0;return a?n>=8?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null," Aggiungi le coppie per questo torneo..."),r.a.createElement(g.a,{variant:"success",onClick:t},"Aggiungi Coppia")):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Ci sono solo ",n," giocatori definiti ma devono essercene almeno 8 per poter formare un torneo."),r.a.createElement("p",null,1===o?"Devi creare un altro giocatore...":"Devi creare almeno altri ".concat(o)),r.a.createElement(Ae.b,{to:"/player"},r.a.createElement(g.a,{variant:"success"},"Gestione Giocatori"))):null},Le=(a(298),function(){var e=Object(C.i)().tId;console.log("render pairs table : ",e);var t=Object(C.g)(),a=Object(n.useState)({state:!1,message:"Caricamento"}),o=Object(d.a)(a,2),l=o[0],c=o[1],s={message:"",type:"success"},m=Object(n.useState)(s),p=Object(d.a)(m,2),f=p[0],b=p[1],h=Object(n.useState)({tournament:null,rows:[],players:[]}),v=Object(d.a)(h,2),y=v[0],O=v[1],x=Object(n.useState)([]),S=Object(d.a)(x,2),k=S[0],T=S[1],N=Object(n.useState)(0),R=Object(d.a)(N,2),A=R[0],L=R[1],P=Object(n.useState)(0),z=Object(d.a)(P,2),G=z[0],J=z[1];function H(e){c({state:!1,message:e}),b({message:e,type:"danger"}),setTimeout((function(){return b(s)}),5e3)}function q(e){c({state:!1,message:e}),b({message:e,type:"success"}),setTimeout((function(){return b(s)}),5e3)}function B(e){return U.apply(this,arguments)}function U(){return(U=Object(u.a)(i.a.mark((function t(a){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c({state:!0,message:"Aggiunta riga in corso"}),(n=ke()).tId=e,t.next=6,fetch("/api/v1/pair",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:return r=t.sent,t.next=9,r.json();case 9:o=t.sent,n.id=o.id,n.rowNumber=a||y.rows.length+1,O((function(e){return{tournament:e.tournament,rows:[n].concat(Object(E.a)(e.rows)),players:e.players}})),q("Riga aggiunta"),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),H("Errore aggiunta riga");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}function V(){return Z.apply(this,arguments)}function Z(){return(Z=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=y.rows.length+1,a=0;case 2:if(!(a<G)){e.next=9;break}return e.next=5,B(t);case 5:t++;case 6:a++,e.next=2;break;case 9:J(0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return K.apply(this,arguments)}function K(){return(K=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({state:!0,message:k.length>1?"Cancellazione righe in corso":"Cancellazione riga in corso"}),t=[],k.forEach((function(e){e.player1.id&&t.push(e.player1),e.player2.id&&t.push(e.player2)})),t&&O((function(e){return{tournament:e.tournament,rows:e.rows,players:[].concat(t,Object(E.a)(e.players)).sort((function(e,t){return e.alias.localeCompare(t.alias)}))}})),e.next=7,fetch("/api/v1/pair",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});case 7:return a=e.sent,e.next=10,a.json();case 10:O((function(e){return{tournament:e.tournament,rows:e.rows.filter((function(e){return!k.find((function(t){return t.id===e.id}))})),players:e.players}})),q(k.length>1?"Righe cancellate":"Riga cancellata"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),H("Errore cancellazione riga");case 17:T([]);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function X(e,t){e&&e.id?t.id?O((function(a){return{tournament:a.tournament,rows:a.rows,players:[].concat(Object(E.a)(a.players.filter((function(e){return e.id!==t.id}))),[e]).sort((function(e,t){return e.alias.localeCompare(t.alias)}))}})):O((function(t){return{tournament:t.tournament,rows:t.rows,players:[].concat(Object(E.a)(t.players),[e]).sort((function(e,t){return e.alias.localeCompare(t.alias)}))}})):t.id&&O((function(e){return{tournament:e.tournament,rows:e.rows,players:e.players.filter((function(e){return e.id!==t.id}))}}))}Object(n.useEffect)((function(){Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=O,t.next=3,Te(e);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})))()}),[e]);var Y=function(e,t,a){var n=y.rows.map((function(n){if(n.id===t){var r=n;return 1===a?e.id&&r.player2&&r.player2.id===e.id?(r.player1=he(),H("Attenzione : Non puoi selezionare lo stesso giocare ! ")):(X(r.player1,e),r.player1=e):e.id&&r.player1&&r.player1.id===e.id?(r.player2=he(),H("Attenzione : Non puoi selezionare lo stesso giocare ! ")):(X(r.player2,e),r.player2=e),fetch("/api/v1/pair",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),r}return n}));O((function(e){return{tournament:e.tournament,rows:n,players:e.players}}))},Q=function(e,t){T((function(a){var n=!!a.find((function(t){return t.id===e.id}));return t?n?a:[e].concat(Object(E.a)(a)):n?a.filter((function(t){return t.id!==e.id})):a}))},ee=function(a){if(e||(H("Id torneo mancante. Verrai inviato alla Home tra 5 secondi...."),setTimeout((function(){return t.push("/")}),5e3)),y.rows.length<4)H("Numero di coppie insufficente. Devi formare almeno 4 coppie");else{var n=y.rows.filter((function(e){return!e.stage1Name||""===e.stage1Name})).map((function(e){return e.rowNumber}));if(0===n.length){var r=y.rows.filter((function(e){return null===e.player1.id||null===e.player2.id})).map((function(e){return e.rowNumber}));if(0===r.length){var o=[],l=y.rows.reduce((function(e,t){return t.stage1Name in e?e[t.stage1Name]++:e[t.stage1Name]=1,e}),{});for(var c in l)l[c]<=3&&o.push(c);o.length>0?H(1===o.length?"Il torneo ".concat(o," deve contenere almeno ").concat(4," coppie"):"I torneI ".concat(o," devono contenere almeno ").concat(4," coppie")):(y.tournament.progress=$,fetch("/api/tournament",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y.tournament)}),t.push("/stage1/".concat(e)))}else H("Assegna  i giocatori ".concat(1===r.length?"alla riga ":"alle righe "," ").concat(r," per procedere "))}else H("Assegna  ".concat(1===n.length?"la riga ":"le righe "," ").concat(n," ad un girone per procedere "))}};function te(){t.push("/")}var ae={mode:"checkbox",onSelect:Q,onSelectAll:function(e,t){return t.forEach((function(t){return Q(t,e)}))},style:{backgroundColor:"#c8e6c9"}};function ne(){return re.apply(this,arguments)}function re(){return(re=Object(u.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c({state:!0,message:"Cancellazione in corso"}),t.next=4,fetch("/api/stage1",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({tId:e})});case 4:return a=t.sent,t.next=7,a.json();case 7:y.tournament.progress=_,fetch("/api/tournament",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y.tournament)}),q("Cancellazione completata"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),H("Errore cancellazione Fase 1");case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function le(){return ie.apply(this,arguments)}function ie(){return(ie=Object(u.a)(i.a.mark((function e(){var t,a,n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=3;break}return H("Specificare il numero di gironi da assegnare"),e.abrupt("return");case 3:for(r in c({state:!0,message:"Aggiornamento in corso "}),t=0,a="abcdefghijklmnopqrstuvwxyz".toUpperCase().split(""),n=[],y.rows){o=y.rows[r],t==A&&(t=0),o.stage1Name=a[t],t++;try{fetch("/api/v1/pair",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),n.push(o)}catch(l){H("Errore"),n.push(o)}}q("Gironi assegnati correttamente"),O((function(e){return{tournament:e.tournament,rows:n,players:e.players}}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=Math.floor(y.players.length-1-y.rows.reduce((function(e,t){return t.player1||t.player2?t.player1&&t.player2?t.player1.id||t.player2.id?t.player1.id&&t.player2.id?e:e+1:e+2:e+1:e+2}),0))/2,ue=!(k.length>0)||"Stage1"===y.tournament.progress||"Stage2"===y.tournament.progress,me="";return me=k.length>0?"Stage1"===y.tournament.progress||"Stage2"===y.tournament.progress?"Devi prima resettare i gironi per poter cancellare delle coppie":"Cancella le coppie selezionate":"Seleziona almeno una riga",r.a.createElement(I.Consumer,null,(function(e){var t,a=Object(d.a)(e,1)[0];return r.a.createElement(w.a,null,r.a.createElement(D,{show:l.state,message:l.message}),r.a.createElement(j.a,{style:{margin:"10px"},md:{span:1}},r.a.createElement(w.a,null,r.a.createElement(oe.a,null,r.a.createElement(oe.a.Item,{action:!0,variant:"primary",onClick:ee},"Prosegui"),r.a.createElement(oe.a.Item,{action:!0,variant:"secondary",onClick:te},"Home"),r.a.createElement(oe.a.Item,{action:!0,variant:"success",onClick:function(){return B()},disabled:se<=0||!F(a)},"Aggiungi Coppia"),r.a.createElement(ve.a,{placement:"right",key:"right",overlay:r.a.createElement(ye.a,null,me)},r.a.createElement("span",{className:"d-inline-block",onClick:W},r.a.createElement(oe.a.Item,{action:!0,variant:"danger",style:{pointerEvents:"none"},disabled:ue||!F(a)},"Elimina Coppia ",ue))),r.a.createElement(oe.a.Item,{action:!0,variant:"danger",onClick:ne,disabled:!F(a)},"Reset gironi")))),r.a.createElement(j.a,{style:{margin:"10px"}},r.a.createElement(w.a,{style:{display:F(a)?"flex":"none"}},r.a.createElement(we.a,{onChange:function(e){return L(e.target.value)}},r.a.createElement(we.a.Prepend,null,r.a.createElement(we.a.Text,null,"Assegna gironi automaticamente")),r.a.createElement(je.a,{placeholder:y.rows.length<4?"Inserisci almeno 4 coppie":"Numero di gironi ( max ".concat(Math.floor(y.rows.length/4)," )"),"aria-label":"Numero di gironi",disabled:y.rows.length<4}),r.a.createElement(we.a.Append,null,r.a.createElement(g.a,{variant:"primary",onClick:le,disabled:!A||A>Math.floor(y.rows.length/4)||y.rows.length<4},"Esegui"))),r.a.createElement(we.a,{onChange:function(e){return J(e.target.value)}},r.a.createElement(we.a.Prepend,null,r.a.createElement(we.a.Text,null,"Aggiunti N nuove coppie")),r.a.createElement(je.a,{disabled:se<=0,placeholder:se<=0?"Numero massimo di coppie gia creato sulla base del numero di giocatori disponibili":"Numero di coppie da aggiungere ( max ".concat(se," )"),"aria-label":"Numero di coppie",value:G||""}),r.a.createElement(we.a.Append,null,r.a.createElement(g.a,{variant:"primary",onClick:function(e){return J(se)},disabled:G>se},"Max"),r.a.createElement(g.a,{variant:"primary",onClick:V,disabled:!G||G>se},"Esegui")))),r.a.createElement(w.a,null,r.a.createElement(ce.a,{bootstrap4:!0,keyField:"id",data:y.rows,columns:Se(Y,y.players),cellEdit:(t=F(a),de()({mode:t?"click":"none",blurToSave:!0,afterSaveCell:function(e,t,a,n){"player1.alias"!==n.dataField&&"player2.alias"!==n.dataField&&Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/pair",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return t=e.sent,e.next=5,t.json();case 5:case"end":return e.stop()}}),e)})))()}})),selectRow:ae,noDataIndication:r.a.createElement(Fe,{addRow:function(){return B()},optionsLength:y.players.length}),caption:r.a.createElement(Re,{tournament:y.tournament}),wrapperClasses:"player-table",headerClasses:"player-table-header",striped:!0,hover:!0}))),r.a.createElement(j.a,{style:{margin:"10px"},md:2},r.a.createElement(M,{message:f.message,type:f.type})))}))}),Pe=function(e){var t=e.title,a=e.saved,n={color:a?"#4feb34":void 0};return r.a.createElement("h3",null,r.a.createElement("b",{style:n},"Girone - ",r.a.createElement("strong",null,t)),a?r.a.createElement("small",null," - Salvataggio in corso..."):null)},ze=r.a.forwardRef((function(e,t){var a=Object(n.useState)([]),o=Object(d.a)(a,2),l=o[0],c=o[1],i=Object(n.useState)(),s=Object(d.a)(i,2),u=s[0],m=s[1],p=e.row,f=e.columnIndex,b=e.id,h=e.onUpdate,g=e.onSelect,E=e.tId;return Object(n.useEffect)((function(){return Ne(c,E)}),[E]),r.a.createElement(y.a,{options:l,onChange:function(e){e.pairId=b,m(e);var t=Ie(e);h(t),g(e,p.id,f)},value:u,placeholder:"Cerca...",isSearchable:!0,isClearable:!0})})),Ge=function(e,t){return{id:"col".concat(e),dataField:"col".concat(e),text:e.toString(),type:"number",headerStyle:function(e,a){return{width:"".concat(75/t,"%")}},headerAlign:function(e,t){return"center"},editable:function(e,t,a,n){return a!==n-2},align:function(e,t,a,n){return"center"},style:function(e,t,a,n){return a===n-2?{backgroundColor:"#6d706e"}:3===parseInt(e,10)||2===parseInt(e,10)?{backgroundColor:"rgb(196, 247, 160)"}:1===parseInt(e,10)||0===parseInt(e,10)?{backgroundColor:"rgb(255, 147, 147)"}:null},editor:{type:ue.Type.SELECT,options:[{value:"3",label:"3"},{value:"2",label:"2"},{value:"1",label:"1"},{value:"0",label:"0"},{value:null,label:""}]}}};var De=function(e,t){for(var a=[{id:"pairLabel",dataField:"pair.label",text:"Nome Coppia",editable:!1,headerStyle:function(e,t){return{width:"15%"}},align:function(e,t,a,n){return"center"},headerAlign:function(e,t){return"center"},editorRenderer:function(a,n,o,l,c,i){return r.a.createElement(ze,Object.assign({},a,{id:i,row:o,rowIndex:c,columnIndex:i,value:n,onSelect:e,tId:t[0].tId}))}},{id:"rowNumber",dataField:"rowNumber",text:"ID",editable:!1,type:"number",headerStyle:function(e,t){return{width:"5%"}},headerAlign:function(e,t){return"center"},style:function(e,t,a,n){return{backgroundColor:"#f9ffdb"}}}],n=0;n<t.length;n++)a.push(Ge(n+1,t.length));return a.push({id:"totale",dataField:"total",text:"Totale",editable:!1,type:"number",headerStyle:function(e,t){return{width:"5%"}},headerAlign:function(e,t){return"center"}},{id:"place",dataField:"place",text:"Posizione",editable:!0,type:"number",headerStyle:function(e,t){return{width:"5%"}},headerAlign:function(e,t){return"center"}}),a};function Me(e,t){return e.total===t.total?3===e["col".concat(t.rowNumber)]||2===e["col".concat(t.rowNumber)]?-1:1:t.total-e.total}a(300);var Je=function(e){var t=e.rows,a=e.columns,o=e.tableName,l=e.updateCellValue,c=e.saved,i=Object(n.useState)([]),s=Object(d.a)(i,2),u=s[0],m=s[1],p=function(e,t){return m((function(){var a=!!u.find((function(t){return t.rowNumber===e.rowNumber}));return t?a?u:[e].concat(Object(E.a)(u)):a?u.filter((function(t){return t.rowNumber!==e.rowNumber})):u})),!0},f={mode:"checkbox",onSelect:p,onSelectAll:function(e,t){return t.forEach((function(t){return p(t,e)}))},style:{backgroundColor:"#c8e6c9"}};return r.a.createElement(I.Consumer,null,(function(e){var n,i=Object(d.a)(e,1)[0];return r.a.createElement(ce.a,{bootstrap4:!0,keyField:"id",data:t,columns:a,selectRow:f,cellEdit:(n=F(i),de()({mode:n?"click":"none",blurToSave:!0,beforeSaveCell:function(e,a,n,r){r.id.startsWith("col")&&(t[parseInt(r.text)-1]["col".concat(n.rowNumber)]=function(e){if(null===e)return null;switch(e){case 3:return 0;case 2:return 1;case 1:return 2;case 0:return 3;default:return null}}(a),Object(E.a)(t).sort((function(e,t){return Me(e,t)})).forEach((function(e,a){return t[e.rowNumber-1].place=a+1})))},afterSaveCell:function(e,a,n,r){if(r.id.startsWith("col")){l(e,a,n,r);var o=0;for(var c in n)c.startsWith("col")&&(o+=n[c]);for(var i in t[n.rowNumber-1].total=o||null,o=0,t[parseInt(r.text)-1])i.startsWith("col")&&(o+=t[parseInt(r.text)-1][i]);t[parseInt(r.text)-1].total=o||null}}})),noDataIndication:"Nessun dato reperito",wrapperClasses:"player-table",headerClasses:"player-table-header",caption:r.a.createElement(Pe,{title:o,saved:c}),striped:!0,hover:!0})}))},He=function(e){var t,a,o=e.pairsList,l=Object(n.useState)(!1),c=Object(d.a)(l,2),s=c[0],m=c[1],p=Object(n.useState)(!1),f=Object(d.a)(p,2),b=f[0],h=f[1],g=Object(n.useState)(function(e){for(var t=[],a=0;a<e.length;a++){t.push({pair:e[a],rowNumber:a+1});for(var n=1;n<=e.length;n++)t[a]["col".concat(n)]=null;t[a].total=0,t[a].place=0,t[a].id="row-".concat(e[0].tId,"-").concat(a)}return t}(o)),v=Object(d.a)(g,2),y=v[0],w=v[1],j=null!==(t=null===(a=o[0])||void 0===a?void 0:a.stage1Name)&&void 0!==t?t:"Not found",O=function(){var e=Object(u.a)(i.a.mark((function e(t,a,n,r){var o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={tId:n.pair.tId,tableName:j,score:a,pair1Id:n.pair.id,pair2Id:y[parseInt(r.text)-1].pair.id},e.next=3,fetch("/api/v1/stage1/cell",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 3:return l=e.sent,e.next=6,l.json();case 6:l.ok&&(h(!0),setTimeout((function(){return h(!1)}),3e3));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,fetch("/api/v1/stage1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rows:y,stageName:j})});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,Object(E.a)(a).sort((function(e,t){return Me(e,t)})).forEach((function(e,t){return a[e.rowNumber-1].place=t+1})),w(a),m(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return r.a.createElement(r.a.Fragment,null,s?r.a.createElement("h3",null,"Caricamento girone ",r.a.createElement("b",null,j)," in corso...."):r.a.createElement(Je,{rows:y,columns:De((function(){"1"===j&&console.log("onSelect ")}),o),tableName:j,updateCellValue:O,saved:b}))},qe=function(){var e=Object(C.i)().tId,t=Object(n.useState)([]),a=Object(d.a)(t,2),o=a[0],l=a[1],c=Object(C.g)();return Object(n.useEffect)((function(){return Ne(l,e)}),[e]),o.sort((function(e,t){return e.stage1Name.localeCompare(t.stage1Name)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a.Item,{className:"inherit-background",key:"stage-button"},r.a.createElement(g.a,{variant:"secondary",onClick:function(){c.push("/tournament/".concat(e))}},"Gestione Coppie")),function(e,t){var a="",n=[],o=[];e.forEach((function(e,t){""===a&&(a=e.stage1Name),a!==e.stage1Name&&(o.push(r.a.createElement(oe.a.Item,{className:"inherit-background",key:"stage-".concat(a)},r.a.createElement(He,{pairsList:n}))),a=e.stage1Name,n=[]),n.push(e)})),n.length>0&&o.push(r.a.createElement(oe.a.Item,{className:"inherit-background",key:"stage-".concat(a)},r.a.createElement(He,{pairsList:n})));return r.a.createElement(oe.a,{variant:"flush"},o)}(o))};var Be=function(e){for(var t={flexDirection:"column",alignItems:"stretch"},a={display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"space-around"},n=[],o=0;o<=4;o++){for(var l=[],c=0;c<Math.pow(2,o);c++)l.push(r.a.createElement(oe.a.Item,{key:"item-".concat(o,"-").concat(c),style:t},r.a.createElement(we.a,null,r.a.createElement(je.a,{placeholder:"".concat(o,"-").concat(c)}))));n.push(r.a.createElement(oe.a.Item,{key:"col-".concat(o),style:a},r.a.createElement(oe.a,{variant:"flush"},l)))}return r.a.createElement(oe.a,{variant:"flush",id:"outer-container",style:{flexDirection:"row-reverse"}},n)};var Ue=a(319),Ve=function(e){var t=Object(n.useState)(e),a=Object(d.a)(t,2),r=a[0],o=a[1];return{value:r,setValue:o,reset:function(){return o("")},bind:{value:r,onChange:function(e){o(e.target.value)}}}},Ze=(a(301),[{value:"No",label:"Non sono un giocatore"},{value:"Portiere",label:"Portiere"},{value:"Attaccante",label:"Attaccante"},{value:"Master",label:"Master"}]),We=function(e){var t=e.setErrorMessage,a=R(),n=Object(d.a)(a,2),o=n[0],l=n[1],c=Object(C.g)(),m=Ve(""),p=m.value,f=m.bind,b=m.reset,h=Ve(""),E=h.value,v=h.bind,w=h.reset,O=Ve(""),S=O.value,N=O.bind,I=O.reset,A=Ve(""),F=A.value,L=A.bind,P=A.reset,z=Ve(""),G=z.value,D=z.bind,M=z.reset,J=Ve(""),H=J.value,q=J.bind,B=J.reset,U=Ve(""),V=U.value,Z=U.bind,W=U.reset,_=Ve(""),$=_.value,K=_.bind,Y=_.reset,Q=Ve(""),ee=Q.value,te=Q.setValue,ae=Q.reset,ne=Ve({value:"No",label:"Non sono un giocatore"}),re=ne.value,oe=ne.setValue,le=ne.reset,ce=function(e){t(e),setTimeout((function(){return t("")}),3e3)},ie=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),p?E?S?F?T.test(F)?G?T.test(G)?F!==G?(ce("Le email non corrispondono"),0):H?k.test(H)?V?k.test(V)?H===V||(ce("Le password non corrispondono"),0):(ce("La password non rispetta i criteri"),0):(ce("Inserire la conferma password"),0):(ce("La password non rispetta i criteri"),0):(ce("Inserire una password"),0):(ce("Inserire una email valida"),0):(ce("Inserire la conferma email"),0):(ce("Inserire una email valida"),0):(ce("Inserire una email"),0):(ce("Inserire il cognome"),0):(ce("Inserire il nome"),0):(ce("Scegli uno username"),0)){e.next=3;break}return e.abrupt("return");case 3:return a={username:p,name:E,surname:S,email:F,cEmail:G,password:H,cPassword:V,phone:$,birthday:ee,playerRole:re},e.prev=4,e.next=7,fetch("/api/v1/auth/register",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 7:return n=e.sent,e.next=10,n.json();case 10:if(r=e.sent,!n.ok||!r){e.next=16;break}l(Object(s.a)({},o,{name:r.name,surname:r.surname,email:r.email,role:r.role,isAuthenticated:!0})),c.push("/"),e.next=24;break;case 16:e.t0=n.status,e.next=401===e.t0?19:403===e.t0?21:23;break;case 19:return ce("Utente o Password errata"),e.abrupt("break",24);case 21:return ce("Utente o Password gia registrati"),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(4),console.error("onSubmitLogin : ",e.t1),ce("Errore durante il processo di registrazione. Riprovare piu tardi");case 30:case"end":return e.stop()}}),e,null,[[4,26]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(x.a,{onSubmit:ie},r.a.createElement(x.a.Row,null,r.a.createElement(j.a,null,r.a.createElement(x.a.Group,{controlId:"username"},r.a.createElement(x.a.Label,null,"Username"),r.a.createElement(x.a.Control,Object.assign({required:!0,type:"text",placeholder:"username"},f)))),r.a.createElement(j.a,null,r.a.createElement(x.a.Group,{controlId:"name"},r.a.createElement(x.a.Label,null,"Nome"),r.a.createElement(x.a.Control,Object.assign({required:!0,type:"text",placeholder:"Nome"},v)))),r.a.createElement(j.a,null,r.a.createElement(x.a.Group,{controlId:"surname"},r.a.createElement(x.a.Label,null,"Cognome"),r.a.createElement(x.a.Control,Object.assign({required:!0,type:"text",placeholder:"Cognome"},N))))),r.a.createElement(x.a.Row,null,r.a.createElement(j.a,null,r.a.createElement(x.a.Group,{controlId:"email"},r.a.createElement(x.a.Label,null,"Email"),r.a.createElement(x.a.Control,Object.assign({required:!0,type:"email",placeholder:"Email"},L)))),r.a.createElement(j.a,null,r.a.createElement(x.a.Group,{controlId:"cemail"},r.a.createElement(x.a.Label,null,"Conferma Email"),r.a.createElement(x.a.Control,Object.assign({required:!0,type:"email",placeholder:"Conferma Email"},D))))),r.a.createElement(x.a.Row,null,r.a.createElement(j.a,null,r.a.createElement(x.a.Group,{controlId:"password"},r.a.createElement(x.a.Label,null,"Password"),r.a.createElement(x.a.Control,Object.assign({required:!0,type:"password",placeholder:"Password"},q))),r.a.createElement(x.a.Group,{controlId:"cpassword"},r.a.createElement(x.a.Label,null,"Conferma Password"),r.a.createElement(x.a.Control,Object.assign({required:!0,type:"password",placeholder:"Conferma Password"},Z)))),r.a.createElement(j.a,{md:6,style:{display:"flex",alignItems:"center"}},r.a.createElement("ul",null,r.a.createElement("strong",null,"La password deve rispettare i sequenti criteri :"),r.a.createElement("li",{key:"pass-1"},"Almeno 1 carattere minuscolo"),r.a.createElement("li",{key:"pass-2"},"Almeno 1 carattere maiuscolo"),r.a.createElement("li",{key:"pass-3"},"Almeno 1 carattere numerico"),r.a.createElement("li",{key:"pass-5"},"Tra 8 e 16 caratteri")))),r.a.createElement(x.a.Row,null,r.a.createElement(j.a,{md:3},r.a.createElement(x.a.Group,{controlId:"phone"},r.a.createElement(x.a.Label,null,"Telefono"),r.a.createElement(x.a.Control,Object.assign({type:"text",placeholder:"Telefono"},K)))),r.a.createElement(j.a,{md:3},r.a.createElement(x.a.Group,{controlId:"birthday"},r.a.createElement(x.a.Label,null,"Data di nascita"),r.a.createElement(X.a,{className:"datepicker",dateFormat:"dd/MM/yyyy",required:!0,selected:ee,onChange:function(e){return te(e)}}))),r.a.createElement(j.a,{md:6},r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Label,null,"Ruolo"),r.a.createElement(y.a,{dateFormat:"dd/MM/yyyy",value:re,onChange:function(e){return oe(e)},options:Ze,styles:_e}),r.a.createElement(x.a.Text,{className:"text-muted color-green"},"Sei un giocatore? Assegna qui il tuo ruolo.")))),r.a.createElement(g.a,{variant:"outline-success",type:"submit",size:"lg"},"Registrati"),r.a.createElement(g.a,{variant:"outline-danger",className:"float-right",onClick:function(){b(),w(),I(),P(),M(),B(),W(),Y(),ae(),le()},type:"submit",size:"lg"},"Reset"))},_e={control:function(e){return Object(s.a)({},e,{height:"38px"})},input:function(e){return Object(s.a)({},e,{height:"38px"})},option:function(e,t){t.data,t.isDisabled,t.isFocused,t.isSelected;return Object(s.a)({},e,{color:"black"})},placeholder:function(e){return Object(s.a)({},e,{height:"38px"})},singleValue:function(e,t){t.data;return Object(s.a)({},e,{height:"38px"})},clearIndicator:function(e){return Object(s.a)({},e,{height:"38px"})},indicatorSeparator:function(e){return Object(s.a)({},e)}},$e=function(e){var t=e.setErrorMessage,a=Object(C.g)(),n=R(),o=Object(d.a)(n,2),l=o[0],c=o[1],m=Ve(""),p=m.value,f=m.bind,b=Ve(""),h=b.value,E=b.bind,v=function(e){t(e),setTimeout((function(){return t("")}),3e3)},y=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),p&&""!==p){e.next=4;break}return v("Inserire username o password"),e.abrupt("return");case 4:if(h&&""!==h){e.next=7;break}return v("Inserire la password"),e.abrupt("return");case 7:return e.prev=7,e.next=10,fetch("/api/v1/auth/authenticate",{method:"POST",body:JSON.stringify({username:p,password:h}),headers:{"Content-Type":"application/json"}});case 10:return n=e.sent,e.next=13,n.json();case 13:r=e.sent,n.ok&&r?(c(Object(s.a)({},l,{name:r.name,surname:r.surname,email:r.email,role:r.role,isAuthenticated:!0})),a.push("/")):401===n.status&&v("Utente o Password errata"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(7),console.log("onSubmitLogin : ",e.t0),v("Errore durante il processo di registrazione. Riprovare piu tardi");case 21:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(x.a,{onSubmit:y},r.a.createElement(x.a.Group,{controlId:"username"},r.a.createElement(x.a.Label,null,"Username o Email"),r.a.createElement(x.a.Control,Object.assign({required:!0,type:"text",placeholder:"username o email"},f))),r.a.createElement(x.a.Group,{controlId:"password"},r.a.createElement(x.a.Label,null,"Password"),r.a.createElement(x.a.Control,Object.assign({required:!0,type:"password",placeholder:"Password"},E))),r.a.createElement(g.a,{size:"lg",variant:"outline-success",type:"submit"},"Login"))},Ke=a(159),Xe=a(65),Ye=[{path:"/login",label:"Login",exact:!0,ComponentToRender:function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(""),c=Object(d.a)(l,2),i=c[0],s=c[1],u=Object(Xe.a)({prefix:"far",iconName:"arrow-alt-circle-right"}),m=a?"Registrati":"Login",p=a?r.a.createElement(We,{setErrorMessage:s}):r.a.createElement($e,{setErrorMessage:s}),f=a?"Login":"Registrati",b=r.a.createElement(Ke.a,{icon:u}),h={textAlign:"left",width:a?"50vw":"40vw",height:"auto",margin:"auto",backgroundColor:"#343A40",color:"white"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{style:h},r.a.createElement(O.a.Header,{as:"h2"},m),r.a.createElement(O.a.Body,null,r.a.createElement(Ue.a,null,i?r.a.createElement(G.a,{key:"auth-alert",variant:"danger"},i):null,p)),r.a.createElement(O.a.Footer,null,r.a.createElement(g.a,{variant:"outline-warning",onClick:function(){return o(!a)}},r.a.createElement("div",null,b," ",r.a.createElement("strong",null,f))))))},visible:!1,private:!1,index:0},{path:"/",label:"Home",exact:!0,ComponentToRender:Q,visible:!1,private:!0,index:10},{path:"/tournament/:tId",label:"Selezione Coppie",exact:!0,ComponentToRender:Le,visible:!1,private:!0,index:20},{path:"/stage1/:tId",label:"Torneo fase 1",exact:!0,ComponentToRender:qe,visible:!1,private:!0,index:30},{path:"/player",label:"Gestione Giocatori",exact:!0,ComponentToRender:Ee,visible:!0,private:!0,index:40},{path:"/stage2/:tId",label:"Torneo fase 2",exact:!0,ComponentToRender:Be,visible:!1,private:!0,index:50},{path:"*",label:"Not Found",exact:!1,ComponentToRender:function(e){var t=Object(C.h)();return r.a.createElement("div",null,r.a.createElement("h1",null,"Current Ruote : ",r.a.createElement("code",null,t.pathname)))},visible:!1,private:!0,index:1e3}],Qe=Ye;var et=function(e){var t=e.show,a=e.onHide,o=R(),l=Object(d.a)(o,2),c=l[0],m=l[1],p=Object(n.useState)(""),f=Object(d.a)(p,2),b=f[0],h=f[1],E=Ve(""),v=E.value,y=E.bind,O=Object(C.g)(),S=c.email,k=c.username,T=function(e){h(e),setTimeout((function(){return h("")}),3e3)},N=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/auth/",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:S,username:k,password:v})});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,console.log("onSubmitLogin : ",n,r),n.ok&&r?(m(Object(s.a)({},c,{name:"",surname:"",email:"",role:"",isAuthenticated:!1})),a(),O.push("/")):401===n.status?T("Utente o Password errata"):T("Errore durante il processo di registrazione. Riprovare piu tardi"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("onSubmitLogin : ",e.t0),T("Errore durante il processo di registrazione. Riprovare piu tardi");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),I=b?r.a.createElement(G.a,{key:"auth-alert",variant:"danger"},b," "):null,A=S&&k?r.a.createElement(x.a,{onSubmit:N},r.a.createElement(x.a.Group,{as:w.a,controlId:"email"},r.a.createElement(x.a.Label,{column:!0,sm:"2"},"Email"),r.a.createElement(j.a,{sm:"10"},r.a.createElement(x.a.Control,{plaintext:!0,readOnly:!0,defaultValue:S}))),r.a.createElement(x.a.Group,{as:w.a,controlId:"username"},r.a.createElement(x.a.Label,{column:!0,sm:"2"},"Username"),r.a.createElement(j.a,{sm:"10"},r.a.createElement(x.a.Control,{plaintext:!0,readOnly:!0,defaultValue:k}))),r.a.createElement(x.a.Group,{as:w.a,controlId:"password"},r.a.createElement(x.a.Label,{column:!0,sm:"2"},"Password"),r.a.createElement(j.a,{sm:"10"},r.a.createElement(x.a.Control,Object.assign({type:"password",placeholder:"Password"},y)))),r.a.createElement(g.a,{size:"lg",variant:"outline-danger",type:"submit"},"Conferma")):r.a.createElement("p",null,r.a.createElement("strong",null,"Eliminazione non possibile")," ");return r.a.createElement(L.a,{show:t,onHide:a,size:"lg",centered:!0},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,"Elimina Utente")),r.a.createElement(L.a.Body,null,r.a.createElement(Ue.a,{fluid:!0},I,A)))},tt=function(e){var t=R(),a=Object(d.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(!1),m=Object(d.a)(c,2),E=m[0],v=m[1],y=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/auth/logout");case 2:e.sent.ok&&l(Object(s.a)({},o,{name:"",surname:"",email:"",role:"",isAuthenticated:!1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w={backgroundImage:"url(".concat(p.a,")"),backgroundSize:"cover",padding:"60px 0px 10px 0px",minHeight:"28vh"},j={color:"##ffc107",fontSize:"4vh",padding:"0vw 2vw"};return r.a.createElement("header",null,r.a.createElement(f.a,{style:w},r.a.createElement("h1",{style:{margin:"5vh"}},r.a.createElement("strong",{style:{color:"white"}},"Calcetto C.S.M")),o.isAuthenticated?r.a.createElement(b.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(b.a.Brand,{as:Ae.b,to:"/"},"Home"),r.a.createElement(b.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(b.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(h.a,{className:"mr-auto"},Qe.map((function(e){return e.visible?e.private&&!o.isAuthenticated?null:r.a.createElement(h.a.Link,{as:Ae.b,key:e.index,to:e.path},e.label):null}))),o.name?r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Text,{style:j},r.a.createElement("strong",{style:{color:"#64bd9c"}},o.name)),r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{variant:"outline-warning",onClick:y},"Log out"),r.a.createElement(g.a,{variant:"outline-danger",onClick:function(){return v(!0)}},"Elimina Utente"))):null)):null),r.a.createElement(et,{show:E,onHide:function(){return v(!1)}}))},at=function(e){return n.createElement(I.Consumer,null,(function(t){var a=Object(d.a)(t,1)[0];return n.createElement(C.b,Object.assign({},e,{render:function(t){var r=t.location;return a.isAuthenticated&&"/login"===r.pathname?(console.log("ProtectedRoute => redirect to Home"),n.createElement(C.a,Object.assign({},e,{to:{pathname:"/",state:{from:r}}}))):e.private?a.isAuthenticated?(console.log("ProtectedRoute => render component : ",function(e){var t=Ye.find((function(t){return t.path===e}));return t?t.label:"route ".concat(e," not found!")}(r.pathname)),n.createElement(e.ComponentToRender,e)):(console.log("ProtectedRoute => redirect to Login : ",Object(s.a)({},a)),n.createElement(C.a,Object.assign({},e,{to:{pathname:"/login",state:{from:r}}}))):(console.log("ProtectedRoute => public route : ",Object(s.a)({},e)),n.createElement(e.ComponentToRender,e))}}))}))},nt=(a(305),a(160)),rt=a(161);Xe.c.add(nt.a,rt.a);var ot=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(tt,null),r.a.createElement(Ue.a,{fluid:!0},r.a.createElement(C.d,null,Qe.map((function(e){return r.a.createElement(at,Object.assign({},e,{key:e.index}))})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var lt=a(162);Object(K.setDefaultLocale)("it"),Object(K.registerLocale)("it",lt.a),l.a.render(r.a.createElement(Ae.a,null,r.a.createElement(A,null,r.a.createElement(ot,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[166,1,2]]]);
//# sourceMappingURL=main.b914e5d8.chunk.js.map