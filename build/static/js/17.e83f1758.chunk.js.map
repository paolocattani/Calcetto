{"version":3,"sources":["components/core/icons.tsx","components/core/hooks/InputHook.ts","components/Auth/Edit.tsx"],"names":["Icon","size","prefix","iconName","color","icon","findIconDefinition","TrashIcon","SaveIcon","RightArrowIcon","ToggleOn","ToggleOff","DoubleRightIcon","BanIcon","useInput","initialValue","useState","value","setValue","reset","bind","onChange","event","currentTarget","Delete","lazy","EditUser","dispatch","useDispatch","history","useHistory","session","useSelector","SessionSelector","getSession","showModalDelete","setShowModalDelete","user","name","bindName","surname","bindSurname","phone","bindPhone","birthday","setBirthday","errorMessage","setErrorMessage","successMessage","setSuccessMessage","showError","message","setTimeout","onSubmit","a","preventDefault","model","fetch","method","headers","body","JSON","stringify","response","json","ok","SessionAction","updateSession","push","md","span","offset","sm","style","textAlign","width","height","margin","className","Header","as","Body","key","variant","Group","Row","controlId","Label","column","Control","plaintext","username","readOnly","fontSize","fontWeight","email","role","required","type","placeholder","selected","Date","locale","dateFormat","newValue","Footer","onClick","show","onHide"],"mappings":"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","file":"static/js/17.e83f1758.chunk.js","sourcesContent":["import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { findIconDefinition, SizeProp, IconPrefix, IconName } from '@fortawesome/fontawesome-svg-core';\r\n\r\ninterface IconProps {\r\n  color?: string;\r\n  size?: SizeProp;\r\n}\r\n\r\ninterface AbstractIconProps extends IconProps {\r\n  prefix: IconPrefix;\r\n  iconName: IconName;\r\n}\r\n\r\nconst Icon: React.FC<AbstractIconProps> = ({ size, prefix, iconName, color }) => (\r\n  <FontAwesomeIcon color={color} size={size} icon={findIconDefinition({ prefix, iconName })} />\r\n);\r\n\r\n// Regular\r\nexport const TrashIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"far\" iconName=\"trash-alt\" />\r\n);\r\nexport const SaveIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"far\" iconName=\"save\" />\r\n);\r\nexport const RightArrowIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} prefix=\"fas\" iconName=\"arrow-alt-circle-right\" />\r\n);\r\n\r\n// Solid\r\nexport const ToggleOn: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"toggle-on\" />\r\n);\r\nexport const ToggleOff: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"toggle-off\" />\r\n);\r\nexport const PlusIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"plus\" />\r\n);\r\nexport const TrophyIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"trophy\" />\r\n);\r\nexport const DoubleRightIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"angle-double-right\" />\r\n);\r\nexport const BanIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"ban\" />\r\n);\r\n","import { useState } from 'react';\r\n\r\n// FIXME:\r\n// https://rangle.io/blog/simplifying-controlled-inputs-with-hooks/\r\nexport const useInput = (initialValue: any) => {\r\n  const [value, setValue] = useState(initialValue);\r\n\r\n  return {\r\n    value,\r\n    setValue,\r\n    reset: () => setValue(''),\r\n    bind: {\r\n      value,\r\n      onChange: (event: React.FormEvent<HTMLSelectElement>) => {\r\n        setValue(event.currentTarget.value);\r\n      }\r\n    }\r\n  };\r\n};\r\n","import React, { FormEvent, SetStateAction, useState, CSSProperties, lazy } from 'react';\r\nimport { Card, Container, Alert, Form, Button, Col, Row } from 'react-bootstrap';\r\nimport { useInput } from '../core/hooks/InputHook';\r\nimport DatePicker from 'react-datepicker';\r\nimport { TrashIcon, SaveIcon } from '../core/icons';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { SessionSelector } from 'selectors/session.selector';\r\nimport { SessionAction } from 'actions';\r\nimport { useHistory } from 'react-router-dom';\r\nconst Delete = lazy(() => import('./Delete'));\r\n\r\nconst EditUser: React.FC<{}> = (): JSX.Element => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const session = useSelector(SessionSelector.getSession);\r\n  const [showModalDelete, setShowModalDelete] = useState(false);\r\n\r\n  const { value: name, bind: bindName /*reset: resetUsername*/ } = useInput(session.user!.name);\r\n  const { value: surname, bind: bindSurname /*reset: resetUsername*/ } = useInput(session.user!.surname);\r\n  const { value: phone, bind: bindPhone /*reset: resetUsername*/ } = useInput(session.user!.phone);\r\n  const { value: birthday, setValue: setBirthday /* bind: bindBirthday ,reset: resetUsername*/ } = useInput(\r\n    session.user!.birthday\r\n  );\r\n\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n\r\n  const showError = (message: SetStateAction<string>) => {\r\n    setErrorMessage(message);\r\n    setTimeout(() => setErrorMessage(''), 3000);\r\n  };\r\n  const showSuccess = (message: SetStateAction<string>) => {\r\n    setSuccessMessage(message);\r\n    setTimeout(() => setSuccessMessage(''), 3000);\r\n  };\r\n\r\n  const onSubmit = async (event: FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    try {\r\n      const { user } = session;\r\n      const model = {\r\n        ...user!,\r\n        name,\r\n        surname,\r\n        phone,\r\n        birthday,\r\n      };\r\n      const response = await fetch('/api/v1/auth/update', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(model),\r\n      });\r\n      await response.json();\r\n      if (response.ok) {\r\n        dispatch(SessionAction.updateSession(model));\r\n        showSuccess('Aggiornamento effettuato ... ');\r\n        setTimeout(() => history.push('/'), 3000);\r\n      } else showError('Errore durante aggiornamento dati');\r\n    } catch (error) {\r\n      showError('Errore durante aggiornamento dati');\r\n    }\r\n  };\r\n\r\n  const modalStyle: CSSProperties = {\r\n    textAlign: 'left',\r\n    width: '100%',\r\n    height: 'auto',\r\n    margin: 'auto',\r\n    color: 'white',\r\n  };\r\n\r\n  return (\r\n    <Col md={{ span: '6', offset: '3' }} sm=\"12\">\r\n      <Card style={modalStyle} className=\"default-background\">\r\n        <Form onSubmit={onSubmit}>\r\n          <Card.Header as=\"h2\">Gestione dati utente</Card.Header>\r\n          <Card.Body>\r\n            <Container>\r\n              {errorMessage ? (\r\n                <Alert key={'auth-alert-error'} variant={'danger'}>\r\n                  {errorMessage}\r\n                </Alert>\r\n              ) : null}\r\n              {successMessage ? (\r\n                <Alert key={'auth-alert-success'} variant={'success'}>\r\n                  {successMessage}\r\n                </Alert>\r\n              ) : null}\r\n              <Form.Group as={Row} controlId=\"username\">\r\n                <Form.Label column>Username</Form.Label>\r\n                <Col sm=\"9\">\r\n                  <Form.Control\r\n                    plaintext\r\n                    value={session.user!.username!}\r\n                    readOnly\r\n                    style={{ fontSize: 'larger', fontWeight: 'bolder' }}\r\n                    className=\"default-color-white \"\r\n                  />\r\n                </Col>\r\n              </Form.Group>\r\n              <Form.Group as={Row} controlId=\"email\">\r\n                <Form.Label column>Email</Form.Label>\r\n                <Col sm=\"9\">\r\n                  <Form.Control\r\n                    plaintext\r\n                    value={session.user!.email!}\r\n                    readOnly\r\n                    style={{ fontSize: 'larger', fontWeight: 'bolder' }}\r\n                    className=\"default-color-white\"\r\n                  />\r\n                </Col>\r\n              </Form.Group>\r\n              <Form.Group as={Row} controlId=\"role\">\r\n                <Form.Label column>Ruolo</Form.Label>\r\n                <Col sm=\"9\">\r\n                  <Form.Control\r\n                    plaintext\r\n                    value={session.user!.role}\r\n                    readOnly\r\n                    style={{ fontSize: 'larger', fontWeight: 'bolder' }}\r\n                    className=\"default-color-white\"\r\n                  />\r\n                </Col>\r\n              </Form.Group>\r\n              <Form.Row>\r\n                <Col>\r\n                  <Form.Group controlId=\"name\">\r\n                    <Form.Label>Nome</Form.Label>\r\n                    <Form.Control required type=\"text\" placeholder=\"Nome\" {...bindName} />\r\n                  </Form.Group>\r\n                </Col>\r\n                <Col>\r\n                  <Form.Group controlId=\"surname\">\r\n                    <Form.Label>Cognome</Form.Label>\r\n                    <Form.Control required type=\"text\" placeholder=\"Cognome\" {...bindSurname} />\r\n                  </Form.Group>\r\n                </Col>\r\n              </Form.Row>\r\n              <Form.Row>\r\n                <Col>\r\n                  <Form.Group controlId=\"phone\">\r\n                    <Form.Label>Telefono</Form.Label>\r\n                    <Form.Control required type=\"text\" placeholder=\"Telefono\" {...bindPhone} />\r\n                  </Form.Group>\r\n                </Col>\r\n                <Col>\r\n                  <Form.Group controlId=\"birthday\">\r\n                    <Form.Label>Data di Nascita</Form.Label>\r\n                    <Form.Control\r\n                      as={() => (\r\n                        <DatePicker\r\n                          selected={new Date(birthday)}\r\n                          locale=\"it\"\r\n                          dateFormat=\"dd/MM/yyyy\"\r\n                          onChange={(newValue) => setBirthday(newValue ? newValue : new Date())}\r\n                        />\r\n                      )}\r\n                    ></Form.Control>\r\n                  </Form.Group>\r\n                </Col>\r\n              </Form.Row>\r\n            </Container>\r\n          </Card.Body>\r\n          <Card.Footer style={{ height: '10vh' }}>\r\n            <Button variant=\"outline-success\" type=\"submit\" className=\"float-right\">\r\n              <SaveIcon /> Salva\r\n            </Button>\r\n            <Button variant=\"outline-danger\" className=\"float-left\" onClick={() => setShowModalDelete(true)}>\r\n              <TrashIcon /> Elimina Utente\r\n            </Button>\r\n          </Card.Footer>\r\n        </Form>\r\n        <Delete show={showModalDelete} onHide={() => setShowModalDelete(false)} />\r\n      </Card>\r\n    </Col>\r\n  );\r\n};\r\n\r\nexport default EditUser;\r\n"],"sourceRoot":""}