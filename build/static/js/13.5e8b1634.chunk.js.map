{"version":3,"sources":["../node_modules/react-bootstrap/esm/ToggleButton.js","components/Stage1/header.tsx","components/Stage1/editor.js","components/Stage1/table.jsx","components/Stage1/wrapper.tsx","common.module.css","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","components/Tournament/badge.tsx"],"names":["noop","ToggleButton","React","forwardRef","_ref","ref","children","name","className","checked","type","onChange","value","disabled","inputRef","props","_objectWithoutPropertiesLoose","_useState","useState","focused","setFocused","handleFocus","useCallback","e","target","tagName","handleBlur","createElement","Button","_extends","classNames","undefined","active","as","autoComplete","onFocus","onBlur","displayName","tableHeader","title","saved","divStyle","color","style","headerAlign","align","newColumn","index","rowNumber","id","dataField","text","toString","headerStyle","column","colIndex","width","editable","content","row","rowIndex","columnIndex","backgroundColor","parseInt","editor","Type","SELECT","options","label","columns","pairsList","baseColumns","ii","length","push","Stage1Table","autoOrder","dispatch","useDispatch","isAdmin","useSelector","AuthSelector","tournament","TournamentSelector","getTournament","selectedRows","setSelectedRows","isLoading","setIsLoading","setIsSaved","rowsGenerator","rows","setRows","stageName","stage1Name","useEffect","a","fetch","method","headers","body","JSON","stringify","response","json","result","sort","e1","e2","comparator","forEach","fetchData","selectRow","mode","onSelect","isSelected","selected","found","find","filter","console","log","Stage1Action","updateSelectedPairs","request","stage1Rows","onSelectAll","s1Rows","hideSelectColumn","progress","TournamentProgress","Stage2","bootstrap4","keyField","data","cellEdit","cellEditFactory","blurToSave","beforeSaveCell","oldValue","newValue","startsWith","getOpposite","afterSaveCell","newRows","tId","pair","tournamentId","tableName","score","pair1Id","pair2Id","key","ok","setTimeout","acc","thisRowIndex","thisRow","total","oppositeRowIndex","oppositeRow","splice","s1Row","updatePlacement","map","placement","noDataIndication","headerClasses","caption","striped","hover","withRouter","currentHistory","useHistory","session","getSession","needRefresh","Stage1Selector","getNeedRefresh","getSelectedPairs","PairSelector","getPairsList","toolsBar","commonStyle","toolsBarContainer","Row","toolsBarRow","Col","variant","onClick","Stage1","Stage2Action","delete","TournamentAction","update","count","fetchStage2","ButtonGroup","toggle","currentTarget","renderTables","stage","stageList","obj1","obj2","localeCompare","element","module","exports","_assertThisInitialized","self","ReferenceError","TournamentBadge","t","useTranslation","toUpperCase","formatDate","date"],"mappings":"wGAAA,4DAMIA,EAAO,aAIPC,EAAeC,IAAMC,YAAW,SAAUC,EAAMC,GAClD,IAAIC,EAAWF,EAAKE,SAChBC,EAAOH,EAAKG,KACZC,EAAYJ,EAAKI,UACjBC,EAAUL,EAAKK,QACfC,EAAON,EAAKM,KACZC,EAAWP,EAAKO,SAChBC,EAAQR,EAAKQ,MACbC,EAAWT,EAAKS,SAChBC,EAAWV,EAAKU,SAChBC,EAAQC,YAA8BZ,EAAM,CAAC,WAAY,OAAQ,YAAa,UAAW,OAAQ,WAAY,QAAS,WAAY,aAElIa,EAAYC,oBAAS,GACrBC,EAAUF,EAAU,GACpBG,EAAaH,EAAU,GAEvBI,EAAcC,uBAAY,SAAUC,GACb,UAArBA,EAAEC,OAAOC,SAAqBL,GAAW,KAC5C,IACCM,EAAaJ,uBAAY,SAAUC,GACZ,UAArBA,EAAEC,OAAOC,SAAqBL,GAAW,KAC5C,IACH,OAAoBlB,IAAMyB,cAAcC,IAAQC,YAAS,GAAId,EAAO,CAClEV,IAAKA,EACLG,UAAWsB,IAAWtB,EAAWW,GAAW,QAASN,GAAY,YACjEH,UAAMqB,EACNC,SAAUvB,EACVwB,GAAI,UACW/B,IAAMyB,cAAc,QAAS,CAC5CpB,KAAMA,EACNG,KAAMA,EACNE,MAAOA,EACPP,IAAKS,EACLoB,aAAc,MACdzB,UAAWA,EACXI,WAAYA,EACZsB,QAASd,EACTe,OAAQV,EACRf,SAAUA,GAAYX,IACpBM,MAENL,EAAaoC,YAAc,eACZpC,O,uPC/BAqC,EAdkC,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,MACnDC,EAAW,CACfC,MAAOF,EAAQ,eAAYT,GAE7B,OACE,+BACE,oBAAGY,MAAOF,EAAV,sBACW,iCAASF,OAEnBC,EAAQ,+DAA4C,S,SCTrDI,EAAc,CAAEA,YAAa,UAC7BC,EAAQ,CAAEA,MAAO,UACjBC,EAAY,SAACC,EAAOC,GACxB,OAAO,qCACLC,GAAG,MAAD,OAAQF,GACVG,UAAU,MAAD,OAAQH,GACjBI,KAAMJ,EAAMK,WAEZC,YAAa,SAACC,EAAQC,GAAT,MAAuB,CAAEC,MAAM,GAAD,OAAK,GAAKR,EAAV,QACxCJ,GANL,IAOEa,SAAU,SAACC,EAASC,EAAKC,EAAUC,GAAzB,OAAyCD,IAAaC,EAAc,IAC3EhB,GARL,IASEF,MAAO,SAACe,EAASC,EAAKC,EAAUC,GAC9B,OAAID,IAAaC,EAAc,EAAU,CAAEC,gBAAiB,WAC9B,IAA1BC,SAASL,EAAS,KAAuC,IAA1BK,SAASL,EAAS,IAAkB,CAAEI,gBAAiB,sBAC5D,IAA1BC,SAASL,EAAS,KAAuC,IAA1BK,SAASL,EAAS,IAAkB,CAAEI,gBAAiB,sBACnF,MAOTE,OAAQ,CACNtD,KAAMuD,OAAKC,OACXC,QAAS,CACP,CAAEvD,MAAO,IAAKwD,MAAO,KACrB,CAAExD,MAAO,IAAKwD,MAAO,KACrB,CAAExD,MAAO,IAAKwD,MAAO,KACrB,CAAExD,MAAO,IAAKwD,MAAO,KACrB,CAAExD,MAAO,KAAMwD,MAAO,SAMjBC,EAAU,SAACC,GA4BtB,IA3BA,IAAIC,EAAc,CAAC,yBAGftB,GAAI,YACJC,UAAW,aACXC,KAAM,cACNM,UAAU,EACVJ,YAAa,SAACC,EAAQC,GAAT,MAAuB,CAAEC,MAAO,SAC1CX,GACAD,GATW,yBAadK,GAAI,YACJC,UAAW,YACXC,KAAM,KACNM,UAAU,EACV/C,KAAM,SACN2C,YAAa,SAACC,EAAQC,GAAT,MAAuB,CAAEC,MAAO,QAC1CZ,GAnBW,IAoBdD,MAAO,SAACe,EAASC,EAAKC,EAAUC,GAC9B,MAAO,CAAEC,gBAAiB,UAAWpB,MAAO,eAMzC8B,EAAK,EAAGA,EAAKF,EAAUG,OAAQD,IAAMD,EAAYG,KAAK5B,EAAU0B,EAAK,EAAGF,EAAUG,SAwB3F,OAtBAF,EAAYG,KAAZ,aAGIzB,GAAI,SACJC,UAAW,QACXC,KAAM,SACNM,UAAU,EACV/C,KAAM,SACN2C,YAAa,SAACC,EAAQC,GAAT,MAAuB,CAAEC,MAAO,QAC1CZ,GATP,aAaIK,GAAI,YACJC,UAAW,YACXC,KAAM,YACNM,UAAU,EACV/C,KAAM,SACN2C,YAAa,SAACC,EAAQC,GAAT,MAAuB,CAAEC,MAAO,QAC1CZ,IAGA2B,G,gBCqFMI,EAlKK,SAAC,GAA8B,IAA5BL,EAA2B,EAA3BA,UAAWM,EAAgB,EAAhBA,UAC1BC,EAAWC,cAEXC,EAAUC,YAAYC,IAAaF,SACnCG,EAAaF,YAAYG,IAAmBC,eAJF,EAMRlE,mBAAS,IAND,mBAMzCmE,EANyC,KAM3BC,EAN2B,OAOdpE,oBAAS,GAPK,mBAOzCqE,EAPyC,KAO9BC,EAP8B,OAQpBtE,oBAAS,GARW,mBAQzCsB,EARyC,KAQlCiD,EARkC,OASxBvE,mBAASwE,YAAcpB,IATC,mBASzCqB,EATyC,KASnCC,EATmC,KAW1CC,EAAYvB,EAAU,GAAGwB,WAG/BC,qBACE,YACiB,uCAAG,8BAAAC,EAAA,6DAChBR,GAAa,GADG,SAEOS,MAAM,iBAAkB,CAC7CC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEX,OAAME,gBALf,cAEVU,EAFU,gBAOKA,EAASC,OAPd,OAOVC,EAPU,OAQV7B,GACJ,YAAI6B,GACDC,MAAK,SAACC,EAAIC,GAAL,OAAYC,YAAWF,EAAIC,MAChCE,SAAQ,SAACnD,EAAKZ,GAAN,OAAiB0D,EAAO9C,EAAIX,UAAY,GAAvB,UAAyCD,EAAQ,KAE/E6C,EAAQa,GACRjB,GAAa,GAdG,4CAAH,qDAgBfuB,KAGF,IAGF,IAAuBtD,EA8FjBuD,EAAY,CAChBC,KAAM,WACNC,SAhCqB,SAACvD,EAAKwD,GAC3B,IACIC,EADEC,IAAQhC,EAAaiC,MAAK,SAAC/F,GAAD,OAAOA,EAAEyB,YAAcW,EAAIX,aAgB3D,OAbEoE,EADED,EACSE,EAAQhC,EAAH,CAAmB1B,GAAnB,mBAA2B0B,IAEhCgC,EAAQhC,EAAakC,QAAO,SAAChG,GAAD,OAAOA,EAAEyB,YAAcW,EAAIX,aAAaqC,EAGjFmC,QAAQC,IAAI,qBACZnC,EAAgB8B,GAChBvC,EACE6C,IAAaC,oBAAoBC,QAAQ,CAC3C9B,WAAWD,EACXgC,WAAYT,MAGL,GAgBPU,YAbwB,SAACX,EAAYY,GACrCzC,EAAgB6B,EAAaY,EAAS,IACtClD,EACE6C,IAAaC,oBAAoBC,QAAQ,CAC3C9B,WAAWD,EACXgC,WAAYV,EAAaY,EAAS,OASlCpF,MAAO,CAAEmB,gBAAiB,WAC1BkE,kBAAmBjD,GAAWG,EAAW+C,UAAYC,qBAAmBC,QAG1E,OAAO5C,EACL,qDACqB,4BAAIM,IADzB,mBAIA,cAAC,IAAD,CAEEuC,YAAU,EACVC,SAAS,KACTC,KAAM3C,EACNtB,QAASA,EAAQC,GACjB0C,UAAWA,EACXuB,UAlHmB9E,EAkHKsB,GAAWG,EAAW+C,SAAWC,qBAAmBC,OAjH9EK,IAAgB,CACdvB,KAAMxD,EAAW,QAAU,OAC3BgF,YAAY,EACZC,eAAgB,SAACC,EAAUC,EAAUjF,EAAKL,GACpCA,EAAOL,GAAG4F,WAAW,SAEvBlD,EAAK5B,SAAST,EAAOH,MAAQ,GAA7B,aAAsCQ,EAAIX,YAAe8F,YAAYF,KAGzEG,cAAc,WAAD,4BAAE,WAAOJ,EAAUC,EAAUjF,EAAKL,GAAhC,+BAAA0C,EAAA,yDACPgD,EADO,YACOrD,IAChBrC,EAAOL,GAAG4F,WAAW,OAFZ,iCAIY5C,MAAM,6BAA8B,CACzDC,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CACnB2C,IAAKtF,EAAIuF,KAAKC,aACdC,UAAWvD,EACXwD,MAAOT,EACPU,QAAS3F,EAAIuF,KAAKjG,GAClBsG,QAAS5D,EAAK5B,SAAST,EAAOH,MAAQ,GAAG+F,KAAKjG,OAZvC,cAILsD,EAJK,gBAeLA,EAASC,OAfJ,OAuBX,IAASgD,KAPLjD,EAASkD,KACXhE,GAAW,GACXiE,YAAW,kBAAMjE,GAAW,KAAQ,MAIlCkE,EAAM,EACMhG,EAAS6F,EAAIX,WAAW,QAAUlF,EAAI6F,KAAMG,GAAO5F,SAASJ,EAAI6F,KAQhF,IAASA,KAPHI,EAAejG,EAAIX,UAAY,GAC/B6G,EAAUb,EAAQY,IAChBE,MAAQH,GAAY,EAG5BA,EAAM,EACAI,EAAmBhG,SAAST,EAAOH,MAAQ,EACjC6F,EAAQe,GAClBP,EAAIX,WAAW,QAAUG,EAAQe,GAAkBP,KACrDG,GAAO5F,SAASiF,EAAQe,GAAkBP,MACxCQ,EAAchB,EAAQe,IAChBD,MAAQH,GAAY,EAEhCX,EAAQiB,OAAOL,EAAc,EAAGC,GAChCb,EAAQiB,OAAOF,EAAkB,EAAGC,GAtCzB,QAyCTpF,GACF,YAAIoE,GACDtC,MAAK,SAACC,EAAIC,GAAL,OAAYC,YAAWF,EAAIC,MAChCE,SAAQ,SAACoD,EAAOnH,GAAR,OAAmBiG,EAAQkB,EAAMlH,UAAY,GAA1B,UAA4CD,EAAQ,KAGpF6C,EAAQoD,GACRnE,EACE6C,IAAayC,gBAAgBvC,QAAQ,CAAEjC,KAAMA,EAAKyE,KAAI,SAAC7I,GAAD,MAAQ,CAAE0B,GAAI1B,EAAE2H,KAAKjG,GAAIoH,UAAW9I,EAAE8I,iBAjDjF,4CAAF,yDAAC,MAyGdC,iBAAiB,uBACjBC,cAAc,0CACdC,QAAS,cAAC,EAAD,CAAajI,MAAOsD,EAAWrD,MAAOA,IAC/CiI,SAAO,EACPC,OAAK,GAZP,iBACiB7E,K,SC1CN8E,uBArGW,WACxB,IAAMC,EAAiBC,cACjBhG,EAAWC,cAGXgG,EAAU9F,YAAYC,IAAa8F,YAEnC7F,EAAaF,YAAYG,IAAmBC,eAE5C4F,EAAchG,YAAYiG,IAAeC,gBAEzC9D,EAAWpC,YAAYiG,IAAeE,kBAEtC7G,EAAYU,YAAYoG,IAAaC,cAwB3C7D,QAAQC,IAAI,gBAAiBuD,GAC7B,IAAMM,EACJ,sBAAK9K,UAAW+K,IAAYC,kBAA5B,UACE,eAACC,EAAA,EAAD,CAAKjL,UAAW+K,IAAYG,YAA5B,UACE,cAACC,EAAA,EAAD,UACE,eAAC/J,EAAA,EAAD,CAAQgK,QAAQ,YAAYC,QA3BpC,WACEjB,EAAelG,KAAKoG,EAAQ/F,QAAU,cAAgB,MA0BHvE,UAAU,aAAvD,UACE,cAAC,IAAD,IADF,iBAID0E,EAAW+C,SAAWC,qBAAmB4D,OACxC,cAACH,EAAA,EAAD,UACE,eAAC/J,EAAA,EAAD,CACEgK,QAAQ,SACRC,QAAS,kBAAMhH,EAASkH,IAAaC,OAAOpE,QAAQ,CAAEqB,IAAK/D,EAAWjC,OACtEpC,UAAWiK,EAAQ/F,SAAY+F,EAAQ/F,SAAWG,EAAW+C,SAAWC,qBAAmBC,OAH7F,UAKE,cAAC,IAAD,IALF,qBAQA,KACJ,cAACwD,EAAA,EAAD,UACE,eAAC/J,EAAA,EAAD,CACEgK,QAAQ,kBACRpL,UAAU,kCACVqL,QA3CV,WAKMf,EAAQ/F,SAAWG,EAAW+C,SAAWC,qBAAmBC,SAC9DjD,EAAW+C,SAAWC,qBAAmBC,OACzCtD,EAASoH,IAAiBC,OAAOtE,QAAQ,CAAE1C,iBAG7C,IAAIiH,EAAQ,EACZ,GAAI/E,GAAYA,EAAS3C,QAAU,EAEjC,IADA0H,EAAQ/E,EAAS3C,OAAS,EACnB0H,EAAQ,IAAM,GAAGA,IAE1BtH,EAASkH,IAAaK,YAAYxE,QAAQ,CAAEuB,aAAcjE,EAAWjC,GAAKkJ,WAC1EvB,EAAelG,KAAK,YA4BZ7D,SAAUuG,EAAS3C,OAAS,GAAKS,EAAW+C,SAAWC,qBAAmBC,OAJ5E,UAME,0CANF,IAMmB,cAAC,IAAD,YAIvB,cAACsD,EAAA,EAAD,UACE,cAACE,EAAA,EAAD,UACE,cAACU,EAAA,EAAD,CAAaC,QAAM,EAAC9L,UAAU,OAA9B,SACE,cAACP,EAAA,EAAD,CACES,KAAK,WACLkL,QAAW1G,EAAWN,UAAY,UAAY,SAC9CnE,QAASyE,EAAWN,UACpBhE,MAAM,IACND,SAAU,SAACY,GAAD,OACRsD,EACEoH,IAAiBC,OAAOtE,QAAQ,CAC9B1C,WAAW,2BAAMA,GAAP,IAAmBN,UAAWrD,EAAEgL,cAAc9L,cARhE,4CAaiCyE,EAAWN,UAAY,YAAc,2BAQhF,OACE,qCACG0G,EACD,cAAC,IAAD,IACChH,EAAYkI,EAAalI,EAAWY,EAAWN,WAAa,WAOnE,SAAS4H,EAAalI,EAAsBM,GAC1C,IAAIiB,EAAY,GACZ4G,EAAmB,GACnBC,EAAgC,GAoBpC,OAlBA,YAAIpI,GACDoC,MAAK,SAACiG,EAAMC,GAAP,OAAgBD,EAAK7G,WAAW+G,cAAcD,EAAK9G,eAExDgB,SAAQ,SAACgG,EAAS/J,GAEC,KAAd8C,IAAkBA,EAAYiH,EAAQhH,YACtCD,IAAciH,EAAQhH,aACxB4G,EAAUhI,KAAK,cAAC,EAAD,CAAyCJ,UAAWmI,EAAO7H,UAAWA,GAAtE,iBAA4BiB,KAC3CA,EAAYiH,EAAQhH,WACpB2G,EAAQ,IAEVA,EAAM/H,KAAKoI,MAEXL,EAAMhI,OAAS,GACjBiI,EAAUhI,KAAK,cAAC,EAAD,CAAyCJ,UAAWmI,EAAO7H,UAAWA,GAAtE,iBAA4BiB,KAItC6G,I,oBClJTK,EAAOC,QAAU,CAAC,cAAgB,8BAA8B,kBAAoB,kCAAkC,YAAc,8B,iCCDrH,SAASC,EAAuBC,GAC7C,QAAa,IAATA,EACF,MAAM,IAAIC,eAAe,6DAG3B,OAAOD,EALT,mC,gHC+BeE,IAvByC,WACtD,IAAMlI,EAAaF,YAAYG,IAAmBC,eAC1CiI,EAAMC,YAAe,CAAC,eAAtBD,EACR,OACE,cAAC,IAAD,UACE,cAAC,IAAD,UACE,oBAAI7M,UAAU,aAAd,SACE,eAAC,IAAD,CAAOoL,QAAQ,OAAf,UACE,iCAAOyB,EAAE,yBAAT,OACA,uCAAUnI,EAAW3E,KAAKgN,cAA1B,OACA,+BACE,2CACSC,YAAWtI,EAAWuI,MAD/B,KAEE,wCAAWJ,EAAE,uBAAD,OAAwBnI,EAAW+C","file":"static/js/13.5e8b1634.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { useCallback, useState } from 'react';\nimport Button from './Button';\n\nvar noop = function noop() {\n  return undefined;\n};\n\nvar ToggleButton = React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      name = _ref.name,\n      className = _ref.className,\n      checked = _ref.checked,\n      type = _ref.type,\n      onChange = _ref.onChange,\n      value = _ref.value,\n      disabled = _ref.disabled,\n      inputRef = _ref.inputRef,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"name\", \"className\", \"checked\", \"type\", \"onChange\", \"value\", \"disabled\", \"inputRef\"]);\n\n  var _useState = useState(false),\n      focused = _useState[0],\n      setFocused = _useState[1];\n\n  var handleFocus = useCallback(function (e) {\n    if (e.target.tagName === 'INPUT') setFocused(true);\n  }, []);\n  var handleBlur = useCallback(function (e) {\n    if (e.target.tagName === 'INPUT') setFocused(false);\n  }, []);\n  return /*#__PURE__*/React.createElement(Button, _extends({}, props, {\n    ref: ref,\n    className: classNames(className, focused && 'focus', disabled && 'disabled'),\n    type: undefined,\n    active: !!checked,\n    as: \"label\"\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    name: name,\n    type: type,\n    value: value,\n    ref: inputRef,\n    autoComplete: \"off\",\n    checked: !!checked,\n    disabled: !!disabled,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onChange: onChange || noop\n  }), children);\n});\nToggleButton.displayName = 'ToggleButton';\nexport default ToggleButton;","import React from 'react';\n\ninterface Stage1HeaderProps {\n  title: string;\n  saved: boolean;\n}\n\nconst tableHeader: React.FC<Stage1HeaderProps> = ({ title, saved }) => {\n  const divStyle = {\n    color: saved ? '#4feb34' : undefined,\n  };\n  return (\n    <h3>\n      <b style={divStyle}>\n        Girone - <strong>{title}</strong>\n      </b>\n      {saved ? <small> - Salvataggio in corso...</small> : null}\n    </h3>\n  );\n};\n\nexport default tableHeader;\n","import { Type } from 'react-bootstrap-table2-editor';\n\n/*\n  non esistono i tipi per react-bootstrap-table2-editor\n  quindi lascio tutto quello che riguarda l'edit come .js\n*/\n\nconst headerAlign = { headerAlign: 'center' };\nconst align = { align: 'center' };\nconst newColumn = (index, rowNumber) => {\n  return {\n    id: `col${index}`,\n    dataField: `col${index}`,\n    text: index.toString(),\n    //type: 'number',\n    headerStyle: (column, colIndex) => ({ width: `${75 / rowNumber}%` }),\n    ...headerAlign,\n    editable: (content, row, rowIndex, columnIndex) => rowIndex !== columnIndex - 2,\n    ...align,\n    style: (content, row, rowIndex, columnIndex) => {\n      if (rowIndex === columnIndex - 2) return { backgroundColor: '#343a40' };\n      if (parseInt(content, 10) === 3 || parseInt(content, 10) === 2) return { backgroundColor: 'rgb(196, 247, 160)' };\n      if (parseInt(content, 10) === 1 || parseInt(content, 10) === 0) return { backgroundColor: 'rgb(255, 147, 147)' };\n      return null;\n    },\n    /* TODO:\n    editorStyle: (cell, row, rowIndex, colIndex) => {\n      console.log('editorStyle : ', cell, row, rowIndex, colIndex);\n      return { width: '100%', height: 'auto' };\n    }, */\n    editor: {\n      type: Type.SELECT,\n      options: [\n        { value: '3', label: '3' },\n        { value: '2', label: '2' },\n        { value: '1', label: '1' },\n        { value: '0', label: '0' },\n        { value: null, label: '' },\n      ],\n    },\n  };\n};\n\nexport const columns = (pairsList) => {\n  let baseColumns = [\n    {\n      // Nome Coppia ( In realta contiene un oggetto di tipo Pair)\n      id: 'pairLabel',\n      dataField: 'pair.label',\n      text: 'Nome Coppia',\n      editable: false,\n      headerStyle: (column, colIndex) => ({ width: '15%' }),\n      ...align,\n      ...headerAlign,\n    },\n    {\n      // Numbero riga per riferimento visivo\n      id: 'rowNumber',\n      dataField: 'rowNumber',\n      text: 'ID',\n      editable: false,\n      type: 'number',\n      headerStyle: (column, colIndex) => ({ width: '5%' }),\n      ...headerAlign,\n      style: (content, row, rowIndex, columnIndex) => {\n        return { backgroundColor: '#343a40', color: '#ffc107' };\n      },\n    },\n  ];\n\n  // generazione dinamica colonne intermedie\n  for (let ii = 0; ii < pairsList.length; ii++) baseColumns.push(newColumn(ii + 1, pairsList.length));\n\n  baseColumns.push(\n    {\n      // Totale coppia\n      id: 'totale',\n      dataField: 'total',\n      text: 'Totale',\n      editable: false,\n      type: 'number',\n      headerStyle: (column, colIndex) => ({ width: '5%' }),\n      ...headerAlign,\n    },\n    {\n      // Posizionamento coppia\n      id: 'placement',\n      dataField: 'placement',\n      text: 'Posizione',\n      editable: true,\n      type: 'number',\n      headerStyle: (column, colIndex) => ({ width: '5%' }),\n      ...headerAlign,\n    }\n  );\n  return baseColumns;\n};\n","import React, { useState, useEffect } from 'react';\n// table\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport cellEditFactory from 'react-bootstrap-table2-editor';\n// helper\nimport TableHeader from './header';\nimport { getOpposite, comparator, rowsGenerator } from './helper';\nimport { columns } from './editor';\n//\nimport { useSelector, useDispatch } from 'react-redux';\nimport { AuthSelector } from '../../redux/selectors/auth.selector';\n// style\nimport { Stage1Action } from '../../redux/actions';\nimport { TournamentSelector } from '../../redux/selectors';\nimport { TournamentProgress } from '../../@common/dto';\n\n// TODO: convert this component to ts\n// eslint-disable-next-line sonarjs/cognitive-complexity\nconst Stage1Table = ({ pairsList, autoOrder }) => {\n  const dispatch = useDispatch();\n  // From store\n  const isAdmin = useSelector(AuthSelector.isAdmin);\n  const tournament = useSelector(TournamentSelector.getTournament);\n  // State\n  const [selectedRows, setSelectedRows] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [saved, setIsSaved] = useState(false);\n  const [rows, setRows] = useState(rowsGenerator(pairsList));\n  // Const\n  const stageName = pairsList[0].stage1Name;\n\n  // Effects\n  useEffect(\n    () => {\n      const fetchData = async () => {\n        setIsLoading(true);\n        const response = await fetch('/api/v1/stage1', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ rows, stageName }),\n        });\n        const result = await response.json();\n        if (!!autoOrder)\n          [...result]\n            .sort((e1, e2) => comparator(e1, e2))\n            .forEach((row, index) => (result[row.rowNumber - 1]['placement'] = index + 1));\n\n        setRows(result);\n        setIsLoading(false);\n      };\n      fetchData();\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  const cellEditProps = (editable) =>\n    cellEditFactory({\n      mode: editable ? 'click' : 'none',\n      blurToSave: true,\n      beforeSaveCell: (oldValue, newValue, row, column) => {\n        if (column.id.startsWith('col')) {\n          // Aggiorno cella opposta\n          rows[parseInt(column.text) - 1][`col${row.rowNumber}`] = getOpposite(newValue);\n        }\n      },\n      afterSaveCell: async (oldValue, newValue, row, column) => {\n        const newRows = [...rows];\n        if (column.id.startsWith('col')) {\n          // Aggiorno dati sul Db\n          const response = await fetch('/api/v1/stage1/update/cell', {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              tId: row.pair.tournamentId,\n              tableName: stageName,\n              score: newValue,\n              pair1Id: row.pair.id,\n              pair2Id: rows[parseInt(column.text) - 1].pair.id,\n            }),\n          });\n          await response.json();\n          if (response.ok) {\n            setIsSaved(true);\n            setTimeout(() => setIsSaved(false), 3000);\n          }\n\n          // Ricalcolo totali riga\n          let acc = 0;\n          for (let key in row) if (key.startsWith('col') && row[key]) acc += parseInt(row[key]);\n          const thisRowIndex = row.rowNumber - 1;\n          const thisRow = newRows[thisRowIndex];\n          thisRow.total = acc ? acc : 0;\n\n          //... e riga opposta\n          acc = 0;\n          const oppositeRowIndex = parseInt(column.text) - 1;\n          for (let key in newRows[oppositeRowIndex])\n            if (key.startsWith('col') && newRows[oppositeRowIndex][key])\n              acc += parseInt(newRows[oppositeRowIndex][key]);\n          const oppositeRow = newRows[oppositeRowIndex];\n          oppositeRow.total = acc ? acc : 0;\n\n          newRows.splice(thisRowIndex, 1, thisRow);\n          newRows.splice(oppositeRowIndex, 1, oppositeRow);\n        }\n        // Aggiorno posizione relativa\n        if (autoOrder)\n          [...newRows]\n            .sort((e1, e2) => comparator(e1, e2))\n            .forEach((s1Row, index) => (newRows[s1Row.rowNumber - 1]['placement'] = index + 1));\n\n        // Aggiornamento\n        setRows(newRows);\n        dispatch(\n          Stage1Action.updatePlacement.request({ rows: rows.map((e) => ({ id: e.pair.id, placement: e.placement })) })\n        );\n      },\n    });\n\n  const handleOnSelect = (row, isSelected) => {\n    const found = selectedRows.find((e) => e.rowNumber === row.rowNumber) ? true : false;\n    let selected;\n    if (isSelected) {\n      selected = found ? selectedRows : [row, ...selectedRows];\n    } else {\n      selected = found ? selectedRows.filter((e) => e.rowNumber !== row.rowNumber) : selectedRows;\n    }\n\n    console.log('handleOnSelect : ');\n    setSelectedRows(selected);\n    dispatch(\n      Stage1Action.updateSelectedPairs.request({\n\t\t\t\tstage1Name:stageName,\n\t\t\t\tstage1Rows: selected,\n      })\n    );\n    return true;\n  };\n\n  const handleOnSelectAll = (isSelected, s1Rows) => {\n    setSelectedRows(isSelected ? s1Rows : []);\n    dispatch(\n      Stage1Action.updateSelectedPairs.request({\n\t\t\t\tstage1Name:stageName,\n\t\t\t\tstage1Rows: isSelected ? s1Rows : [],\n      })\n    );\n  };\n\n  const selectRow = {\n    mode: 'checkbox',\n    onSelect: handleOnSelect,\n    onSelectAll: handleOnSelectAll,\n    style: { backgroundColor: '#c8e6c9' },\n    hideSelectColumn: !isAdmin || tournament.progress >= TournamentProgress.Stage2,\n  };\n\n  return isLoading ? (\n    <h3>\n      Caricamento girone <b>{stageName}</b> in corso....\n    </h3>\n  ) : (\n    <BootstrapTable\n      key={`Stege1-${stageName}`}\n      bootstrap4\n      keyField=\"id\"\n      data={rows}\n      columns={columns(pairsList)}\n      selectRow={selectRow}\n      cellEdit={cellEditProps(isAdmin && tournament.progress < TournamentProgress.Stage2)}\n      noDataIndication=\"Nessun dato reperito\"\n      headerClasses=\"default-background default-color-yellow\"\n      caption={<TableHeader title={stageName} saved={saved} />}\n      striped\n      hover\n    />\n  );\n};\n\nexport default Stage1Table;\n","// React, Router, Redux\nimport { useHistory } from 'react-router';\nimport { withRouter } from 'react-router-dom';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n// Style\nimport commonStyle from '../../common.module.css';\nimport { RightArrowIcon, TrashIcon, LeftArrowIcon } from '../core/icons';\nimport { Button, Col, Row, ButtonGroup, ToggleButton } from 'react-bootstrap';\n// Actions, Selectors\nimport { Stage2Action, TournamentAction } from '../../redux/actions';\nimport { AuthSelector, TournamentSelector, Stage1Selector, PairSelector } from '../../redux/selectors';\nimport Stage1Table from './table';\nimport TournamentBadge from '../Tournament/badge';\n// Models\nimport { PairDTO, TournamentProgress } from '../../@common/dto';\n\n/**\n * Wraps multiple table components\n */\n// eslint-disable-next-line sonarjs/cognitive-complexity\nconst Wrapper: React.FC = (): JSX.Element => {\n  const currentHistory = useHistory();\n  const dispatch = useDispatch();\n\n  // Session\n  const session = useSelector(AuthSelector.getSession);\n  // Torneo\n  const tournament = useSelector(TournamentSelector.getTournament)!;\n  // Sono presenti aggiornamenti\n  const needRefresh = useSelector(Stage1Selector.getNeedRefresh);\n  // Squadre selezionate\n  const selected = useSelector(Stage1Selector.getSelectedPairs);\n  // Lista coppie\n  const pairsList = useSelector(PairSelector.getPairsList);\n\n  function goBack() {\n    currentHistory.push(session.isAdmin ? '/tournament' : '/');\n  }\n  function goToStage2() {\n    // TODO: eseguire controlli e eventualemente mostrare messaggi utente\n\n    // Se sono un utente che puo modificare e il torneo è in una fase minore ( vedi ordinamento Enum ) di quella attuale\n    // allora aggiorno lo stato del torneo\n    if (session.isAdmin && tournament.progress < TournamentProgress.Stage2) {\n      tournament.progress = TournamentProgress.Stage2;\n      dispatch(TournamentAction.update.request({ tournament }));\n    }\n\n    let count = 8;\n    if (selected && selected.length >= 4) {\n      count = selected.length - 1;\n      while (count % 8 !== 0) count++;\n    }\n    dispatch(Stage2Action.fetchStage2.request({ tournamentId: tournament.id!, count }));\n    currentHistory.push('/stage2');\n  }\n\n  console.log('Refreshing : ', needRefresh);\n  const toolsBar = (\n    <div className={commonStyle.toolsBarContainer}>\n      <Row className={commonStyle.toolsBarRow}>\n        <Col>\n          <Button variant=\"secondary\" onClick={goBack} className=\"float-left\">\n            <LeftArrowIcon /> Indietro\n          </Button>\n        </Col>\n        {tournament.progress > TournamentProgress.Stage1 ? (\n          <Col>\n            <Button\n              variant=\"danger\"\n              onClick={() => dispatch(Stage2Action.delete.request({ tId: tournament.id! }))}\n              disabled={!session.isAdmin || (session.isAdmin && tournament.progress < TournamentProgress.Stage2)}\n            >\n              <TrashIcon /> Reset Fase 2\n            </Button>\n          </Col>\n        ) : null}\n        <Col>\n          <Button\n            variant=\"outline-warning\"\n            className=\"default-color-white float-right\"\n            onClick={goToStage2}\n            disabled={selected.length < 4 && tournament.progress < TournamentProgress.Stage2}\n          >\n            <b>Prosegui </b> <RightArrowIcon />\n          </Button>\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <ButtonGroup toggle className=\"mb-2\">\n            <ToggleButton\n              type=\"checkbox\"\n              variant={!!tournament.autoOrder ? 'success' : 'danger'}\n              checked={tournament.autoOrder}\n              value=\"1\"\n              onChange={(e) =>\n                dispatch(\n                  TournamentAction.update.request({\n                    tournament: { ...tournament, autoOrder: e.currentTarget.checked },\n                  })\n                )\n              }\n            >\n              {`Ordinamento automatico : ${!!tournament.autoOrder ? 'Attivato ' : ' Disattivato'}`}\n            </ToggleButton>\n          </ButtonGroup>\n        </Col>\n      </Row>\n    </div>\n  );\n\n  return (\n    <>\n      {toolsBar}\n      <TournamentBadge />\n      {pairsList ? renderTables(pairsList, tournament.autoOrder) : null}\n    </>\n  );\n};\n\nexport default withRouter(Wrapper);\n\nfunction renderTables(pairsList: PairDTO[], autoOrder: boolean): JSX.Element[] {\n  let stageName = '';\n  let stage: PairDTO[] = [];\n  let stageList: Array<JSX.Element> = [];\n  // sort pairs by stage1Name\n  [...pairsList]\n    .sort((obj1, obj2) => obj1.stage1Name.localeCompare(obj2.stage1Name))\n    // FIXME: use .reduce  ?\n    .forEach((element, index) => {\n      // A rottura di stage1Name\n      if (stageName === '') stageName = element.stage1Name;\n      if (stageName !== element.stage1Name) {\n        stageList.push(<Stage1Table key={`Stage1-${stageName}`} pairsList={stage} autoOrder={autoOrder} />);\n        stageName = element.stage1Name;\n        stage = [];\n      }\n      stage.push(element);\n    });\n  if (stage.length > 0) {\n    stageList.push(<Stage1Table key={`Stage1-${stageName}`} pairsList={stage} autoOrder={autoOrder} />);\n    // console.log(`stages ${stageName} :`, stage);\n  }\n\n  return stageList;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"functionsList\":\"common_functionsList__3B3UB\",\"toolsBarContainer\":\"common_toolsBarContainer__1nanA\",\"toolsBarRow\":\"common_toolsBarRow__r8q12\"};","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import React from 'react';\nimport { TournamentSelector } from '../../redux/selectors';\nimport { useSelector } from 'react-redux';\nimport { Row, Col, Badge } from 'react-bootstrap';\nimport { formatDate } from '../../@common/utils/date.utils';\nimport { useTranslation } from 'react-i18next';\n\ninterface TournamentBadgeProps {}\nconst TournamentBadge: React.FC<TournamentBadgeProps> = () => {\n  const tournament = useSelector(TournamentSelector.getTournament)!;\n  const { t } = useTranslation(['tournament']);\n  return (\n    <Row>\n      <Col>\n        <h2 className=\"float-left\">\n          <Badge variant=\"info\">\n            <span>{t('tournament:tournament')} </span>\n            <strong>\"{tournament.name.toUpperCase()}\"</strong>\n            <span>\n              <i>\n                {` - ${formatDate(tournament.date)} `}\n                <small> @ {t(`tournament:progress.${tournament.progress}`)}</small>\n              </i>\n            </span>\n          </Badge>\n        </h2>\n      </Col>\n    </Row>\n  );\n};\n\nexport default TournamentBadge;\n"],"sourceRoot":""}