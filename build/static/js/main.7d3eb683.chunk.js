(this.webpackJsonpcalcetto=this.webpackJsonpcalcetto||[]).push([[0],{179:function(e,t,a){e.exports=a.p+"static/media/header.7774471e.jpg"},188:function(e,t,a){e.exports=a(276)},193:function(e,t,a){},199:function(e,t,a){},262:function(e,t,a){},269:function(e,t,a){},271:function(e,t,a){},276:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),i=a.n(o),l=(a(193),a(194),a(27)),c=function(e){var t=e.component;return n.createElement(l.a,Object.assign({},e,{render:function(){return n.createElement(t,null)}}))},s=(a(199),a(8)),u=a.n(s),m=a(10),d=a(20),p=a(11),f=a(168),h=a(293),b=a(287),g=a(278);function v(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return"".concat(n,"-").concat(a,"-").concat(t)}function E(e,t){return{id:null,name:e||"",ownerId:null,progress:t||"New",public:!0,label:e||""}}var y,w,x,j,O="PairsSelection",C="Stage1",S=a(81),k={},T=Object(n.createContext)([k,function(){}]),N=function(){return Object(n.useContext)(T)},I=function(e){return!!(e&&e.isAuthenticated&&e.role)&&(e.isAuthenticated&&"Admin"===e.role)},F={alignSelf:"stretch",backgroundColor:"green",marginBottom:8,marginTop:8,marginRigth:10,width:1},A=function(e){var t=e.innerProps;return r.a.createElement("span",Object.assign({style:F},t))},R={width:"50%",margin:"auto",backgroundColor:"inherit",borderColor:"#ffc107",borderWidth:"3px"},P=function(){var e=Object(n.useState)(v()),t=Object(p.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),c=Object(p.a)(i,2),s=c[0],y=c[1],w=Object(l.f)(),x=N(),j=Object(p.a)(x,1)[0];j.isAuthenticated&&j.role;Object(n.useEffect)((function(){return e=y,t=o,void Object(m.a)(u.a.mark((function a(){var n,r,o,i;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("/api/v1/tournament/list",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=a.sent,a.next=5,n.json();case 5:r=a.sent,o=r.find((function(e){return e.name===v()})),(i=o?[o].concat(Object(d.a)(r)):r).sort(),e(i),t&&t(i[0]);case 11:case"end":return a.stop()}}),a)})))();var e,t}),[]);var C=function(){var e=Object(m.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/v1/tournament",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E(a.name,O))});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,w.push("/tournament/".concat(r.id));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(h.a,{style:R},r.a.createElement(h.a.Header,{as:"h2"},"Torneo"),r.a.createElement(h.a.Body,null,r.a.createElement(h.a.Title,null,"Scegli un torneo"),r.a.createElement(b.a,{onSubmit:C},r.a.createElement(f.a,{components:{IndicatorSeparator:A},value:a,options:s,placeholder:"Crea/Cerca un torneo",isSearchable:!0,isClearable:!0,onChange:function(e){return o(e)},onCreateOption:function(e){var t=E(e);o(t),y((function(e){return[].concat(Object(d.a)(e),[t])}))}}),r.a.createElement("br",null),r.a.createElement(g.a,{type:"submit",size:"lg",variant:"outline-warning",disabled:!a},"Continua"))))},z=a(172),L=a(173),D=a(187),G=a(174),J=a(101),H=a(186),B=a(281),M=a(171),Z=a(292),W=a(88),_=a.n(W),U=a(82),V=a.n(U),$=a(37),q=a.n($);a(262);function K(){y(""),w(""),x(""),j("")}var X=[{dataField:"id",text:"ID",editable:!1},{dataField:"name",text:"Nome",headerClasses:"player-table-header-element",autoSelectText:!0,headerStyle:function(e,t){return{width:"20%"}},filter:Object(U.textFilter)({placeholder:"Filtra...",getFilter:function(e){return y=e}})},{dataField:"surname",text:"Cognome",headerClasses:"player-table-header-element",autoSelectText:!0,headerStyle:function(e,t){return{width:"20%"}},filter:Object(U.textFilter)({placeholder:"Filtra...",getFilter:function(e){return w=e}})},{dataField:"alias",text:"Alias",headerClasses:"player-table-header-element",headerStyle:function(e,t){return{width:"15%"}},autoSelectText:!0,filter:Object(U.textFilter)({placeholder:"Filtra...",getFilter:function(e){return x=e}})},{dataField:"role",text:"Roulo",headerClasses:"player-table-header-element",headerStyle:function(e,t){return{width:"15%"}},filter:Object(U.selectFilter)({placeholder:"Filtra...",options:{Portiere:"Portiere",Attaccante:"Attaccante",Master:"Master"},getFilter:function(e){return j=e}}),editor:{type:$.Type.SELECT,getOptions:function(e){return[{value:"Portiere",label:"Portiere"},{value:"Attaccante",label:"Attaccante"},{value:"Master",label:"Master"}]}}},{dataField:"email",text:"Email",headerStyle:function(e,t){return{width:"15%"}},headerClasses:"player-table-header-element",autoSelectText:!0},{dataField:"phone",headerStyle:function(e,t){return{width:"15%"}},text:"Telefono",headerClasses:"player-table-header-element",autoSelectText:!0},{dataField:"match_played",text:"Partite Giocate",hidden:!0},{dataField:"match_won",text:"Vittorie",hidden:!0},{dataField:"total_score",text:"Punteggio",hidden:!0}];function Y(e){return e?e.alias?e.alias:e.surname?"".concat(e.name," - ").concat(e.surname):e.name:""}function Q(e){return{id:null,name:"",surname:"",alias:"",label:e||"",role:"Portiere",email:"",phone:"",match_played:0,match_won:0,total_score:0,editable:!1}}var ee=function(e){return r.a.createElement("h3",null,r.a.createElement("b",null,"Gestione giocatori"))},te=a(286),ae=a(279),ne=a(289),re=a(280),oe=function(e){var t=e.message,a=e.show,n=e.onHide,o=void 0===n?function(){return a=!1}:n;return r.a.createElement(te.a,{show:a,onHide:o,size:"xl",centered:!0},r.a.createElement(te.a.Header,{closeButton:!0},r.a.createElement(te.a.Title,null,"Caricamento....")),r.a.createElement(te.a.Body,null,t),r.a.createElement(te.a.Footer,null,r.a.createElement(ae.a,{animation:"border",variant:"light"}),r.a.createElement(ae.a,{animation:"border",variant:"primary"}),r.a.createElement(ae.a,{animation:"border",variant:"secondary"}),r.a.createElement(ae.a,{animation:"border",variant:"success"}),r.a.createElement(ae.a,{animation:"border",variant:"danger"}),r.a.createElement(ae.a,{animation:"border",variant:"warning"}),r.a.createElement(ae.a,{animation:"border",variant:"info"}),r.a.createElement(ae.a,{animation:"border",variant:"dark"})))},ie=function(e){var t=e.message,a=e.type;return t&&""!==t?r.a.createElement(ne.a,{className:"rounded mr-2",key:"".concat(a,"-message"),show:""!==t},r.a.createElement(ne.a.Header,{closeButton:!1},r.a.createElement("strong",null,"Operazione completata !")),r.a.createElement(ne.a.Body,null,r.a.createElement(re.a,{variant:a},t))):null},le=function(e){function t(e){var a;return Object(z.a)(this,t),(a=Object(D.a)(this,Object(G.a)(t).call(this,e))).handleOnSelect=function(e,t){return a.setState((function(a){var n=a.selectedRows,r=!!n.find((function(t){return t.id===e.id}));return t?r?{selectedRows:n}:{selectedRows:[e].concat(Object(d.a)(n))}:r?{selectedRows:n.filter((function(t){return t.id!==e.id}))}:{selectedRows:n}})),!0},a.cellEditProps=q()({mode:a.props.isAuthenticated&&"Admin"===a.props.role?"click":"none",blurToSave:!0,autoSelectText:!0,afterSaveCell:function(e,t,a,n){Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/player",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return t=e.sent,e.next=5,t.json();case 5:case"end":return e.stop()}}),e)})))()}}),a.state={rows:[],selectedRows:[],isLoading:!1},a.handleOnSelect=a.handleOnSelect.bind(Object(J.a)(a)),a.deleteRow=a.deleteRow.bind(Object(J.a)(a)),a.addRow=a.addRow.bind(Object(J.a)(a)),a}return Object(H.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoading:!0},(function(){return Object(m.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/player/list",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t.setState({isLoading:!1,rows:n});case 7:case"end":return e.stop()}}),e)})))()}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addRow",value:function(){var e=this;this.setState({isLoading:!0},(function(){return Object(m.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/v1/player",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q())});case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,e.setState((function(e){return{rows:[n].concat(Object(d.a)(e.rows)),isLoading:!1}}));case 7:case"end":return t.stop()}}),t)})))()}))}},{key:"deleteRow",value:function(){var e=this,t=this.state.selectedRows;t&&this.setState({isLoading:!0},(function(){return Object(m.a)(u.a.mark((function a(){var n;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("/api/v1/player",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=a.sent,a.next=5,n.json();case 5:a.sent,e.setState((function(e){return{rows:e.rows.filter((function(e){return!t.find((function(t){return t.id===e.id}))})),selectedRows:[],isLoading:!1}}));case 7:case"end":return a.stop()}}),a)})))()}))}},{key:"render",value:function(){var e=this,t=this.state,a=(this.props,this.propsdeleteRow,this.deleteRow),n=this.addRow,o=t.rows,i=t.isLoading,l={mode:"checkbox",nonSelectable:o.filter((function(e){return!e.editable})).map((function(e){return e.id})),onSelect:this.handleOnSelect,onSelectAll:function(t,a){return a.forEach((function(a){return e.handleOnSelect(a,t)}))},style:{backgroundColor:"#c8e6c9"},selectColumnStyle:function(e){e.checked,e.disabled;var t=e.rowIndex;e.rowKey;return o[t].editable?{backgroundColor:"#28a745"}:{backgroundColor:"#dc3545"}}};return r.a.createElement(T.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{show:i,message:"Caricamento"}),r.a.createElement(B.a,null,r.a.createElement(M.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{horizontal:!0},r.a.createElement(g.a,{variant:"success",onClick:n,disabled:!I(t[0])},"Aggiungi giocatore"),r.a.createElement(g.a,{variant:"danger",onClick:a,disabled:!I(t[0])},"Calcella giocatore"),r.a.createElement(g.a,{variant:"dark",onClick:K.bind(e)},"Pulisci Filtri")),r.a.createElement(_.a,{wrapperClasses:"player-table",keyField:"id",data:o,columns:X,cellEdit:e.cellEditProps,selectRow:l,caption:r.a.createElement(ee,null),filter:V()(),headerClasses:"player-table-header",noDataIndication:"Nessun dato reperito",striped:!0,hover:!0,bootstrap4:!0})))))}))}}]),t}(r.a.Component),ce=a(291),se=a(282),ue=a(283),me=a(170),de=a(124),pe=a(176),fe=Object(pe.a)(),he=r.a.forwardRef((function(e,t){var a=Object(n.useState)(),o=Object(p.a)(a,2),i=o[0],l=o[1],c=e.row,s=e.columnIndex,u=e.id,m=e.onUpdate,d=e.onSelect,f=e.options;return r.a.createElement(de.a,{components:fe,options:f,onChange:function(e){e.pairId=u,l(e);var t=Y(e);m(t),d(e,c.id,s)},value:i,placeholder:"Cerca...",isSearchable:!0,isClearable:!0})})),be=function(e,t){return[{dataField:"id",text:"ID",editable:!1,hidden:!0,align:function(){return"center"}},{dataField:"rowNumber",text:"ID",editable:!1,align:function(){return"center"}},{dataField:"player1.alias",text:"Giocatore 1",align:function(){return"center"},editorRenderer:function(a,n,o,i,l,c){return r.a.createElement(he,Object.assign({},a,{id:c,row:o,rowIndex:l,columnIndex:c,value:n,onSelect:e,options:t}))},headerStyle:function(e,t){return{width:"20%"}}},{dataField:"player2.alias",text:"Giocatore 2",align:function(){return"center"},editorRenderer:function(a,n,o,i,l,c){return r.a.createElement(he,Object.assign({},a,{id:c,row:o,rowIndex:l,columnIndex:c,value:n,onSelect:e,options:t}))},headerStyle:function(e,t){return{width:"20%"}}},{dataField:"pairAlias",text:"Alias Coppia",headerStyle:function(e,t){return{width:"25%"}}},{dataField:"stage1Name",text:"Nome girone",align:function(){return"center"},headerStyle:function(e,t){return{width:"10%"}},editor:{type:$.Type.SELECT,options:"abcdefghijklmnopqrstuvwxyz".toUpperCase().split("").map((function(e){return{value:e,label:e}}))}},{dataField:"paid1",text:"Pagato 1",align:function(){return"center"},headerStyle:function(e,t){return{width:"7,5%"}},editor:{type:$.Type.CHECKBOX,value:"Si:No"},style:function(e,t,a,n){if("Si"!==e)return{backgroundColor:"#ffbf47"}}},{dataField:"paid2",text:"Pagato 2",align:function(){return"center"},headerStyle:function(e,t){return{width:"7,5%"}},editor:{type:$.Type.CHECKBOX,value:"Si:No"},style:function(e,t,a,n){if("Si"!==e)return{backgroundColor:"#ffbf47"}}}]};function ge(){return{id:null,rowNumber:null,tId:null,player1:Q(),player2:Q(),pairAlias:"",stage1Name:"",paid1:"No",paid2:"No"}}var ve=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/pair/list/?tId=".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.next=8,fetch(t?"/api/v1/player/list/".concat(t):"/api/v1/player/list",{method:"GET",headers:{"Content-Type":"application/json"}});case 8:return a=e.sent,e.next=11,a.json();case 11:return r=e.sent,o=[].concat(Object(d.a)(r),[Q("Nessun Giocatore")]),e.next=15,fetch("/api/v1/tournament/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 15:return a=e.sent,e.next=18,a.json();case 18:return i=e.sent,e.abrupt("return",{rows:n,players:o,tournament:i});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(e,t){Object(m.a)(u.a.mark((function a(){var n,r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("/api/v1/pair/list/?tId=".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=a.sent,a.next=5,n.json();case 5:r=a.sent,e(r);case 7:case"end":return a.stop()}}),a)})))()};function ye(e){return console.log("valueFormatter : ",e),e.pairAlias&&""!==e.pairAlias?"".concat(e.pairAlias," ( ").concat(e.id," )"):function(e){console.log("createAlias : ",e);var t="".concat(e.rowNumber," : "),a=e.player1,n=e.player2,r=e.id;return t+=a.alias?a.alias:a.name,t+=n.alias,t+=" ( ".concat(r," )")}(e)}var we=function(e){var t=e.tournament;return t?r.a.createElement("h3",null,r.a.createElement("p",null,r.a.createElement("b",null,'Torneo "',r.a.createElement("strong",null,null===t||void 0===t?void 0:t.name.toUpperCase()),'" ( ',null===t||void 0===t?void 0:t.id," )",r.a.createElement("small",null," - ",null===t||void 0===t?void 0:t.progress)))):null},xe=a(86),je=function(e){var t=e.addRow,a=e.optionsLength,n=a-1,o=n<8?8-n:0;return a?n>=8?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null," Aggiungi le coppie per questo torneo..."),r.a.createElement(g.a,{variant:"success",onClick:t},"Aggiungi Coppia")):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Ci sono solo ",n," giocatori definiti ma devono essercene almeno 8 per poter formare un torneo."),r.a.createElement("p",null,1===o?"Devi creare un altro giocatore...":"Devi creare almeno altri ".concat(o)),r.a.createElement(xe.b,{to:"/player"},r.a.createElement(g.a,{variant:"success"},"Gestione Giocatori"))):null},Oe=(a(269),function(){var e=Object(l.h)().tId;console.log("render pairs table : ",e);var t=Object(l.f)(),a=Object(n.useState)({state:!1,message:"Caricamento"}),o=Object(p.a)(a,2),i=o[0],c=o[1],s={message:"",type:"success"},f=Object(n.useState)(s),h=Object(p.a)(f,2),b=h[0],v=h[1],E=Object(n.useState)({tournament:null,rows:[],players:[]}),y=Object(p.a)(E,2),w=y[0],x=y[1],j=Object(n.useState)([]),S=Object(p.a)(j,2),k=S[0],N=S[1],F=Object(n.useState)(0),A=Object(p.a)(F,2),R=A[0],P=A[1],z=Object(n.useState)(0),L=Object(p.a)(z,2),D=L[0],G=L[1];function J(e){c({state:!1,message:e}),v({message:e,type:"danger"}),setTimeout((function(){return v(s)}),5e3)}function H(e){c({state:!1,message:e}),v({message:e,type:"success"}),setTimeout((function(){return v(s)}),5e3)}function W(e){return U.apply(this,arguments)}function U(){return(U=Object(m.a)(u.a.mark((function t(a){var n,r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c({state:!0,message:"Aggiunta riga in corso"}),(n=ge()).tId=e,t.next=6,fetch("/api/v1/pair",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:return r=t.sent,t.next=9,r.json();case 9:o=t.sent,n.id=o.id,n.rowNumber=a||w.rows.length+1,x((function(e){return{tournament:e.tournament,rows:[n].concat(Object(d.a)(e.rows)),players:e.players}})),H("Riga aggiunta"),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),J("Errore aggiunta riga");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}function V(){return $.apply(this,arguments)}function $(){return($=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=w.rows.length+1,a=0;case 2:if(!(a<D)){e.next=9;break}return e.next=5,W(t);case 5:t++;case 6:a++,e.next=2;break;case 9:G(0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return X.apply(this,arguments)}function X(){return(X=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({state:!0,message:k.length>1?"Cancellazione righe in corso":"Cancellazione riga in corso"}),t=[],k.forEach((function(e){e.player1.id&&t.push(e.player1),e.player2.id&&t.push(e.player2)})),t&&x((function(e){return{tournament:e.tournament,rows:e.rows,players:[].concat(t,Object(d.a)(e.players)).sort((function(e,t){return e.alias.localeCompare(t.alias)}))}})),e.next=7,fetch("/api/v1/pair",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});case 7:return a=e.sent,e.next=10,a.json();case 10:x((function(e){return{tournament:e.tournament,rows:e.rows.filter((function(e){return!k.find((function(t){return t.id===e.id}))})),players:e.players}})),H(k.length>1?"Righe cancellate":"Riga cancellata"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),J("Errore cancellazione riga");case 17:N([]);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function Y(e,t){e&&e.id?t.id?x((function(a){return{tournament:a.tournament,rows:a.rows,players:[].concat(Object(d.a)(a.players.filter((function(e){return e.id!==t.id}))),[e]).sort((function(e,t){return e.alias.localeCompare(t.alias)}))}})):x((function(t){return{tournament:t.tournament,rows:t.rows,players:[].concat(Object(d.a)(t.players),[e]).sort((function(e,t){return e.alias.localeCompare(t.alias)}))}})):t.id&&x((function(e){return{tournament:e.tournament,rows:e.rows,players:e.players.filter((function(e){return e.id!==t.id}))}}))}Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=x,t.next=3,ve(e);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})))()}),[e]);var ee=function(e,t,a){var n=w.rows.map((function(n){if(n.id===t){var r=n;return 1===a?e.id&&r.player2&&r.player2.id===e.id?(r.player1=Q(),J("Attenzione : Non puoi selezionare lo stesso giocare ! ")):(Y(r.player1,e),r.player1=e):e.id&&r.player1&&r.player1.id===e.id?(r.player2=Q(),J("Attenzione : Non puoi selezionare lo stesso giocare ! ")):(Y(r.player2,e),r.player2=e),fetch("/api/v1/pair",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),r}return n}));x((function(e){return{tournament:e.tournament,rows:n,players:e.players}}))},te=function(e,t){N((function(a){var n=!!a.find((function(t){return t.id===e.id}));return t?n?a:[e].concat(Object(d.a)(a)):n?a.filter((function(t){return t.id!==e.id})):a}))},ae=function(a){if(e||(J("Id torneo mancante. Verrai inviato alla Home tra 5 secondi...."),setTimeout((function(){return t.push("/")}),5e3)),w.rows.length<4)J("Numero di coppie insufficente. Devi formare almeno 4 coppie");else{var n=w.rows.filter((function(e){return!e.stage1Name||""===e.stage1Name})).map((function(e){return e.rowNumber}));if(0===n.length){var r=w.rows.filter((function(e){return null===e.player1.id||null===e.player2.id})).map((function(e){return e.rowNumber}));if(0===r.length){var o=[],i=w.rows.reduce((function(e,t){return t.stage1Name in e?e[t.stage1Name]++:e[t.stage1Name]=1,e}),{});for(var l in i)i[l]<=3&&o.push(l);o.length>0?J(1===o.length?"Il torneo ".concat(o," deve contenere almeno ").concat(4," coppie"):"I torneI ".concat(o," devono contenere almeno ").concat(4," coppie")):(w.tournament.progress=C,fetch("/api/tournament",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w.tournament)}),t.push("/stage1/".concat(e)))}else J("Assegna  i giocatori ".concat(1===r.length?"alla riga ":"alle righe "," ").concat(r," per procedere "))}else J("Assegna  ".concat(1===n.length?"la riga ":"le righe "," ").concat(n," ad un girone per procedere "))}};function ne(){t.push("/")}var re={mode:"checkbox",onSelect:te,onSelectAll:function(e,t){return t.forEach((function(t){return te(t,e)}))},style:{backgroundColor:"#c8e6c9"}};function le(){return de.apply(this,arguments)}function de(){return(de=Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c({state:!0,message:"Cancellazione in corso"}),t.next=4,fetch("/api/stage1",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({tId:e})});case 4:return a=t.sent,t.next=7,a.json();case 7:w.tournament.progress=O,fetch("/api/tournament",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w.tournament)}),H("Cancellazione completata"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),J("Errore cancellazione Fase 1");case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function pe(){return fe.apply(this,arguments)}function fe(){return(fe=Object(m.a)(u.a.mark((function e(){var t,a,n,r,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=3;break}return J("Specificare il numero di gironi da assegnare"),e.abrupt("return");case 3:c({state:!0,message:"Aggiornamento in corso"}),t=0,a="abcdefghijklmnopqrstuvwxyz".toUpperCase().split(""),n=[],e.t0=u.a.keys(w.rows);case 8:if((e.t1=e.t0()).done){e.next=29;break}return r=e.t1.value,o=w.rows[r],t==R&&(t=0),o.stage1Name=a[t],t++,e.prev=14,e.next=17,fetch("/api/v1/pair",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 17:return i=e.sent,e.next=20,i.json();case 20:n.push(o),e.next=27;break;case 23:e.prev=23,e.t2=e.catch(14),J("Errore"),n.push(o);case 27:e.next=8;break;case 29:H("Gironi assegnati correttamente"),x((function(e){return{tournament:e.tournament,rows:n,players:e.players}}));case 31:case"end":return e.stop()}}),e,null,[[14,23]])})))).apply(this,arguments)}var he=Math.floor(w.players.length-1-w.rows.reduce((function(e,t){return t.player1||t.player2?t.player1&&t.player2?t.player1.id||t.player2.id?t.player1.id&&t.player2.id?e:e+1:e+2:e+1:e+2}),0))/2,Ee=!(k.length>0)||"Stage1"===w.tournament.progress||"Stage2"===w.tournament.progress,ye="";return ye=k.length>0?"Stage1"===w.tournament.progress||"Stage2"===w.tournament.progress?"Devi prima resettare i gironi per poter cancellare delle coppie":"Cancella le coppie selezionate":"Seleziona almeno una riga",r.a.createElement(T.Consumer,null,(function(e){return r.a.createElement(B.a,null,r.a.createElement(oe,{show:i.state,message:i.message}),r.a.createElement(M.a,{style:{margin:"10px"},md:{span:1}},r.a.createElement(B.a,null,r.a.createElement(Z.a,null,r.a.createElement(Z.a.Item,{action:!0,variant:"primary",onClick:ae},"Prosegui"),r.a.createElement(Z.a.Item,{action:!0,variant:"secondary",onClick:ne},"Home"),r.a.createElement(Z.a.Item,{action:!0,variant:"success",onClick:function(){return W()},disabled:he<=0||!I(e[0])},"Aggiungi Coppia"),r.a.createElement(ce.a,{placement:"right",key:"rigth",overlay:r.a.createElement(se.a,null,ye)},r.a.createElement("span",{className:"d-inline-block",onClick:K},r.a.createElement(Z.a.Item,{action:!0,variant:"danger",style:{pointerEvents:"none"},disabled:Ee||!I(e[0])},"Elimina Coppia ",Ee))),r.a.createElement(Z.a.Item,{action:!0,variant:"danger",onClick:le,disabled:!I(e[0])},"Reset gironi")))),r.a.createElement(M.a,{style:{margin:"10px"}},r.a.createElement(B.a,{style:{display:I(e[0])?"flex":"none"}},r.a.createElement(ue.a,{onChange:function(e){return P(e.target.value)}},r.a.createElement(ue.a.Prepend,null,r.a.createElement(ue.a.Text,null,"Assegna gironi automaticamente")),r.a.createElement(me.a,{placeholder:w.rows.length<4?"Inserisci almeno 4 coppie":"Numero di gironi ( max ".concat(Math.floor(w.rows.length/4)," )"),"aria-label":"Numero di gironi",disabled:w.rows.length<4}),r.a.createElement(ue.a.Append,null,r.a.createElement(g.a,{variant:"primary",onClick:pe,disabled:!R||R>Math.floor(w.rows.length/4)||w.rows.length<4},"Esegui"))),r.a.createElement(ue.a,{onChange:function(e){return G(e.target.value)}},r.a.createElement(ue.a.Prepend,null,r.a.createElement(ue.a.Text,null,"Aggiunti N nuove coppie")),r.a.createElement(me.a,{disabled:he<=0,placeholder:he<=0?"Numero massimo di coppie gia creato sulla base del numero di giocatori disponibili":"Numero di coppie da aggiungere ( max ".concat(he," )"),"aria-label":"Numero di coppie",value:D||""}),r.a.createElement(ue.a.Append,null,r.a.createElement(g.a,{variant:"primary",onClick:function(e){return G(he)},disabled:D>he},"Max"),r.a.createElement(g.a,{variant:"primary",onClick:V,disabled:!D||D>he},"Esegui")))),r.a.createElement(B.a,null,r.a.createElement(_.a,{bootstrap4:!0,keyField:"id",data:w.rows,columns:be(ee,w.players),cellEdit:(t=I(e[0]),q()({mode:t?"click":"none",blurToSave:!0,afterSaveCell:function(e,t,a,n){"player1.alias"!==n.dataField&&"player2.alias"!==n.dataField&&Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/pair",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return t=e.sent,e.next=5,t.json();case 5:case"end":return e.stop()}}),e)})))()}})),selectRow:re,noDataIndication:r.a.createElement(je,{addRow:function(){return W()},optionsLength:w.players.length}),caption:r.a.createElement(we,{tournament:w.tournament}),wrapperClasses:"player-table",headerClasses:"player-table-header",striped:!0,hover:!0}))),r.a.createElement(M.a,{style:{margin:"10px"},md:2},r.a.createElement(ie,{message:b.message,type:b.type})));var t}))}),Ce=function(e){var t=e.title,a=e.saved,n={color:a?"#4feb34":void 0};return r.a.createElement("h3",null,r.a.createElement("b",{style:n},"Girone - ",r.a.createElement("strong",null,t)),a?r.a.createElement("small",null," - Salvataggio in corso..."):null)},Se=r.a.forwardRef((function(e,t){var a=Object(n.useState)([]),o=Object(p.a)(a,2),i=o[0],l=o[1],c=Object(n.useState)(),s=Object(p.a)(c,2),u=s[0],m=s[1],d=e.row,f=e.columnIndex,h=e.id,b=e.onUpdate,g=e.onSelect,v=e.tId;return Object(n.useEffect)((function(){return Ee(l,v)}),[v]),r.a.createElement(de.a,{options:i,onChange:function(e){e.pairId=h,m(e);var t=ye(e);b(t),g(e,d.id,f)},value:u,placeholder:"Cerca...",isSearchable:!0,isClearable:!0})})),ke=function(e,t){return{id:"col".concat(e),dataField:"col".concat(e),text:e.toString(),type:"number",headerStyle:function(e,a){return{width:"".concat(75/t,"%")}},headerAlign:function(e,t){return"center"},editable:function(e,t,a,n){return a!==n-2},align:function(e,t,a,n){return"center"},style:function(e,t,a,n){return a===n-2?{backgroundColor:"#6d706e"}:3===parseInt(e,10)||2===parseInt(e,10)?{backgroundColor:"rgb(196, 247, 160)"}:1===parseInt(e,10)||0===parseInt(e,10)?{backgroundColor:"rgb(255, 147, 147)"}:null},editor:{type:$.Type.SELECT,options:[{value:"3",label:"3"},{value:"2",label:"2"},{value:"1",label:"1"},{value:"0",label:"0"},{value:null,label:""}]}}};var Te=function(e,t){for(var a=[{id:"pairLabel",dataField:"pair.label",text:"Nome Coppia",editable:!1,headerStyle:function(e,t){return{width:"15%"}},align:function(e,t,a,n){return"center"},headerAlign:function(e,t){return"center"},editorRenderer:function(a,n,o,i,l,c){return r.a.createElement(Se,Object.assign({},a,{id:c,row:o,rowIndex:l,columnIndex:c,value:n,onSelect:e,tId:t[0].tId}))}},{id:"rowNumber",dataField:"rowNumber",text:"ID",editable:!1,type:"number",headerStyle:function(e,t){return{width:"5%"}},headerAlign:function(e,t){return"center"},style:function(e,t,a,n){return{backgroundColor:"#f9ffdb"}}}],n=0;n<t.length;n++)a.push(ke(n+1,t.length));return a.push({id:"totale",dataField:"total",text:"Totale",editable:!1,type:"number",headerStyle:function(e,t){return{width:"5%"}},headerAlign:function(e,t){return"center"}},{id:"place",dataField:"place",text:"Posizione",editable:!0,type:"number",headerStyle:function(e,t){return{width:"5%"}},headerAlign:function(e,t){return"center"}}),a};function Ne(e,t){return e.total===t.total?3===e["col".concat(t.rowNumber)]||2===e["col".concat(t.rowNumber)]?-1:1:t.total-e.total}a(271);var Ie=function(e){var t=e.rows,a=e.columns,o=e.tableName,i=e.updateCellValue,l=e.saved,c=Object(n.useState)([]),s=Object(p.a)(c,2),u=s[0],m=s[1],f=function(e,t){return m((function(){var a=!!u.find((function(t){return t.rowNumber===e.rowNumber}));return t?a?u:[e].concat(Object(d.a)(u)):a?u.filter((function(t){return t.rowNumber!==e.rowNumber})):u})),!0},h={mode:"checkbox",onSelect:f,onSelectAll:function(e,t){return t.forEach((function(t){return f(t,e)}))},style:{backgroundColor:"#c8e6c9"}};return r.a.createElement(T.Consumer,null,(function(e){return r.a.createElement(_.a,{bootstrap4:!0,keyField:"id",data:t,columns:a,selectRow:h,cellEdit:(n=I(e[0]),q()({mode:n?"click":"none",blurToSave:!0,beforeSaveCell:function(e,a,n,r){r.id.startsWith("col")&&(t[parseInt(r.text)-1]["col".concat(n.rowNumber)]=function(e){if(null===e)return null;switch(e){case 3:return 0;case 2:return 1;case 1:return 2;case 0:return 3;default:return null}}(a),Object(d.a)(t).sort((function(e,t){return Ne(e,t)})).forEach((function(e,a){return t[e.rowNumber-1].place=a+1})))},afterSaveCell:function(e,a,n,r){if(r.id.startsWith("col")){i(e,a,n,r);var o=0;for(var l in n)l.startsWith("col")&&(o+=n[l]);for(var c in t[n.rowNumber-1].total=o||null,o=0,t[parseInt(r.text)-1])c.startsWith("col")&&(o+=t[parseInt(r.text)-1][c]);t[parseInt(r.text)-1].total=o||null}}})),noDataIndication:"Nessun dato reperito",wrapperClasses:"player-table",headerClasses:"player-table-header",caption:r.a.createElement(Ce,{title:o,saved:l}),striped:!0,hover:!0});var n}))},Fe=function(e){var t,a,o=e.pairsList,i=Object(n.useState)(!1),l=Object(p.a)(i,2),c=l[0],s=l[1],f=Object(n.useState)(!1),h=Object(p.a)(f,2),b=h[0],g=h[1],v=Object(n.useState)(function(e){for(var t=[],a=0;a<e.length;a++){t.push({pair:e[a],rowNumber:a+1});for(var n=1;n<=e.length;n++)t[a]["col".concat(n)]=null;t[a].total=0,t[a].place=0,t[a].id="row-".concat(e[0].tId,"-").concat(a)}return t}(o)),E=Object(p.a)(v,2),y=E[0],w=E[1],x=null!==(t=null===(a=o[0])||void 0===a?void 0:a.stage1Name)&&void 0!==t?t:"Not found",j=function(){var e=Object(m.a)(u.a.mark((function e(t,a,n,r){var o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={tId:n.pair.tId,tableName:x,score:a,pair1Id:n.pair.id,pair2Id:y[parseInt(r.text)-1].pair.id},e.next=3,fetch("/api/v1/stage1/cell",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 3:return i=e.sent,e.next=6,i.json();case 6:i.ok&&(g(!0),setTimeout((function(){return g(!1)}),3e3));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){(function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,fetch("/api/v1/stage1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rows:y,stageName:x})});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,Object(d.a)(a).sort((function(e,t){return Ne(e,t)})).forEach((function(e,t){return a[e.rowNumber-1].place=t+1})),w(a),s(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return r.a.createElement(r.a.Fragment,null,c?r.a.createElement("h3",null,"Caricamento girone ",r.a.createElement("b",null,x)," in corso...."):r.a.createElement(Ie,{rows:y,columns:Te((function(){"1"===x&&console.log("onSelect ")}),o),tableName:x,updateCellValue:j,saved:b}))};var Ae=[{path:"/",label:"Home",exact:!0,component:P,visible:!1,private:!0,index:0},{path:"/tournament/:tId",label:"Selezione Coppie",exact:!0,component:Oe,visible:!1,private:!1,index:10},{path:"/stage1/:tId",label:"Torneo fase 1",exact:!0,component:function(){var e=Object(l.h)().tId,t=Object(n.useState)([]),a=Object(p.a)(t,2),o=a[0],i=a[1],c=Object(l.f)();return Object(n.useEffect)((function(){return Ee(i,e)}),[e]),o.sort((function(e,t){return e.stage1Name.localeCompare(t.stage1Name)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a.Item,{key:"stage-button"},r.a.createElement(g.a,{variant:"secondary",onClick:function(){c.push("/tournament/".concat(e))}},"Gestione Coppie")),function(e,t){var a="",n=[],o=[];e.forEach((function(e,t){""===a&&(a=e.stage1Name),a!==e.stage1Name&&(o.push(r.a.createElement(Z.a.Item,{key:"stage-".concat(a)},r.a.createElement(Fe,{pairsList:n}))),a=e.stage1Name,n=[]),n.push(e)})),n.length>0&&o.push(r.a.createElement(Z.a.Item,{key:"stage-".concat(a)},r.a.createElement(Fe,{pairsList:n})));return r.a.createElement(Z.a,{variant:"flush"},o)}(o))},visible:!1,private:!0,index:20},{path:"/player",label:"Gestione Giocatori",exact:!0,component:le,visible:!0,private:!0,index:30},{path:"/stage2/:tId",label:"Torneo fase 2",exact:!0,component:function(e){for(var t={flexDirection:"column",alignItems:"stretch"},a={display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"space-around"},n=[],o=0;o<=4;o++){for(var i=[],l=0;l<Math.pow(2,o);l++)i.push(r.a.createElement(Z.a.Item,{key:"item-".concat(o,"-").concat(l),style:t},r.a.createElement(ue.a,null,r.a.createElement(me.a,{placeholder:"".concat(o,"-").concat(l)}))));n.push(r.a.createElement(Z.a.Item,{key:"col-".concat(o),style:a},r.a.createElement(Z.a,{variant:"flush"},i)))}return r.a.createElement(Z.a,{variant:"flush",id:"outer-container",style:{flexDirection:"row-reverse"}},n)},visible:!1,private:!0,index:40},{path:"*",label:"Not Found",exact:!1,component:function(e){var t=Object(l.g)();return r.a.createElement("div",null,r.a.createElement("h1",null,"Current Ruote : ",r.a.createElement("code",null,t.pathname)))},visible:!1,private:!0,index:1e3}],Re=Ae;var Pe=a(179),ze=a.n(Pe),Le=a(285),De=a(288),Ge=a(290),Je=a(284),He=a(16),Be=a(46),Me=function(){return n.createElement(He.c,null,n.createElement(B.a,null,n.createElement(M.a,null,n.createElement("label",{htmlFor:"name"},"Nome"),n.createElement(He.b,{as:me.a,id:"name",name:"name",placeholder:"Nome",type:"text"}),n.createElement(He.a,{name:"name"})),n.createElement(M.a,null,n.createElement("label",{htmlFor:"surname"},"Cognome"),n.createElement(He.b,{as:me.a,id:"surname",name:"surname",placeholder:"Cognome",type:"text"}),n.createElement(He.a,{name:"surname"}))),n.createElement(B.a,null,n.createElement(M.a,{md:6},n.createElement("label",{htmlFor:"password"},"Password"),n.createElement(He.b,{as:me.a,id:"password",name:"password",placeholder:"Password",type:"password"}),n.createElement(He.a,{name:"password"}),n.createElement("label",{htmlFor:"passwordConfirm"},"Conferma Password"),n.createElement(He.b,{as:me.a,id:"passwordConfirm",name:"passwordConfirm",placeholder:"Conferma Password",type:"password"}),n.createElement(He.a,{name:"passwordConfirm"})),n.createElement(M.a,{md:6,style:{display:"flex",alignItems:"center"}},n.createElement(B.a,null,n.createElement("strong",null,"La password deve rispettara i sequenti criteri :"),n.createElement("ul",null,n.createElement("li",{key:"pass-1"},"Almeno 1 carattere minuscolo"),n.createElement("li",{key:"pass-2"},"Almeno 1 carattere maiuscolo"),n.createElement("li",{key:"pass-3"},"Almeno 1 carattere numerico"),n.createElement("li",{key:"pass-4"},"Almeno 1 carattere speciale"),n.createElement("li",{key:"pass-5"},"Tra 8 e 16 caratteri"))))),n.createElement(B.a,null,n.createElement(M.a,null,n.createElement("label",{htmlFor:"email"},"Email"),n.createElement(He.b,{as:me.a,id:"email",name:"email",placeholder:"Email",type:"email"}),n.createElement(He.a,{name:"email"})),n.createElement(M.a,null,n.createElement("label",{htmlFor:"emailConfirm"},"Conferma Email"),n.createElement(He.b,{as:me.a,id:"emailConfirm",name:"emailConfirm",placeholder:"Conferma Email",type:"email"}),n.createElement(He.a,{name:"emailConfirm"}))),n.createElement(B.a,null,n.createElement(M.a,{md:12},n.createElement("label",{htmlFor:"phone"},"Telefono"),n.createElement(He.b,{as:me.a,id:"phone",name:"phone",placeholder:"Telefono",type:"text"}),n.createElement(He.a,{name:"phone"}))),n.createElement(B.a,null,n.createElement(M.a,null,n.createElement(g.a,{type:"submit"},"Conferma"))))},Ze={name:"",surname:"",password:"",passwordConfirm:"",email:"",emailConfirm:"",phone:"",birthday:new Date},We=Be.b().shape({name:Be.c(),surname:Be.c(),password:Be.c(),email:Be.c(),phone:Be.c(),birthday:Be.a()}),_e=function(e){var t=e.onSubmit;return n.createElement(He.d,{validationSchema:We,initialValues:Ze,onSubmit:t},n.createElement(Me,null))},Ue=function(){return n.createElement(He.c,null,n.createElement(B.a,null,n.createElement(M.a,null,n.createElement("label",{htmlFor:"email"},"Email"),n.createElement(He.b,{as:me.a,id:"email",name:"email",placeholder:"Email",type:"email"}),n.createElement(He.a,{name:"email"}))),n.createElement(B.a,null,n.createElement(M.a,null,n.createElement("label",{htmlFor:"password"},"Password"),n.createElement(He.b,{as:me.a,id:"password",name:"password",placeholder:"Password",type:"password"}),n.createElement(He.a,{name:"password"}))),n.createElement(B.a,null,n.createElement(M.a,null,n.createElement(g.a,{type:"submit"},"Login"))))},Ve={email:"",password:""},$e=Be.b().shape({password:Be.c(),email:Be.c()}),qe=function(e){var t=e.onSubmit;return n.createElement(He.d,{validationSchema:$e,initialValues:Ve,onSubmit:t},n.createElement(Ue,null))},Ke=a(183),Xe=a(78),Ye=function(e){var t=e.show,a=e.onHide,o=Object(n.useState)(!1),i=Object(p.a)(o,2),c=i[0],s=i[1],d=Object(n.useState)(""),f=Object(p.a)(d,2),h=f[0],b=f[1],v=N(),E=Object(p.a)(v,2),y=E[0],w=E[1],x=Object(l.f)(),j=Object(Xe.a)({prefix:"far",iconName:"arrow-alt-circle-right"}),O=function(){var e=Object(m.a)(u.a.mark((function e(t,n){var r,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.setSubmitting)(!0),e.prev=2,I(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,fetch("/api/v1/auth/authenticate",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 7:return o=e.sent,e.next=10,o.json();case 10:i=e.sent,console.log("onSubmitLogin : ",o,i),o.ok&&i?(w(Object(S.a)({},y,{name:i.name,surname:i.surname,email:i.email,role:i.role,isAuthenticated:!0})),a(),x.push("/")):(401===o.status&&b("Utente o Password errata"),setTimeout((function(){return b("")}),3e3)),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),console.log("onSubmitLogin : ",e.t0),b("Errore durante il processo di registrazione. Riprovare piu tardi"),setTimeout((function(){return b("")}),3e3);case 20:r(!1);case 21:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,a){return e.apply(this,arguments)}}(),C=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"),k=new RegExp("^d{10}$"),T=new RegExp("^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$"),I=function(e){return b(""),e.email&&T.test(e.email)?!!e.password||(b("Inserisci la password"),setTimeout((function(){return b("")}),3e3),!1):(b("Email non valida"),setTimeout((function(){return b("")}),3e3),!1)},F=function(){var e=Object(m.a)(u.a.mark((function e(t,n){var r,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.setSubmitting)(!0),e.prev=2,l=t,b(""),l.name?l.surname?l.password&&l.passwordConfirm&&C.test(l.password)&&C.test(l.passwordConfirm)?l.password!==l.passwordConfirm?(b("Le password non corrispondono"),setTimeout((function(){return b("")}),3e3),0):l.email&&l.emailConfirm&&T.test(l.email)&&T.test(l.emailConfirm)?l.email!==l.emailConfirm?(b("Le email non corrispondono"),setTimeout((function(){return b("")}),3e3),0):l.phone&&!k.test(l.phone)||(b("Il numero di telefono inserito non \xe8 valido"),setTimeout((function(){return b("")}),3e3),0):(b("Inserisci una email valida"),setTimeout((function(){return b("")}),3e3),0):(b("La password non rispetta i criteri"),setTimeout((function(){return b("")}),3e3),0):(b("Inserisci il cognome"),setTimeout((function(){return b("")}),3e3),0):(b("Inserisci il nome"),setTimeout((function(){return b("")}),3e3),0)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,fetch("/api/v1/auth/register",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 7:return o=e.sent,e.next=10,o.json();case 10:i=e.sent,o.ok&&i?(w(Object(S.a)({},y,{name:i.name,surname:i.surname,email:i.email,role:i.role,isAuthenticated:!0})),a(),x.push("/")):(b("Errore durante il processo di registrazione. Riprovare piu tardi"),setTimeout((function(){return b("")}),3e3)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),b("Errore durante il processo di registrazione. Riprovare piu tardi"),setTimeout((function(){return b("")}),3e3);case 18:r(!1);case 19:case"end":return e.stop()}var l}),e,null,[[2,14]])})));return function(t,a){return e.apply(this,arguments)}}(),A=c?"Registrati":"Login",R=c?r.a.createElement(_e,{onSubmit:F}):r.a.createElement(qe,{onSubmit:O}),P=c?"Login":"Registrati",z=r.a.createElement(Ke.a,{icon:j});return r.a.createElement(te.a,{show:t,onHide:a,size:"lg",centered:!0},r.a.createElement(te.a.Header,{closeButton:!0},r.a.createElement(te.a.Title,null,A)),r.a.createElement(te.a.Body,null,r.a.createElement(Je.a,{fluid:!0},h?r.a.createElement(re.a,{key:"auth-alert",variant:"danger"},h):null,R)),r.a.createElement(te.a.Footer,null,r.a.createElement(g.a,{onClick:function(){return s(!c)}},r.a.createElement("div",null,z," ",r.a.createElement("strong",null,P)))))},Qe=function(e){var t=N(),a=Object(p.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(p.a)(l,2),s=c[0],d=c[1],f=function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/auth/logout");case 2:e.sent.ok&&i(Object(S.a)({},o,{name:"",surname:"",email:"",role:"",isAuthenticated:!1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h={backgroundImage:"url(".concat(ze.a,")"),backgroundSize:"cover",padding:"60px 0px 10px 0px"},b={color:"##ffc107",padding:"1vw"};return r.a.createElement("header",null,r.a.createElement(Le.a,{style:h},r.a.createElement("h1",null,r.a.createElement("strong",{style:{color:"white"}},"Calcetto C.S.M")),r.a.createElement(De.a,{sticky:"top",collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(De.a.Brand,{href:"/"},"Home"),r.a.createElement(De.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(De.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(Ge.a,{className:"mr-auto"},Re.map((function(e){return e.visible?e.private&&!o.isAuthenticated?null:r.a.createElement(Ge.a.Link,{key:e.index,href:e.path},e.label):null}))),o.isAuthenticated&&o.name?r.a.createElement(r.a.Fragment,null,r.a.createElement(De.a.Text,{style:b},r.a.createElement("strong",null,o.name)),r.a.createElement(g.a,{variant:"outline-warning",onClick:f},"Log out")):r.a.createElement(g.a,{variant:"outline-warning",onClick:function(){return d(!0)}},"Log in")),r.a.createElement(Ye,{show:s,onHide:function(){return d(!1)}}))))},et=a(184),tt=a(185);Xe.c.add(et.a,tt.a);var at=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(Qe,null),r.a.createElement(Je.a,{fluid:!0},r.a.createElement(l.c,null,Re.map((function(e){return r.a.createElement(c,Object.assign({},e,{key:e.index}))})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(e){var t=e.children,a=Object(n.useState)(k),o=Object(p.a)(a,2),i=o[0],l=o[1],c=[i,l];return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/auth/");case 2:return t=e.sent,e.next=5,t.json();case 5:(a=e.sent)&&l(Object(S.a)({isAuthenticated:!0},a));case 7:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(T.Provider,{value:c},t)}),null,r.a.createElement(xe.a,null,r.a.createElement(at,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[188,1,2]]]);
//# sourceMappingURL=main.7d3eb683.chunk.js.map