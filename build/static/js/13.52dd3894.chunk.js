(this.webpackJsonpcalcetto=this.webpackJsonpcalcetto||[]).push([[13],{225:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));var r=t(29),n=t(0),l=function(e){var a=Object(n.useState)(e),t=Object(r.a)(a,2),l=t[0],o=t[1];return{value:l,setValue:o,reset:function(){return o("")},bind:{value:l,onChange:function(e){o(e.target.value)}}}}},229:function(e,a,t){"use strict";function r(){var e=new Date,a=String(e.getDate()).padStart(2,"0"),t=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return"".concat(r,"-").concat(t,"-").concat(a)}t.d(a,"b",(function(){return r})),t.d(a,"c",(function(){return n})),t.d(a,"a",(function(){return l}));new RegExp("^d{10}$");var n=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,16})"),l=new RegExp("^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$")},325:function(e,a,t){},334:function(e,a,t){"use strict";t.r(a);var r=t(29),n=t(0),l=t.n(n),o=t(254),c=t(202),s=t(198),i=t(201),u=t(43),m=t.n(u),d=t(50),p=t(55),b=t(225),E=t(251),g=t(215),f=t(33),h=t(13),v=t(76),j=t.n(v),O=t(224),w=(t(325),t(229)),y=[{value:"No",label:"Non sono un giocatore"},{value:"Portiere",label:"Portiere"},{value:"Attaccante",label:"Attaccante"},{value:"Master",label:"Master"}],x=function(e){var a=e.setErrorMessage,t=Object(f.d)(),n=Object(r.a)(t,2),o=n[0],c=n[1],s=Object(h.g)(),u=Object(b.a)(""),v=u.value,x=u.bind,C=u.reset,I=Object(b.a)(""),L=I.value,S=I.bind,A=I.reset,R=Object(b.a)(""),P=R.value,z=R.bind,N=R.reset,q=Object(b.a)(""),G=q.value,M=q.bind,T=q.reset,Z=Object(b.a)(""),D=Z.value,F=Z.bind,U=Z.reset,J=Object(b.a)(""),V=J.value,$=J.bind,B=J.reset,H=Object(b.a)(""),Y=H.value,_=H.bind,K=H.reset,Q=Object(b.a)(""),W=Q.value,X=Q.bind,ee=Q.reset,ae=Object(b.a)(""),te=ae.value,re=ae.setValue,ne=ae.reset,le=Object(b.a)({value:"No",label:"Non sono un giocatore"}),oe=le.value,ce=le.setValue,se=le.reset,ie=function(e){a(e),setTimeout((function(){return a("")}),3e3)},ue=function(){var e=Object(p.a)(m.a.mark((function e(a){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),v?L?P?G?w.a.test(G)?D?w.a.test(D)?G!==D?(ie("Le email non corrispondono"),0):V?w.c.test(V)?Y?w.c.test(Y)?V===Y||(ie("Le password non corrispondono"),0):(ie("La password non rispetta i criteri"),0):(ie("Inserire la conferma password"),0):(ie("La password non rispetta i criteri"),0):(ie("Inserire una password"),0):(ie("Inserire una email valida"),0):(ie("Inserire la conferma email"),0):(ie("Inserire una email valida"),0):(ie("Inserire una email"),0):(ie("Inserire il cognome"),0):(ie("Inserire il nome"),0):(ie("Scegli uno username"),0)){e.next=3;break}return e.abrupt("return");case 3:return t={username:v,name:L,surname:P,email:G,cEmail:D,password:V,cPassword:Y,phone:W,birthday:te,playerRole:oe},e.prev=4,e.next=7,fetch("/api/v1/auth/register",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 7:return r=e.sent,e.next=10,r.json();case 10:if(n=e.sent,!r.ok||!n){e.next=16;break}c(Object(d.a)({},o,{name:n.name,surname:n.surname,email:n.email,role:n.role,isAuthenticated:!0})),s.push("/"),e.next=24;break;case 16:e.t0=r.status,e.next=401===e.t0?19:403===e.t0?21:23;break;case 19:return ie("Utente o Password errata"),e.abrupt("break",24);case 21:return ie("Utente o Password gia registrati"),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(4),console.error("onSubmitLogin : ",e.t1),ie("Errore durante il processo di registrazione. Riprovare piu tardi");case 30:case"end":return e.stop()}}),e,null,[[4,26]])})));return function(a){return e.apply(this,arguments)}}();return l.a.createElement(E.a,{onSubmit:ue},l.a.createElement(E.a.Row,null,l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"username"},l.a.createElement(E.a.Label,null,"Username"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"text",placeholder:"username"},x)))),l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"name"},l.a.createElement(E.a.Label,null,"Nome"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"text",placeholder:"Nome"},S)))),l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"surname"},l.a.createElement(E.a.Label,null,"Cognome"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"text",placeholder:"Cognome"},z))))),l.a.createElement(E.a.Row,null,l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"email"},l.a.createElement(E.a.Label,null,"Email"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"email",placeholder:"Email"},M)))),l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"cemail"},l.a.createElement(E.a.Label,null,"Conferma Email"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"email",placeholder:"Conferma Email"},F))))),l.a.createElement(E.a.Row,null,l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"password"},l.a.createElement(E.a.Label,null,"Password"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"password",placeholder:"Password"},$))),l.a.createElement(E.a.Group,{controlId:"cpassword"},l.a.createElement(E.a.Label,null,"Conferma Password"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"password",placeholder:"Conferma Password"},_)))),l.a.createElement(g.a,{md:6,style:{display:"flex",alignItems:"center"}},l.a.createElement("ul",null,l.a.createElement("strong",null,"La password deve rispettare i sequenti criteri :"),l.a.createElement("li",{key:"pass-1"},"Almeno 1 carattere minuscolo"),l.a.createElement("li",{key:"pass-2"},"Almeno 1 carattere maiuscolo"),l.a.createElement("li",{key:"pass-3"},"Almeno 1 carattere numerico"),l.a.createElement("li",{key:"pass-5"},"Tra 8 e 16 caratteri")))),l.a.createElement(E.a.Row,null,l.a.createElement(g.a,{md:3},l.a.createElement(E.a.Group,{controlId:"phone"},l.a.createElement(E.a.Label,null,"Telefono"),l.a.createElement(E.a.Control,Object.assign({type:"text",placeholder:"Telefono"},X)))),l.a.createElement(g.a,{md:3},l.a.createElement(E.a.Group,{controlId:"birthday"},l.a.createElement(E.a.Label,null,"Data di nascita"),l.a.createElement(j.a,{className:"datepicker",dateFormat:"dd/MM/yyyy",required:!0,selected:te,onChange:function(e){return re(e)}}))),l.a.createElement(g.a,{md:6},l.a.createElement(E.a.Group,null,l.a.createElement(E.a.Label,null,"Ruolo"),l.a.createElement(O.a,{dateFormat:"dd/MM/yyyy",value:oe,onChange:function(e){return ce(e)},options:y,styles:k}),l.a.createElement(E.a.Text,{className:"text-muted default-color-green"},"Sei un giocatore? Assegna qui il tuo ruolo.")))),l.a.createElement(i.a,{variant:"outline-success",type:"submit",size:"lg"},"Registrati"),l.a.createElement(i.a,{variant:"outline-danger",className:"float-right",onClick:function(){C(),A(),N(),T(),U(),B(),K(),ee(),ne(),se()},type:"submit",size:"lg"},"Reset"))},k={control:function(e){return Object(d.a)({},e,{height:"38px"})},input:function(e){return Object(d.a)({},e,{height:"38px"})},option:function(e,a){a.data,a.isDisabled,a.isFocused,a.isSelected;return Object(d.a)({},e,{color:"black"})},placeholder:function(e){return Object(d.a)({},e,{height:"38px"})},singleValue:function(e,a){a.data;return Object(d.a)({},e,{height:"38px"})},clearIndicator:function(e){return Object(d.a)({},e,{height:"38px"})},indicatorSeparator:function(e){return Object(d.a)({},e)}},C=function(e){var a=e.setErrorMessage,t=Object(h.g)(),n=Object(f.d)(),o=Object(r.a)(n,2),c=o[0],s=o[1],u=Object(b.a)(""),g=u.value,v=u.bind,j=Object(b.a)(""),O=j.value,w=j.bind,y=function(e){a(e),setTimeout((function(){return a("")}),3e3)},x=function(){var e=Object(p.a)(m.a.mark((function e(a){var r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),g&&""!==g){e.next=4;break}return y("Inserire username o password"),e.abrupt("return");case 4:if(O&&""!==O){e.next=7;break}return y("Inserire la password"),e.abrupt("return");case 7:return e.prev=7,e.next=10,fetch("/api/v1/auth/authenticate",{method:"POST",body:JSON.stringify({username:g,password:O}),headers:{"Content-Type":"application/json"}});case 10:return r=e.sent,e.next=13,r.json();case 13:n=e.sent,r.ok&&n?(s(Object(d.a)({},c,{},n,{isAuthenticated:!0})),t.push("/")):401===r.status&&y("Utente o Password errata"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(7),console.log("onSubmitLogin : ",e.t0),y("Errore durante il processo di registrazione. Riprovare piu tardi");case 21:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(a){return e.apply(this,arguments)}}();return l.a.createElement(E.a,{onSubmit:x},l.a.createElement(E.a.Group,{controlId:"username"},l.a.createElement(E.a.Label,null,"Username o Email"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"text",placeholder:"username o email"},v))),l.a.createElement(E.a.Group,{controlId:"password"},l.a.createElement(E.a.Label,null,"Password"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"password",placeholder:"Password"},w))),l.a.createElement(i.a,{size:"lg",variant:"outline-success",type:"submit"},"Login"))},I=t(326),L=t(98);a.default=function(){var e=Object(n.useState)(!1),a=Object(r.a)(e,2),t=a[0],u=a[1],m=Object(n.useState)(""),d=Object(r.a)(m,2),p=d[0],b=d[1],E=Object(L.a)({prefix:"far",iconName:"arrow-alt-circle-right"}),g=t?"Registrati":"Login",f=t?l.a.createElement(x,{setErrorMessage:b}):l.a.createElement(C,{setErrorMessage:b}),h=t?"Login":"Registrati",v=l.a.createElement(I.a,{icon:E}),j={textAlign:"left",width:t?"50vw":"40vw",height:"auto",margin:"auto",color:"white"};return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{style:j,className:"default-background"},l.a.createElement(o.a.Header,{as:"h2"},g),l.a.createElement(o.a.Body,null,l.a.createElement(c.a,null,p?l.a.createElement(s.a,{key:"auth-alert",variant:"danger"},p):null,f)),l.a.createElement(o.a.Footer,null,l.a.createElement(i.a,{variant:"outline-warning",onClick:function(){return u(!t)}},l.a.createElement("div",null,v," ",l.a.createElement("strong",null,h))))))}}}]);
//# sourceMappingURL=13.52dd3894.chunk.js.map