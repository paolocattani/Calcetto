{"version":3,"sources":["components/core/icons.tsx","components/core/utils.ts","selectors/tournament.selector.ts","components/Tournament/helper.tsx","components/Tournament/new.tsx","components/Tournament/select.tsx"],"names":["Icon","size","prefix","iconName","color","icon","findIconDefinition","TrashIcon","SaveIcon","RightArrowIcon","ToggleOn","ToggleOff","TrophyIcon","DoubleRightIcon","BanIcon","getTodayDate","formatDate","Date","translateTournamentProgress","value","TournamentProgress","New","PairsSelection","Stage1","Stage2","date","d","month","getMonth","day","getDate","year","getFullYear","length","join","RegExp","passwordRegExp","emailRegExp","getBaseLog","x","y","Math","log","TournamentSelector","isLoading","tournamentState","getTournament","tournament","getTournamentsList","tournamentsList","getEmptyTournament","name","progress","id","ownerId","public","label","IndicatorSeparator","innerProps","style","indicatorSeparatorStyle","alignSelf","backgroundColor","marginBottom","marginTop","marginRight","width","cardStyle","margin","borderColor","borderWidth","textAlign","NewTournament","showMessage","currentHistory","useHistory","dispatch","useDispatch","useState","setName","setDate","visible","setVisible","handleSubmit","evt","a","preventDefault","model","TournamentAction","saveTournament","request","push","Form","onSubmit","Row","Col","md","Group","controlId","Label","Control","type","required","placeholder","maxLength","onChange","event","currentTarget","as","highlightDates","locale","selected","dateFormat","newValue","Button","variant","className","fontSize","fontWeight","getOptionLabel","withRouter","session","useSelector","SessionSelector","getSession","newTournament","setNewTournament","messageInitialState","message","setMessage","useEffect","console","getTournaments","setTimeout","onNewTournament","setTournament","span","offset","sm","Card","Header","Body","isAdmin","htmlFor","components","styles","customStyles","options","isSearchable","isClearable","disabled","padding","Footer","onClick","option","provided","control","height","singleValue","valueContainer"],"mappings":"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","file":"static/js/14.6b9c4ec2.chunk.js","sourcesContent":["import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { findIconDefinition, SizeProp, IconPrefix, IconName } from '@fortawesome/fontawesome-svg-core';\r\n\r\ninterface IconProps {\r\n  color?: string;\r\n  size?: SizeProp;\r\n}\r\n\r\ninterface AbstractIconProps extends IconProps {\r\n  prefix: IconPrefix;\r\n  iconName: IconName;\r\n}\r\n\r\nconst Icon: React.FC<AbstractIconProps> = ({ size, prefix, iconName, color }) => (\r\n  <FontAwesomeIcon color={color} size={size} icon={findIconDefinition({ prefix, iconName })} />\r\n);\r\n\r\n// Regular\r\nexport const TrashIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"far\" iconName=\"trash-alt\" />\r\n);\r\nexport const SaveIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"far\" iconName=\"save\" />\r\n);\r\nexport const RightArrowIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} prefix=\"fas\" iconName=\"arrow-alt-circle-right\" />\r\n);\r\n\r\n// Solid\r\nexport const ToggleOn: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"toggle-on\" />\r\n);\r\nexport const ToggleOff: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"toggle-off\" />\r\n);\r\nexport const PlusIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"plus\" />\r\n);\r\nexport const TrophyIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"trophy\" />\r\n);\r\nexport const DoubleRightIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"angle-double-right\" />\r\n);\r\nexport const BanIcon: React.FC<IconProps> = ({ size, color }) => (\r\n  <Icon size={size} color={color} prefix=\"fas\" iconName=\"ban\" />\r\n);\r\n","import { TournamentProgress } from '../../models/tournament.model';\r\n\r\nexport const getTodayDate = () => formatDate(new Date());\r\n\r\nexport function translateTournamentProgress(value: string) {\r\n  switch (value) {\r\n    case TournamentProgress.New:\r\n      return 'Nuovo';\r\n    case TournamentProgress.PairsSelection:\r\n      return 'Selezione Coppie';\r\n    case TournamentProgress.Stage1:\r\n      return 'Fase 1';\r\n    case TournamentProgress.Stage2:\r\n      return 'Fase 2';\r\n    default:\r\n      return '';\r\n  }\r\n}\r\n\r\nexport function formatDate(date: Date) {\r\n  var d = new Date(date),\r\n    month = '' + (d.getMonth() + 1),\r\n    day = '' + d.getDate(),\r\n    year = d.getFullYear();\r\n\r\n  if (month.length < 2) month = '0' + month;\r\n  if (day.length < 2) day = '0' + day;\r\n\r\n  return [year, month, day].join('/');\r\n}\r\n\r\nexport function getRandomIntInclusive(min: number, max: number) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive\r\n}\r\n\r\nexport const phoneRegExp = new RegExp('^d{10}$');\r\nexport const passwordRegExp = new RegExp('^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,16})');\r\nexport const emailRegExp = new RegExp(\r\n  // eslint-disable-next-line quotes\r\n  \"^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$\"\r\n);\r\n\r\nexport function getBaseLog(x: number, y: number) {\r\n  return Math.log(y) / Math.log(x);\r\n}\r\n","import { RootState } from 'models/common.model';\r\nimport { TournamentDTO } from 'models/tournament.model';\r\n\r\n// Get state from store\r\nexport const TournamentSelector = {\r\n  isLoading({ tournamentState: { isLoading } }: RootState): boolean {\r\n    return isLoading;\r\n  },\r\n  // Get selected Tournament\r\n  getTournament({ tournamentState: { tournament } }: RootState): TournamentDTO | null {\r\n    return tournament;\r\n  },\r\n  // Get tournament List\r\n  getTournamentsList({ tournamentState: { tournamentsList } }: RootState): TournamentDTO[] {\r\n    return tournamentsList;\r\n  },\r\n};\r\n","import React, { CSSProperties } from 'react';\r\nimport { getTodayDate } from '../core/utils';\r\nimport { useState } from 'react';\r\nimport { TournamentDTO, TournamentProgress } from 'models/tournament.model';\r\n\r\nexport function fetchTournaments(setterFunction: typeof useState, setterFunction2: typeof useState): void {\r\n  (async () => {\r\n    const response = await fetch('/api/v1/tournament/list', {\r\n      method: 'GET',\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n    const result: TournamentDTO[] = await response.json();\r\n    let found = result.find((e) => e.name === getTodayDate());\r\n    let tmp = found ? [found, ...result] : result;\r\n    tmp.sort();\r\n    setterFunction(tmp);\r\n    if (setterFunction2) setterFunction2(tmp[0]);\r\n  })();\r\n}\r\n\r\nexport function fetchTournament(setterFunction: typeof useState, tId: number): void {\r\n  (async () => setterFunction(await getTournament(tId)))();\r\n}\r\n\r\nexport async function getTournament(tId: number): Promise<TournamentDTO | null> {\r\n  const response = await fetch(`/api/v1/tournament/${tId}`, {\r\n    method: 'GET',\r\n    headers: { 'Content-Type': 'application/json' },\r\n  });\r\n  const result: TournamentDTO = await response.json();\r\n  return response.ok ? result : null;\r\n}\r\n\r\nexport function getEmptyTournament(name: string, progress?: TournamentProgress): TournamentDTO {\r\n  return {\r\n    id: null,\r\n    name: name || '',\r\n    ownerId: null,\r\n    date: new Date(),\r\n    progress: progress || TournamentProgress.New,\r\n    public: true,\r\n    label: name || '',\r\n  };\r\n}\r\n\r\n// -------------------------------------------------\r\n// https://react-select.com/components#components\r\n// Indicator Separator\r\n\r\nexport const IndicatorSeparator = ({ innerProps }: any) => <span style={indicatorSeparatorStyle} {...innerProps} />;\r\nexport const indicatorSeparatorStyle: CSSProperties = {\r\n  alignSelf: 'stretch',\r\n  backgroundColor: 'green',\r\n  marginBottom: 8,\r\n  marginTop: 8,\r\n  marginRight: 10,\r\n  width: 1,\r\n};\r\nexport const cardStyle: CSSProperties = {\r\n  width: '100%',\r\n  margin: 'auto',\r\n  backgroundColor: 'inherit',\r\n  borderColor: '#ffc107',\r\n  borderWidth: '3px',\r\n  textAlign: 'left',\r\n};\r\n/*\r\nconst formatNewLabel = inputString => (\r\n  <strong>\r\n    {inputString}\r\n    <small style={{ color: '#ccc' }}>@ New</small>\r\n  </strong>\r\n);\r\n\r\nconst formatOptionLabel = ({ name, progress, innerProps }) => (\r\n  <strong>\r\n    {name}\r\n    <small style={{ color: '#ccc' }}>@{progress}</small>\r\n  </strong>\r\n);\r\n\r\n*/\r\n","import React, { useState } from 'react';\r\nimport { Form, Col, Button } from 'react-bootstrap';\r\n\r\n// Date picker\r\nimport DatePicker from 'react-datepicker';\r\nimport { getEmptyTournament } from './helper';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { TournamentAction } from 'actions/tournament.action';\r\nimport { toastType } from 'components/core/generic/Commons';\r\n\r\ntype newTProps = {\r\n  showMessage: (message: string, type: toastType) => void;\r\n};\r\n\r\nconst NewTournament: React.FC<newTProps> = ({ showMessage }) => {\r\n  let currentHistory = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [name, setName] = useState<string>('');\r\n  const [date, setDate] = useState<Date>(new Date());\r\n  const [visible, setVisible] = useState<boolean>(true);\r\n\r\n  const handleSubmit = async (evt: React.FormEvent<HTMLFormElement>): Promise<void> => {\r\n    evt.preventDefault();\r\n    if (!name) {\r\n      showMessage('Inserire un nome per il torneo', 'danger');\r\n      return;\r\n    }\r\n\r\n    let model = getEmptyTournament(name);\r\n    model.date = date;\r\n    model.public = visible;\r\n    dispatch(TournamentAction.saveTournament.request({ model }));\r\n    currentHistory.push('/tournament');\r\n  };\r\n\r\n  return (\r\n    <Form onSubmit={handleSubmit}>\r\n      <Form.Row>\r\n        <Col md={6}>\r\n          <Form.Group controlId=\"formBasicEmail\">\r\n            <Form.Label>Nome</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              required\r\n              placeholder=\"Nome Torneo\"\r\n              maxLength={30}\r\n              value={name}\r\n              onChange={(event: React.FormEvent<HTMLSelectElement>) => setName(event.currentTarget.value)}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n        <Col md={3}>\r\n          <Form.Group>\r\n            <Form.Label>Data</Form.Label>\r\n            <Form.Control\r\n              as={() => (\r\n                <DatePicker\r\n                  highlightDates={[new Date()]}\r\n                  locale=\"it\"\r\n                  selected={date}\r\n                  dateFormat=\"dd/MM/yyyy\"\r\n                  onChange={(newValue) => setDate(newValue ? newValue : new Date())}\r\n                />\r\n              )}\r\n            ></Form.Control>\r\n          </Form.Group>\r\n        </Col>\r\n\r\n        <Col md={3}>\r\n          <Form.Group controlId=\"visible\">\r\n            <Form.Label>Visibilità </Form.Label>\r\n            <Form.Control as=\"select\" onChange={() => setVisible(!visible)}>\r\n              <option>Pubblico</option>\r\n              <option>Privato</option>\r\n            </Form.Control>\r\n          </Form.Group>\r\n        </Col>\r\n      </Form.Row>\r\n      <Form.Row>\r\n        <Col>\r\n          <Button type=\"submit\" size=\"lg\" variant=\"outline-warning\" className=\"float-right default-color-white\">\r\n            <span style={{ fontSize: 'larger', fontWeight: 'bolder' }}>Prosegui</span>\r\n          </Button>\r\n        </Col>\r\n      </Form.Row>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default NewTournament;\r\n","import React, { useState, useEffect } from 'react';\r\n// React-Select\r\nimport Select, { Styles, ValueType } from 'react-select';\r\n// Bootstrap\r\nimport { Form, Button, Card, Col } from 'react-bootstrap';\r\nimport { useHistory } from 'react-router';\r\n// Core\r\nimport { GenericToast, toastType, IToastProps } from '../core/generic/Commons';\r\nimport { RightArrowIcon } from '../core/icons';\r\n// Helper\r\nimport { cardStyle, IndicatorSeparator } from './helper';\r\nimport { formatDate, translateTournamentProgress } from '../core/utils';\r\nimport NewTournament from './new';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { TournamentSelector } from 'selectors/tournament.selector';\r\nimport { TournamentAction } from 'actions/tournament.action';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { TournamentDTO } from 'models/tournament.model';\r\nimport { SessionSelector } from 'selectors/session.selector';\r\n\r\nconst FTournament = () => {\r\n  // Redux\r\n  const dispatch = useDispatch();\r\n  const session = useSelector(SessionSelector.getSession);\r\n\r\n  // Tournament list from Db\r\n  const tournamentsList = useSelector(TournamentSelector.getTournamentsList);\r\n  const tournament = useSelector(TournamentSelector.getTournament);\r\n\r\n  // State definition\r\n  const [newTournament, setNewTournament] = useState(false);\r\n\r\n  const messageInitialState: IToastProps = { message: '', type: 'success' };\r\n  const [message, setMessage] = useState(messageInitialState);\r\n  let currentHistory = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (!tournamentsList || tournamentsList.length === 0) {\r\n      console.log('useEffect: ', tournamentsList);\r\n      dispatch(TournamentAction.getTournaments.request({}));\r\n    }\r\n  }, [dispatch, tournamentsList]);\r\n\r\n  const showMessage = (message: string, type: toastType) => {\r\n    setMessage({ message, type });\r\n    setTimeout(() => setMessage(messageInitialState), 5000);\r\n  };\r\n\r\n  const handleSubmit = async (event: { preventDefault: () => void }) => {\r\n    event.preventDefault();\r\n    if (tournament) currentHistory.push('/tournament');\r\n    else showMessage('Errore, riprovare piu tardi...', 'danger');\r\n  };\r\n\r\n  const onNewTournament = (value: React.SetStateAction<boolean>) => {\r\n    dispatch(TournamentAction.setTournament(null));\r\n    setNewTournament(value);\r\n  };\r\n\r\n  console.log('render tournament :', tournament, tournamentsList);\r\n\r\n  return (\r\n    <>\r\n      <GenericToast message={message.message} type={message.type} />\r\n\r\n      <Col md={{ span: '6', offset: '3' }} sm=\"12\">\r\n        <Card style={cardStyle}>\r\n          <Card.Header as=\"h2\">Torneo</Card.Header>\r\n          <Card.Body>\r\n            <Col>\r\n              {session.isAdmin && newTournament ? (\r\n                <NewTournament showMessage={showMessage} />\r\n              ) : (\r\n                <Form onSubmit={handleSubmit}>\r\n                  <label htmlFor=\"tournamentSelect\">Selezione Torneo</label>\r\n                  <Select\r\n                    id=\"tournamentSelect\"\r\n                    components={{ IndicatorSeparator }}\r\n                    styles={customStyles}\r\n                    value={tournament}\r\n                    options={tournamentsList}\r\n                    placeholder=\"Cerca un torneo\"\r\n                    isSearchable\r\n                    getOptionLabel={getOptionLabel}\r\n                    isClearable\r\n                    onChange={(tournament: ValueType<TournamentDTO>) =>\r\n                      dispatch(TournamentAction.setTournament(tournament as TournamentDTO))\r\n                    }\r\n                  />\r\n                  <Button\r\n                    type=\"submit\"\r\n                    size=\"lg\"\r\n                    variant=\"outline-warning\"\r\n                    className=\"float-right default-color-white\"\r\n                    disabled={!tournament}\r\n                  >\r\n                    <span style={{ fontSize: 'larger', fontWeight: 'bolder', padding: '1vw' }}>Prosegui</span>\r\n                    <RightArrowIcon size=\"lg\" />\r\n                  </Button>\r\n                </Form>\r\n              )}\r\n            </Col>\r\n          </Card.Body>\r\n          <Card.Footer>\r\n            {session.isAdmin ? (\r\n              newTournament ? (\r\n                <Button\r\n                  type=\"button\"\r\n                  size=\"lg\"\r\n                  variant=\"outline-warning\"\r\n                  className=\"float-left default-color-white\"\r\n                  onClick={() => onNewTournament(false)}\r\n                >\r\n                  Seleziona un torneo\r\n                </Button>\r\n              ) : (\r\n                <Button\r\n                  type=\"button\"\r\n                  size=\"lg\"\r\n                  variant=\"outline-warning\"\r\n                  className=\"float-left default-color-white\"\r\n                  onClick={() => onNewTournament(true)}\r\n                >\r\n                  Crea un nuovo torneo\r\n                </Button>\r\n              )\r\n            ) : null}\r\n          </Card.Footer>\r\n        </Card>\r\n      </Col>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withRouter(FTournament);\r\n\r\nconst getOptionLabel = ({ name, date, progress }: TournamentDTO) =>\r\n  name + ' - ' + formatDate(date) + '@' + translateTournamentProgress(progress);\r\n\r\nconst customStyles: Partial<Styles> | undefined = {\r\n  // menuList: (provided, state) => ({ ...provided, border: '1px solid #ffc107' }),\r\n  option: (provided) => ({\r\n    ...provided,\r\n    backgroundColor: 'white',\r\n    color: 'black',\r\n    '&:hover': {\r\n      backgroundColor: '#64bd9c',\r\n      color: 'white',\r\n    },\r\n  }),\r\n  control: (provided) => ({ ...provided, height: '3vmin', marginBottom: '40px' }),\r\n  singleValue: (provided) => ({ ...provided }),\r\n  valueContainer: (provided) => ({ ...provided, height: '100%', fontSize: 'larger' }),\r\n};\r\n"],"sourceRoot":""}