(this.webpackJsonpcalcetto=this.webpackJsonpcalcetto||[]).push([[10],{227:function(e,a,t){"use strict";t.d(a,"c",(function(){return n})),t.d(a,"e",(function(){return l})),t.d(a,"b",(function(){return o})),t.d(a,"d",(function(){return c})),t.d(a,"a",(function(){return s}));var r=t(228),n=function(){return o(new Date)};function l(e){switch(e){case r.a.New:return"Nuovo";case r.a.PairsSelection:return"Selezione Coppie";case r.a.Stage1:return"Fase 1";case r.a.Stage2:return"Fase 2";default:return""}}function o(e){var a=new Date(e),t=""+(a.getMonth()+1),r=""+a.getDate(),n=a.getFullYear();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),[n,t,r].join("/")}new RegExp("^d{10}$");var c=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,16})"),s=new RegExp("^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$")},228:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var r={New:"New",PairsSelection:"PairsSelection",Stage1:"Stage1",Stage2:"Stage2"}},233:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));var r=t(34),n=t(0),l=function(e){var a=Object(n.useState)(e),t=Object(r.a)(a,2),l=t[0],o=t[1];return{value:l,setValue:o,reset:function(){return o("")},bind:{value:l,onChange:function(e){o(e.currentTarget.value)}}}}},330:function(e,a,t){},337:function(e,a,t){"use strict";t.r(a);var r=t(34),n=t(0),l=t.n(n),o=t(263),c=t(212),s=t(205),i=t(118),u=t(47),m=t.n(u),d=t(53),p=t(61),b=t(233),E=t(260),g=t(226),f=t(36),h=t(83),v=t.n(h),j=t(240),O=(t(330),t(227)),w=[{value:"No",label:"Non sono un giocatore"},{value:"Portiere",label:"Portiere"},{value:"Attaccante",label:"Attaccante"},{value:"Master",label:"Master"}],y=function(e){var a=e.setErrorMessage,t=Object(f.d)(),n=Object(r.a)(t,2),o=n[0],c=n[1],s=Object(b.a)(""),u=s.value,h=s.bind,y=s.reset,k=Object(b.a)(""),S=k.value,C=k.bind,I=k.reset,L=Object(b.a)(""),A=L.value,N=L.bind,P=L.reset,R=Object(b.a)(""),z=R.value,q=R.bind,G=R.reset,M=Object(b.a)(""),T=M.value,F=M.bind,Z=M.reset,D=Object(b.a)(""),U=D.value,J=D.bind,V=D.reset,$=Object(b.a)(""),B=$.value,H=$.bind,Y=$.reset,_=Object(b.a)(""),K=_.value,Q=_.bind,W=_.reset,X=Object(b.a)(""),ee=X.value,ae=X.setValue,te=X.reset,re=Object(b.a)({value:"No",label:"Non sono un giocatore"}),ne=re.value,le=re.setValue,oe=re.reset,ce=function(e){a(e),setTimeout((function(){return a("")}),3e3)},se=function(){var e=Object(p.a)(m.a.mark((function e(a){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),u?S?A?z?O.a.test(z)?T?O.a.test(T)?z!==T?(ce("Le email non corrispondono"),0):U?O.d.test(U)?B?O.d.test(B)?U===B||(ce("Le password non corrispondono"),0):(ce("La password non rispetta i criteri"),0):(ce("Inserire la conferma password"),0):(ce("La password non rispetta i criteri"),0):(ce("Inserire una password"),0):(ce("Inserire una email valida"),0):(ce("Inserire la conferma email"),0):(ce("Inserire una email valida"),0):(ce("Inserire una email"),0):(ce("Inserire il cognome"),0):(ce("Inserire il nome"),0):(ce("Scegli uno username"),0)){e.next=3;break}return e.abrupt("return");case 3:return t={username:u,name:S,surname:A,email:z,cEmail:T,password:U,cPassword:B,phone:K,birthday:ee,playerRole:ne},e.prev=4,e.next=7,fetch("/api/v1/auth/register",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 7:return r=e.sent,e.next=10,r.json();case 10:if(n=e.sent,!r.ok||!n){e.next=19;break}console.log("before register : ",n),console.log("before register : ",Object(d.a)({},o,{},n,{isAuthenticated:!0})),console.log("before register : ",Object(d.a)({},n,{isAuthenticated:!0})),c(Object(d.a)({},o,{},n,{isAuthenticated:!0})),console.log("after register : ",o),e.next=27;break;case 19:e.t0=r.status,e.next=401===e.t0?22:403===e.t0?24:26;break;case 22:return ce("Utente o Password errata"),e.abrupt("break",27);case 24:return ce("Utente o Email gia registrati"),e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(4),console.error("onSubmitLogin : ",e.t1),ce("Errore durante il processo di registrazione. Riprovare piu tardi");case 33:case"end":return e.stop()}}),e,null,[[4,29]])})));return function(a){return e.apply(this,arguments)}}();return l.a.createElement(E.a,{onSubmit:se},l.a.createElement(E.a.Row,null,l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"username"},l.a.createElement(E.a.Label,null,"Username"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"text",placeholder:"username"},h)))),l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"name"},l.a.createElement(E.a.Label,null,"Nome"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"text",placeholder:"Nome"},C)))),l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"surname"},l.a.createElement(E.a.Label,null,"Cognome"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"text",placeholder:"Cognome"},N))))),l.a.createElement(E.a.Row,null,l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"email"},l.a.createElement(E.a.Label,null,"Email"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"email",placeholder:"Email"},q)))),l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"cemail"},l.a.createElement(E.a.Label,null,"Conferma Email"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"email",placeholder:"Conferma Email"},F))))),l.a.createElement(E.a.Row,null,l.a.createElement(g.a,null,l.a.createElement(E.a.Group,{controlId:"password"},l.a.createElement(E.a.Label,null,"Password"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"password",placeholder:"Password"},J))),l.a.createElement(E.a.Group,{controlId:"cpassword"},l.a.createElement(E.a.Label,null,"Conferma Password"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"password",placeholder:"Conferma Password"},H)))),l.a.createElement(g.a,{md:6,style:{display:"flex",alignItems:"center"}},l.a.createElement("ul",null,l.a.createElement("strong",null,"La password deve rispettare i sequenti criteri :"),l.a.createElement("li",{key:"pass-1"},"Almeno 1 carattere minuscolo"),l.a.createElement("li",{key:"pass-2"},"Almeno 1 carattere maiuscolo"),l.a.createElement("li",{key:"pass-3"},"Almeno 1 carattere numerico"),l.a.createElement("li",{key:"pass-5"},"Tra 8 e 16 caratteri")))),l.a.createElement(E.a.Row,null,l.a.createElement(g.a,{md:3},l.a.createElement(E.a.Group,{controlId:"phone"},l.a.createElement(E.a.Label,null,"Telefono"),l.a.createElement(E.a.Control,Object.assign({type:"text",placeholder:"Telefono"},Q)))),l.a.createElement(g.a,{md:3},l.a.createElement(E.a.Group,{controlId:"birthday"},l.a.createElement(E.a.Label,null,"Data di nascita"),l.a.createElement(v.a,{className:"datepicker",dateFormat:"dd/MM/yyyy",required:!0,selected:ee,onChange:function(e){return ae(e)}}))),l.a.createElement(g.a,{md:6},l.a.createElement(E.a.Group,null,l.a.createElement(E.a.Label,null,"Ruolo"),l.a.createElement(j.a,{dateFormat:"dd/MM/yyyy",value:ne,onChange:function(e){return le(e)},options:w,styles:x}),l.a.createElement(E.a.Text,{className:"text-muted default-color-green"},"Sei un giocatore? Assegna qui il tuo ruolo.")))),l.a.createElement(i.a,{variant:"outline-success",type:"submit",size:"lg"},"Registrati"),l.a.createElement(i.a,{variant:"outline-danger",className:"float-right",onClick:function(){y(),I(),P(),G(),Z(),V(),Y(),W(),te(),oe()},type:"submit",size:"lg"},"Reset"))},x={control:function(e){return Object(d.a)({},e,{height:"38px"})},input:function(e){return Object(d.a)({},e,{height:"38px"})},option:function(e,a){a.data,a.isDisabled,a.isFocused,a.isSelected;return Object(d.a)({},e,{color:"black"})},placeholder:function(e){return Object(d.a)({},e,{height:"38px"})},singleValue:function(e,a){a.data;return Object(d.a)({},e,{height:"38px"})},clearIndicator:function(e){return Object(d.a)({},e,{height:"38px"})},indicatorSeparator:function(e){return Object(d.a)({},e)}},k=t(15),S=function(e){var a=e.setErrorMessage,t=Object(k.g)(),n=Object(f.d)(),o=Object(r.a)(n,2),c=o[0],s=o[1],u=Object(b.a)(""),g=u.value,h=u.bind,v=Object(b.a)(""),j=v.value,O=v.bind,w=function(e){a(e),setTimeout((function(){return a("")}),3e3)},y=function(){var e=Object(p.a)(m.a.mark((function e(a){var r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),g&&""!==g){e.next=4;break}return w("Inserire username o password"),e.abrupt("return");case 4:if(j&&""!==j){e.next=7;break}return w("Inserire la password"),e.abrupt("return");case 7:return e.prev=7,e.next=10,fetch("/api/v1/auth/authenticate",{method:"POST",body:JSON.stringify({username:g,password:j}),headers:{"Content-Type":"application/json"}});case 10:return r=e.sent,e.next=13,r.json();case 13:n=e.sent,r.ok&&n?(s(Object(d.a)({},c,{},n,{isAuthenticated:!0})),t.push("/")):401===r.status&&w("Utente o Password errata"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(7),console.log("onSubmitLogin : ",e.t0),w("Errore durante il processo di registrazione. Riprovare piu tardi");case 21:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(a){return e.apply(this,arguments)}}();return l.a.createElement(E.a,{onSubmit:y},l.a.createElement(E.a.Group,{controlId:"username"},l.a.createElement(E.a.Label,null,"Username o Email"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"text",placeholder:"username o email"},h))),l.a.createElement(E.a.Group,{controlId:"password"},l.a.createElement(E.a.Label,null,"Password"),l.a.createElement(E.a.Control,Object.assign({required:!0,type:"password",placeholder:"Password"},O))),l.a.createElement(i.a,{size:"lg",variant:"outline-success",type:"submit"},"Login"))},C=t(331),I=t(103);a.default=function(){var e=Object(n.useState)(!1),a=Object(r.a)(e,2),t=a[0],u=a[1],m=Object(n.useState)(""),d=Object(r.a)(m,2),p=d[0],b=d[1],E=Object(I.a)({prefix:"far",iconName:"arrow-alt-circle-right"}),g=t?"Registrati":"Login",f=t?l.a.createElement(y,{setErrorMessage:b}):l.a.createElement(S,{setErrorMessage:b}),h=t?"Login":"Registrati",v=l.a.createElement(C.a,{icon:E}),j={textAlign:"left",width:t?"50vw":"40vw",height:"auto",margin:"auto",color:"white"};return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{style:j,className:"default-background"},l.a.createElement(o.a.Header,{as:"h2"},g),l.a.createElement(o.a.Body,null,l.a.createElement(c.a,null,p?l.a.createElement(s.a,{key:"auth-alert",variant:"danger"},p):null,f)),l.a.createElement(o.a.Footer,null,l.a.createElement(i.a,{variant:"outline-warning",onClick:function(){return u(!t)}},l.a.createElement("div",null,v," ",l.a.createElement("strong",null,h))))))}}}]);
//# sourceMappingURL=10.323d69c5.chunk.js.map