{"version":3,"sources":["../node_modules/react-bootstrap/esm/InputGroup.js","components/Stage2/cell.tsx","components/Pair/select.tsx","components/Stage2/table.tsx","components/Stage2/helper.tsx","components/Stage2/handler.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","common.module.css","components/Tournament/badge.tsx","components/Stage2/style.module.css"],"names":["InputGroupAppend","createWithBsPrefix","InputGroupPrepend","InputGroupText","Component","InputGroup","React","forwardRef","_ref","ref","bsPrefix","size","className","_ref$as","as","props","_objectWithoutPropertiesLoose","useBootstrapPrefix","createElement","_extends","classNames","displayName","InputGroupWithExtras","Text","Radio","type","Checkbox","Append","Prepend","Cell","icon","onClick","name","isWinner","span","rowIndex","colIndex","pair","buttonDisabled","isLast","renderCustomComponent","color","rowSpan","style","cell","borderBottom","join","container","prepend","FormControl","placeholder","value","player1","player2","aria-label","aria-describedby","readOnly","Button","disabled","append","e","PairsSelect","getOptionLabel","styles","options","onChange","defaultValue","useState","selectedOption","setSelectedOption","components","actionMeta","isSearchable","isClearable","Stage2","elements","pairsSelect","rowNumber","onSelectPair","colNumber","getBaseLog","bRows","rows","counter","Array","fill","index","pairsNumber","indexes","NaN","currentMax","ii","growFactor","Math","pow","jj","getIndexes","provided","flex","option","zIndex","menuList","height","id","placement","stage1Name","alias","console","log","row","matchId","cellRowIndex","cellColIndex","parentId","push","undefined","isButtonDisabled","length","getTableBodyRows","hElem","tds","headerCell","width","getTableHeaderElements","table","body","withRouter","currentHistory","useHistory","dispatch","useDispatch","cells","useSelector","Stage2Selector","getCells","getRowsNumber","isLoading","tournament","TournamentSelector","getTournament","pairsList","setPairsList","useEffect","a","Stage2Action","setLoading","fetchPairsStage2","result","pairs","Col","commonStyle","toolsBarContainer","Row","toolsBarRow","variant","event","current1","current2","next","updateCell","request","cell1","cell2","setCells","newPair","prevPair","filter","show","_slicedToArray","arr","i","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","_s","_i","done","err","unsupportedIterableToArray","TypeError","module","exports","TournamentBadge","t","useTranslation","public","toUpperCase","formatDate","date","progress"],"mappings":"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","file":"static/js/10.f0fb33bc.chunk.js","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar InputGroupAppend = createWithBsPrefix('input-group-append');\nvar InputGroupPrepend = createWithBsPrefix('input-group-prepend');\nvar InputGroupText = createWithBsPrefix('input-group-text', {\n  Component: 'span'\n});\n\nvar InputGroupCheckbox = function InputGroupCheckbox(props) {\n  return /*#__PURE__*/React.createElement(InputGroupText, null, /*#__PURE__*/React.createElement(\"input\", _extends({\n    type: \"checkbox\"\n  }, props)));\n};\n\nvar InputGroupRadio = function InputGroupRadio(props) {\n  return /*#__PURE__*/React.createElement(InputGroupText, null, /*#__PURE__*/React.createElement(\"input\", _extends({\n    type: \"radio\"\n  }, props)));\n};\n\n/**\n *\n * @property {InputGroupAppend} Append\n * @property {InputGroupPrepend} Prepend\n * @property {InputGroupText} Text\n * @property {InputGroupRadio} Radio\n * @property {InputGroupCheckbox} Checkbox\n */\nvar InputGroup = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      size = _ref.size,\n      className = _ref.className,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"size\", \"className\", \"as\"]);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'input-group');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, bsPrefix, size && bsPrefix + \"-\" + size)\n  }));\n});\nInputGroup.displayName = 'InputGroup';\n\nvar InputGroupWithExtras = _extends({}, InputGroup, {\n  Text: InputGroupText,\n  Radio: InputGroupRadio,\n  Checkbox: InputGroupCheckbox,\n  Append: InputGroupAppend,\n  Prepend: InputGroupPrepend\n});\n\nexport default InputGroupWithExtras;","import React from 'react';\nimport style from './style.module.css';\nimport { InputGroup, FormControl, Button } from 'react-bootstrap';\nimport { DoubleRightIcon, BanIcon, TrophyIcon } from '../core/icons';\nimport { ICell, PairDTO } from '../../@common/dto';\n\ninterface NodeElement extends ICell {\n  span: number;\n  renderCustomComponent?: (rowIndex: number, colIndex: number, isLast: boolean, pair?: PairDTO) => JSX.Element;\n  onClick: (\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n    rowIndex: number,\n    colIndex: number,\n    winner: boolean\n  ) => void;\n  rowIndex: number;\n  colIndex: number;\n  buttonDisabled: boolean;\n  isLast: boolean;\n}\n\nconst Cell: React.FC<NodeElement> = ({\n  onClick,\n  name,\n  isWinner,\n  span,\n  rowIndex,\n  colIndex,\n  pair,\n  buttonDisabled,\n  isLast,\n  renderCustomComponent,\n}) => {\n  let icon: JSX.Element;\n  if (isLast) icon = <TrophyIcon size=\"lg\" color=\"gold\" />;\n  else icon = isWinner ? <DoubleRightIcon size=\"lg\" color=\"green\" /> : <BanIcon size=\"1x\" color=\"red\" />;\n\n  return (\n    <td rowSpan={span} className={rowIndex % 2 === 0 ? [style.cell, style.borderBottom].join(' ') : style.cell}>\n      <InputGroup className={style.container}>\n        <InputGroup.Prepend className={style.prepend}>\n          <InputGroup.Text>{rowIndex}</InputGroup.Text>\n        </InputGroup.Prepend>\n        {renderCustomComponent ? (\n          renderCustomComponent(rowIndex, colIndex, isLast, pair)\n        ) : (\n          <FormControl\n            placeholder={'Username' + colIndex}\n            value={pair ? `${pair.player1?.name} - ${pair.player2?.name}` : name}\n            aria-label=\"Username\"\n            aria-describedby=\"Username\"\n            readOnly={colIndex > 1}\n            size=\"lg\"\n          />\n        )}\n        <InputGroup.Append>\n          <Button\n            disabled={buttonDisabled}\n            className={style.append}\n            onClick={(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => onClick(e, rowIndex, colIndex, !isWinner)}\n          >\n            {icon}\n          </Button>\n        </InputGroup.Append>\n      </InputGroup>\n    </td>\n  );\n};\n\nexport default Cell;\n","import { PairDTO } from 'src/@common/dto';\nimport React, { useState } from 'react';\nimport Select, { Styles, ValueType, ActionMeta, components } from 'react-select';\nimport { SelectComponents } from 'react-select/src/components';\n\ninterface PairSelectProps {\n  // indice riga ( Stage2 )\n  rowIndex: number;\n  // stili\n  styles?: Partial<Styles>;\n  // opzioni della lista\n  options: PairDTO[];\n  // Callback per formattare le opzioni della lista\n  getOptionLabel?: (option: PairDTO) => string;\n  // Callback onChange\n  onChange?: (value: ValueType<PairDTO, false>, rowIndex: number, actionMeta?: ActionMeta<PairDTO>) => void;\n  components?: Partial<SelectComponents<PairDTO, false>>;\n  defaultValue?: PairDTO;\n}\n\n// Probabilmente il componente Select usa Ref.... Lascio cosi..\n// TODO: Si potrebbe generalizzare questo componente tramite i generics\nconst PairsSelect: React.FC<PairSelectProps> = React.forwardRef(\n  ({ getOptionLabel, styles, rowIndex, options, onChange, defaultValue }, ref) => {\n    const [selectedOption, setSelectedOption] = useState<PairDTO>();\n\n    const handleChange = (value: ValueType<PairDTO, false>, actionMeta: ActionMeta<PairDTO>) => {\n      setSelectedOption(value as PairDTO);\n      if (onChange) onChange(value, rowIndex, actionMeta);\n    };\n\n    return (\n      <Select\n        defaultValue={defaultValue}\n        components={components}\n        styles={styles}\n        options={options}\n        onChange={handleChange}\n        getOptionLabel={getOptionLabel}\n        value={selectedOption}\n        placeholder=\"Cerca...\"\n        isSearchable\n        isClearable\n      />\n    );\n  }\n);\n\nexport default PairsSelect;\n","import React from 'react';\nimport style from './style.module.css';\nimport { getIndexes, getEmptyCell, onClickCallback, onSelectCallback } from './helper';\nimport Cell from './cell';\nimport { getBaseLog } from '../../@common/utils/math.utils';\nimport PairsSelect from '../Pair/select';\nimport { Styles } from 'react-select';\nimport { PairDTO, ICell } from '../../@common/dto';\n// import { valueFormatter } from 'components/Pair/helper';\n\n// https://www.kodbiro.com/blog/rorgchart-react-module-for-displaying-and-editing-data-in-org-chart/\n\ninterface Stage2Props {\n  pairsSelect: PairDTO[];\n  elements: ICell[][];\n  rowNumber: number;\n  onClick: onClickCallback;\n  onSelectPair: onSelectCallback;\n}\n\nconst Stage2: React.FC<Stage2Props> = ({ onClick, elements, pairsSelect, rowNumber = 64, onSelectPair }) => {\n  /*\n   * Calcolo il numero di colonne in funzione del numero di righe\n   * in quanto l'oggetto che ricevo protrebbe essere solo un parziale\n   */\n  const colNumber = getBaseLog(2, rowNumber) + 1;\n  const bRows = getTableBodyRows(elements, rowNumber, colNumber, onClick, pairsSelect, onSelectPair);\n  const hElem = getTableHeaderElements(colNumber);\n\n  return (\n    <table className={style.table}>\n      <thead>\n        <tr>{hElem}</tr>\n      </thead>\n      <tbody className={style.body}>{bRows}</tbody>\n    </table>\n  );\n};\n\nexport default Stage2;\n\nfunction getTableHeaderElements(colNumber: number): JSX.Element[] {\n  const tds: JSX.Element[] = [];\n  for (let ii = 1; ii <= colNumber; ii++) {\n    tds.push(\n      <td\n        key={`header ${ii}`}\n        className={style.headerCell}\n        style={{\n          width: `${100 / colNumber}%`,\n        }}\n      >\n        <strong>{`Stage-${ii}`}</strong>\n      </td>\n    );\n  }\n  return tds;\n}\n\n// eslint-disable-next-line sonarjs/cognitive-complexity\nfunction getTableBodyRows(\n  elements: ICell[][],\n  rowNumber: number,\n  colNumber: number,\n  onClick: onClickCallback,\n  pairsSelect: PairDTO[],\n  onSelectPair: onSelectCallback\n): JSX.Element[] {\n  // Conterrà tutte le righe della tabella\n  const rows: JSX.Element[] = [];\n  // Indice di riga progressivo\n  const counter = new Array<number>(colNumber).fill(0);\n  // Sequenza numero di elementi da aggiungere alla riga\n  const index: number[] = getIndexes(rowNumber);\n\n  const renderCustomComponent = (rowIndex: number, colIndex: number, isLast: boolean, pair?: PairDTO) => {\n    const styles: Partial<Styles> = {\n      container: (provided) => ({\n        ...provided,\n        flex: '1 1 auto',\n      }),\n      option: (provided) => ({ ...provided, zIndex: 6 }),\n      menuList: (provided) => ({\n        ...provided,\n        flex: '1 1 auto',\n        zIndex: 5,\n        height: 'auto',\n      }),\n    };\n    const getOptionLabel = (option: PairDTO) =>\n      option.id\n        ? `${option.placement}${option.stage1Name} : ${\n            option.alias ? option.alias : `${option.player1?.name} - ${option.player2?.name} `\n          }`\n        : '-';\n    /* TODO:\n    const CustomOption = ({ innerRef, innerProps, data }: OptionProps<PairDTO>) => (\n      <div ref={innerRef} {...innerProps}>\n        {data.placement}\n      </div>\n    );\n    */\n    console.log('Render stage2 select :', rowIndex, colIndex, isLast, pair);\n    return (\n      <PairsSelect\n        //components={{ Option: CustomOption }}\n        styles={styles}\n        defaultValue={pair}\n        options={pairsSelect}\n        rowIndex={rowIndex}\n        onChange={onSelectPair}\n        getOptionLabel={getOptionLabel}\n      />\n    );\n  };\n\n  for (let ii = 1; ii <= rowNumber; ii++) {\n    const row: JSX.Element[] = [];\n    for (let jj = 0; jj < index[ii]; jj++) {\n      counter[jj] += 1;\n      const cell = elements[jj] ? elements[jj][counter[jj] - 1] : getEmptyCell();\n      row.push(\n        <Cell\n          renderCustomComponent={jj === 0 ? renderCustomComponent : undefined}\n          key={`cell : ${jj}-${counter[jj] - 1}`}\n          span={Math.pow(2, jj)}\n          rowIndex={counter[jj]}\n          colIndex={jj + 1}\n          onClick={onClick}\n          buttonDisabled={isButtonDisabled(counter[jj], jj, elements)}\n          isLast={elements[jj].length === 1}\n          {...cell}\n        />\n      );\n    }\n    rows.push(\n      <tr key={`row : ${ii}`} className={style.row}>\n        {row}\n      </tr>\n    );\n  }\n  return rows;\n}\n\n/*\n  Il button per impostare la coppia vincente è abilitato solo se entrambe le cell hanno una coppia assegnata\n*/\nconst isButtonDisabled = (rowIndex: number, colIndex: number, elements: ICell[][]) =>\n  (elements[colIndex] && elements[colIndex].length === 1) ||\n  (rowIndex % 2 !== 0\n    ? !elements[colIndex][rowIndex - 1].pair || (elements[colIndex][rowIndex] && !elements[colIndex][rowIndex].pair)\n    : !elements[colIndex][rowIndex - 1].pair ||\n      (elements[colIndex][rowIndex - 2] && !elements[colIndex][rowIndex - 2].pair));\n","import { getBaseLog } from '../../@common/utils';\nimport { ValueType, ActionMeta } from 'react-select';\nimport { PairDTO, ICell } from '../../@common/dto';\n\nexport type onClickCallback = (\n  event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n  rowIndex: number,\n  colIndex: number,\n  isWinner: boolean\n) => void;\n\nexport type onSelectCallback = (value: ValueType<PairDTO, false>, rowIndex: number, actionMeta?: ActionMeta<PairDTO>) => void;\nexport const getIndexes = (pairsNumber: number): number[] => {\n  const N = getBaseLog(2, pairsNumber) + 1; // Numero massimo di elementi td\n  /*\n   * Array per mappare numero riga a numero di elementi td\n   * Inizializzo come primo NaN solo per avere un placeholder all'index 0  e iniziare l'analisi da 1\n   */\n  let indexes = [NaN, N];\n  let currentMax = 1;\n  for (let ii = 1; ii <= pairsNumber; ii++) {\n    if (!indexes[ii]) {\n      indexes[ii] = currentMax;\n      let growFactor = Math.pow(2, currentMax);\n      for (let jj = 1; ii + growFactor * jj < pairsNumber + 1; jj++) indexes[ii + growFactor * jj] = currentMax;\n      currentMax++;\n    }\n  }\n  return indexes;\n};\n\nexport const getEmptyCell = (name?: string): ICell => ({\n  name: '',\n  isWinner: false,\n  matchId: 0,\n  cellRowIndex: 0,\n  cellColIndex: 0,\n  parentId: 0,\n});\n","import React, { useState, useEffect } from 'react';\nimport { withRouter, RouteComponentProps, useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Stage2 from './table';\nimport { Button, Col, Row } from 'react-bootstrap';\nimport commonStyle from '../../common.module.css';\nimport { Stage2Selector, TournamentSelector } from '../../redux/selectors';\nimport { Stage2Action } from '../../redux/actions';\nimport { LoadingModal } from '../core/generic/Commons';\nimport { LeftArrowIcon } from '../core/icons';\nimport TournamentBadge from '../Tournament/badge';\nimport { fetchPairsStage2 } from '../../redux/services/stage2.service';\nimport { onClickCallback, onSelectCallback } from './helper';\nimport { PairDTO, ICell } from '../../@common/dto';\n\n// import template from './template';\n\ninterface Stage2HandlerProps extends RouteComponentProps {}\n\n// eslint-disable-next-line sonarjs/cognitive-complexity\nconst Stage2Handler: React.FC<Stage2HandlerProps> = () => {\n  const currentHistory = useHistory();\n  const dispatch = useDispatch();\n\n  const cells = useSelector(Stage2Selector.getCells);\n  const rowNumber = useSelector(Stage2Selector.getRowsNumber);\n  const isLoading = useSelector(Stage2Selector.isLoading);\n  const tournament = useSelector(TournamentSelector.getTournament)!;\n  // const pairsListFromStore = useSelector(Stage1Selector.getSelectedPairs);\n  const [pairsList, setPairsList] = useState<PairDTO[]>();\n\n  function goBack() {\n    currentHistory.push('/stage1');\n  }\n\n  useEffect(() => {\n    (async () => {\n      dispatch(Stage2Action.setLoading(true));\n      const result = await fetchPairsStage2(tournament.id!);\n      setPairsList(result.pairs);\n      dispatch(Stage2Action.setLoading(false));\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tournament.id]);\n\n  // Callback tasto vittoria/sconfitta coppia : Sposta la coppia alla fase successiva\n  const onClick: onClickCallback = (event, rowIndex, colIndex, isWinner) => {\n    const elements = [...cells!];\n    // Coppia 1 e 2 dell'incontro corrente\n    let current1: ICell | null = null;\n    let current2: ICell | null = null;\n    // Element Incontro successivo\n    let next: ICell | null = null;\n    if (rowIndex % 2 !== 0) {\n      current1 = elements[colIndex - 1][rowIndex - 1];\n      current2 = elements[colIndex - 1][rowIndex];\n    } else {\n      current1 = elements[colIndex - 1][rowIndex - 1];\n      current2 = elements[colIndex - 1][rowIndex - 2];\n    }\n    next = elements[colIndex][current1.matchId - 1];\n    console.log(' onClick : ', current1, current2, next);\n\n    current1.isWinner = isWinner;\n    current2.isWinner = !isWinner;\n    if (next) next.pair = isWinner ? current1.pair : current2.pair;\n    dispatch(Stage2Action.updateCell.request({ cell1: current1, cell2: current2 }));\n    dispatch(Stage2Action.setCells(elements));\n    if (elements[colIndex].length === 1) {\n      dispatch(Stage2Action.updateCell.request({ cell1: next, cell2: null }));\n    }\n  };\n\n  // Questa funzione viene richiamata quando viene selezionata una coppia nella prima colonna\n  const onSelectPair: onSelectCallback = (value, rowIndex, actionMeta) => {\n    if (!pairsList) {\n      return;\n    }\n    const elements = [...cells!];\n    const newPair = value as PairDTO;\n    const prevPair = elements[0][rowIndex - 1].pair;\n    let pairs: PairDTO[] = [...pairsList];\n\n    // Se ho selezionato una coppia la elimino dalla lista ( questa condizione esclude il placeholder )\n    if (newPair && newPair.id) {\n      pairs = pairs.filter((e) => e.id !== newPair.id);\n    }\n    // Se nella celle era gia presente una coppia la ripristino\n    if (prevPair && prevPair.id) {\n      pairs = [...pairs!, prevPair];\n    }\n    setPairsList(pairs);\n    elements[0][rowIndex - 1].pair = newPair;\n    dispatch(Stage2Action.setCells(elements));\n    dispatch(Stage2Action.updateCell.request({ cell1: elements[0][rowIndex - 1], cell2: null }));\n  };\n\n  //console.log('render stage2 :', cells, pairsList, rowNumber);\n  return cells && pairsList && rowNumber ? (\n    <>\n      <Col className={commonStyle.toolsBarContainer}>\n        <Row className={commonStyle.toolsBarRow}>\n          <Col>\n            <Button variant=\"secondary\" className=\"float-left\" onClick={goBack}>\n              <LeftArrowIcon /> Indietro\n            </Button>\n          </Col>\n        </Row>\n      </Col>\n      <TournamentBadge />\n\n      <Stage2\n        pairsSelect={pairsList}\n        onClick={onClick}\n        rowNumber={rowNumber}\n        elements={cells}\n        onSelectPair={onSelectPair}\n      />\n    </>\n  ) : (\n    <LoadingModal show={isLoading} />\n  );\n};\n\nexport default withRouter(Stage2Handler);\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"functionsList\":\"common_functionsList__3B3UB\",\"toolsBarContainer\":\"common_toolsBarContainer__1nanA\",\"toolsBarRow\":\"common_toolsBarRow__r8q12\"};","import React from 'react';\nimport { TournamentSelector } from '../../redux/selectors';\nimport { useSelector } from 'react-redux';\nimport { Row, Col, Badge } from 'react-bootstrap';\nimport { formatDate } from '../../@common/utils/date.utils';\nimport { useTranslation } from 'react-i18next';\n\ninterface TournamentBadgeProps {}\nconst TournamentBadge: React.FC<TournamentBadgeProps> = () => {\n  const tournament = useSelector(TournamentSelector.getTournament)!;\n  const { t } = useTranslation(['tournament']);\n  return (\n    <Row>\n      <Col>\n        <h2 className=\"float-left\">\n          <Badge variant=\"info\">\n            <span>{t(`tournament:${tournament.public ? 'public':'private'}_tournament`)} </span>\n            <strong>\"{tournament.name.toUpperCase()}\"</strong>\n            <span>\n              <i>\n                {` - ${formatDate(tournament.date)} `}\n                <small> @ {t(`tournament:progress.${tournament.progress}`)}</small>\n                {process.env.NODE_ENV === 'development' ? <strong>{`  --> ( ${tournament.id} )`}</strong>: null}\n              </i>\n            </span>\n          </Badge>\n        </h2>\n      </Col>\n    </Row>\n  );\n};\n\nexport default TournamentBadge;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"style_table__2Kzbq\",\"cell\":\"style_cell__1Tgmm\",\"borderBottom\":\"style_borderBottom__2eMt1\",\"headerCell\":\"style_headerCell__2Jwbq\",\"container\":\"style_container__3mFJG\",\"row\":\"style_row__3YvC9\",\"prepend\":\"style_prepend__1aYFO\",\"append\":\"style_append__1Z8QN\",\"center\":\"style_center__3xWH5\"};"],"sourceRoot":""}